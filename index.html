
        <style>
        @import url(https://fonts.googleapis.com/css?family=Google+Sans+Text);
        html {
          font-family: 'Google Sans Text', 'Google Sans';
          font-size: 14px;
          color-scheme: light dark;
          background: light-dark(white, black);
          color: light-dark(black, white);
        }
        </style>
        
        <script type="importmap">{"imports":{"@modelcontextprotocol/sdk/":"https://esm.sh/@modelcontextprotocol/sdk/dist/esm/","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/es2022/":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/es2022/dist/esm/","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/client/index?target=es2022":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/dist/esm/client/index?target=es2022","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/types?target=es2022":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/dist/esm/types?target=es2022","react":"https://aistudiocdn.com/react@^19.2.1","react-dom/":"https://aistudiocdn.com/react-dom@^19.2.1/","react/":"https://aistudiocdn.com/react@^19.2.1/","@/index":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@/types":"data:application/javascript;base64,ZXhwb3J0IHZhciBBcHBTdGF0ZTsKKGZ1bmN0aW9uIChBcHBTdGF0ZSkgewogICAgQXBwU3RhdGVbIklETEUiXSA9ICJJRExFIjsKICAgIEFwcFN0YXRlWyJMT0FESU5HIl0gPSAiTE9BRElORyI7CiAgICBBcHBTdGF0ZVsiRURJVElORyJdID0gIkVESVRJTkciOwogICAgQXBwU3RhdGVbIlBST0NFU1NJTkciXSA9ICJQUk9DRVNTSU5HIjsKICAgIEFwcFN0YXRlWyJFUlJPUiJdID0gIkVSUk9SIjsKICAgIEFwcFN0YXRlWyJMSUJSQVJZIl0gPSAiTElCUkFSWSI7Cn0pKEFwcFN0YXRlIHx8IChBcHBTdGF0ZSA9IHt9KSk7CmV4cG9ydCB2YXIgVG9vbE1vZGU7CihmdW5jdGlvbiAoVG9vbE1vZGUpIHsKICAgIFRvb2xNb2RlWyJTRUxFQ1QiXSA9ICJTRUxFQ1QiOwogICAgVG9vbE1vZGVbIk1PVkUiXSA9ICJNT1ZFIjsKfSkoVG9vbE1vZGUgfHwgKFRvb2xNb2RlID0ge30pKTsK","@/constants":"data:application/javascript;base64,ZXhwb3J0IGNvbnN0IFRIRU1FX0NPTE9SID0gJyMwNmI2ZDQnOyAvLyBDeWFuLTUwMApleHBvcnQgY29uc3QgV0FWRUZPUk1fQ09MT1IgPSAnIzIyZDNlZSc7IC8vIEN5YW4tNDAwCmV4cG9ydCBjb25zdCBXQVZFRk9STV9CRyA9ICcjMTgxODFiJzsgLy8gWmluYy05MDAKZXhwb3J0IGNvbnN0IFNFTEVDVElPTl9DT0xPUiA9ICdyZ2JhKDYsIDE4MiwgMjEyLCAwLjMpJzsKZXhwb3J0IGNvbnN0IFBMQVlIRUFEX0NPTE9SID0gJyNlZjQ0NDQnOyAvLyBSZWQtNTAwCmV4cG9ydCBjb25zdCBERUZBVUxUX1NBTVBMRV9SQVRFID0gNDQxMDA7CmV4cG9ydCBjb25zdCBNQVhfWk9PTSA9IDMwMDsgLy8gcGl4ZWxzIHBlciBzZWNvbmQKZXhwb3J0IGNvbnN0IE1JTl9aT09NID0gMTA7CmV4cG9ydCBjb25zdCBERUZBVUxUX1pPT00gPSA1MDsKZXhwb3J0IGNvbnN0IERFRkFVTFRfTEFORV9IRUlHSFQgPSAxMjA7IC8vIEhlaWdodCBvZiBlYWNoIHRyYWNrIGxhbmUgaW4gcGl4ZWxzCmV4cG9ydCBjb25zdCBNSU5fTEFORV9IRUlHSFQgPSA2MDsgLy8gTWluaW11bSBjb21wYWN0ZWQgaGVpZ2h0CmV4cG9ydCBjb25zdCBTTkFQX1RIUkVTSE9MRF9QWCA9IDE1OyAvLyBEaXN0YW5jZSBpbiBwaXhlbHMgdG8gdHJpZ2dlciBzbmFwcGluZwovLyBJbnRlcmFjdGlvbiBDb25zdGFudHMKZXhwb3J0IGNvbnN0IExPTkdfUFJFU1NfRFVSQVRJT04gPSAzMDA7IC8vIG1zIHRvIGhvbGQgYmVmb3JlIGRyYWcgc3RhcnRzCmV4cG9ydCBjb25zdCBEUkFHX1RIUkVTSE9MRF9QWCA9IDE1OyAvLyBJbmNyZWFzZWQgdG8gMTVweCB0byBwcmV2ZW50IGFjY2lkZW50YWwgc2Nyb2xsIGRldGVjdGlvbiBkdXJpbmcgaG9sZAovLyBFeHRlbmRlZCBQYWxldHRlIGZvciBNdWx0aS1sYXllciB2aXN1YWxpemF0aW9uCmV4cG9ydCBjb25zdCBUUkFDS19DT0xPUlMgPSBbCiAgICAnIzIyZDNlZScsIC8vIEN5YW4tNDAwCiAgICAnIzgxOGNmOCcsIC8vIEluZGlnby00MDAKICAgICcjZTg3OWY5JywgLy8gRnVjaHNpYS00MDAKICAgICcjZjQ3MmI2JywgLy8gUGluay00MDAKICAgICcjZmI3MTg1JywgLy8gUm9zZS00MDAKICAgICcjMzRkMzk5JywgLy8gRW1lcmFsZC00MDAKICAgICcjZmJiZjI0JywgLy8gQW1iZXItNDAwCiAgICAnI2E3OGJmYScsIC8vIFZpb2xldC00MDAKICAgICcjMmRkNGJmJywgLy8gVGVhbC00MDAKICAgICcjNjBhNWZhJywgLy8gQmx1ZS00MDAKXTsKZXhwb3J0IGNvbnN0IEJFQVRfUEFUVEVSTlMgPSB7CiAgICAvLyAxNiBzdGVwcy4gMSA9IEtpY2ssIDIgPSBTbmFyZSwgMyA9IEhpSGF0CiAgICAnUm9jayc6IFtbMSwgMCwgMywgMCwgMiwgMCwgMywgMCwgMSwgMCwgMywgMSwgMiwgMCwgMywgMF1dLAogICAgJ0hpcEhvcCc6IFtbMSwgMCwgMywgMCwgMiwgMCwgMywgMSwgMCwgMSwgMywgMCwgMiwgMCwgMywgMF1dLAogICAgJ1RlY2hubyc6IFtbMSwgMywgMCwgMywgMSwgMywgMCwgMywgMSwgMywgMCwgMywgMSwgMywgMCwgM11dLAogICAgJ01ldHJvbm9tZSc6IFtbNCwgMCwgMCwgMCwgNSwgMCwgMCwgMCwgNSwgMCwgMCwgMCwgNSwgMCwgMCwgMF1dIC8vIDQ9SGlnaCBUaWNrLCA1PUxvdyBUaWNrCn07Cg==","@/services/audioUtils":"data:application/javascript;base64,aW1wb3J0IHsgREVGQVVMVF9TQU1QTEVfUkFURSwgQkVBVF9QQVRURVJOUyB9IGZyb20gJ0AvY29uc3RhbnRzJzsKbGV0IGF1ZGlvQ29udGV4dCA9IG51bGw7CmV4cG9ydCBjb25zdCBnZXRBdWRpb0NvbnRleHQgPSAoKSA9PiB7CiAgICBpZiAoIWF1ZGlvQ29udGV4dCkgewogICAgICAgIGNvbnN0IEN0eCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBBdHRlbXB0IHRvIHN1cHBvcnQgaGlnaCBzYW1wbGUgcmF0ZXMgdXAgdG8gMTkya0h6CiAgICAgICAgICAgIGF1ZGlvQ29udGV4dCA9IG5ldyBDdHgoewogICAgICAgICAgICAgICAgc2FtcGxlUmF0ZTogMTkyMDAwLAogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCIxOTJrSHogc2FtcGxlIHJhdGUgbm90IHN1cHBvcnRlZCwgZmFsbGluZyBiYWNrIHRvIHN5c3RlbSBkZWZhdWx0LiIpOwogICAgICAgICAgICBhdWRpb0NvbnRleHQgPSBuZXcgQ3R4KCk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIGF1ZGlvQ29udGV4dDsKfTsKZXhwb3J0IGNvbnN0IGRlY29kZUF1ZGlvRGF0YSA9IGFzeW5jIChhcnJheUJ1ZmZlcikgPT4gewogICAgY29uc3QgY3R4ID0gZ2V0QXVkaW9Db250ZXh0KCk7CiAgICByZXR1cm4gYXdhaXQgY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1ZmZlcik7Cn07CmV4cG9ydCBjb25zdCBjcmVhdGVFbXB0eUJ1ZmZlciA9IChjdHgsIHNlY29uZHMpID0+IHsKICAgIHJldHVybiBjdHguY3JlYXRlQnVmZmVyKDIsIGN0eC5zYW1wbGVSYXRlICogc2Vjb25kcywgY3R4LnNhbXBsZVJhdGUpOwp9OwovLyAtLS0gUGxheWJhY2sgVXRpbGl0eSBmb3IgUHJldmlld3MgLS0tCmxldCBjdXJyZW50UHJldmlld1NvdXJjZSA9IG51bGw7CmV4cG9ydCBjb25zdCBwbGF5QnVmZmVyID0gKGJ1ZmZlcikgPT4gewogICAgY29uc3QgY3R4ID0gZ2V0QXVkaW9Db250ZXh0KCk7CiAgICBpZiAoY3VycmVudFByZXZpZXdTb3VyY2UpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBjdXJyZW50UHJldmlld1NvdXJjZS5zdG9wKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7IH0KICAgIH0KICAgIGNvbnN0IHNvdXJjZSA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKICAgIHNvdXJjZS5idWZmZXIgPSBidWZmZXI7CiAgICBzb3VyY2UuY29ubmVjdChjdHguZGVzdGluYXRpb24pOwogICAgc291cmNlLnN0YXJ0KCk7CiAgICBjdXJyZW50UHJldmlld1NvdXJjZSA9IHNvdXJjZTsKfTsKLy8gLS0tIFRpbWUgU3RyZXRjaGluZyAoR3JhbnVsYXIgU3ludGhlc2lzKSAtLS0KLyoqCiAqIENoYW5nZXMgZHVyYXRpb24gV0lUSE9VVCBjaGFuZ2luZyBwaXRjaCB1c2luZyBhIHNpbXBsaWZpZWQgT0xBIChPdmVybGFwLUFkZCkgR3JhbnVsYXIgbWV0aG9kLgogKiBAcGFyYW0gYnVmZmVyIElucHV0IGJ1ZmZlcgogKiBAcGFyYW0gcGxheWJhY2tSYXRlIFRhcmdldCByYXRlICgwLjUgPSBoYWxmIHNwZWVkL2RvdWJsZSBkdXJhdGlvbiwgMi4wID0gZG91YmxlIHNwZWVkL2hhbGYgZHVyYXRpb24pCiAqLwpleHBvcnQgY29uc3QgZ3JhbnVsYXJUaW1lU3RyZXRjaCA9IGFzeW5jIChidWZmZXIsIHBsYXliYWNrUmF0ZSkgPT4gewogICAgLy8gSWYgcmF0ZSBpcyAxLCByZXR1cm4gY29weQogICAgaWYgKHBsYXliYWNrUmF0ZSA9PT0gMS4wKQogICAgICAgIHJldHVybiBidWZmZXI7CiAgICBjb25zdCBjaGFubmVscyA9IGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOwogICAgY29uc3QgaW5wdXRMZW4gPSBidWZmZXIubGVuZ3RoOwogICAgLy8gTmV3IGxlbmd0aCBpcyBpbnZlcnNlIG9mIHJhdGUuICgyeCBzcGVlZCA9IDAuNXggbGVuZ3RoKQogICAgY29uc3Qgb3V0cHV0TGVuID0gTWF0aC5mbG9vcihpbnB1dExlbiAvIHBsYXliYWNrUmF0ZSk7CiAgICBjb25zdCBzYW1wbGVSYXRlID0gYnVmZmVyLnNhbXBsZVJhdGU7CiAgICBjb25zdCBjdHggPSBuZXcgT2ZmbGluZUF1ZGlvQ29udGV4dChjaGFubmVscywgb3V0cHV0TGVuLCBzYW1wbGVSYXRlKTsKICAgIGNvbnN0IG91dHB1dEJ1ZmZlciA9IGN0eC5jcmVhdGVCdWZmZXIoY2hhbm5lbHMsIG91dHB1dExlbiwgc2FtcGxlUmF0ZSk7CiAgICAvLyBHcmFudWxhciBQYXJhbWV0ZXJzCiAgICBjb25zdCBncmFpblNpemUgPSBNYXRoLmZsb29yKHNhbXBsZVJhdGUgKiAwLjA4KTsgLy8gODBtcyBncmFpbnMKICAgIGNvbnN0IG92ZXJsYXAgPSBNYXRoLmZsb29yKGdyYWluU2l6ZSAqIDAuNSk7IC8vIDUwJSBvdmVybGFwCiAgICAvLyBXZSBtb3ZlIHRocm91Z2ggdGhlIElOUFVUIGF0ICdwbGF5YmFja1JhdGUnIHNwZWVkIHJlbGF0aXZlIHRvIG91dHB1dAogICAgLy8gQnV0IHdlIGNvcHkgJ2dyYWluU2l6ZScgY2h1bmtzIDE6MSB0byBwcmVzZXJ2ZSBwaXRjaC4KICAgIGZvciAobGV0IGMgPSAwOyBjIDwgY2hhbm5lbHM7IGMrKykgewogICAgICAgIGNvbnN0IGlucHV0RGF0YSA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YShjKTsKICAgICAgICBjb25zdCBvdXRwdXREYXRhID0gb3V0cHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKGMpOwogICAgICAgIGxldCBpbnB1dE9mZnNldCA9IDA7CiAgICAgICAgbGV0IG91dHB1dE9mZnNldCA9IDA7CiAgICAgICAgLy8gV2hpbGUgd2UgaGF2ZSByb29tIGluIG91dHB1dCBhbmQgaW5wdXQKICAgICAgICB3aGlsZSAob3V0cHV0T2Zmc2V0ICsgZ3JhaW5TaXplIDwgb3V0cHV0TGVuICYmIGlucHV0T2Zmc2V0ICsgZ3JhaW5TaXplIDwgaW5wdXRMZW4pIHsKICAgICAgICAgICAgLy8gMS4gRmFkZSBPdXQgLyBJbiBXaW5kb3dpbmcgKEhhbm5pbmctaXNoKQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyYWluU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dElkeCA9IE1hdGguZmxvb3IoaW5wdXRPZmZzZXQpICsgaTsKICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dElkeCA9IG91dHB1dE9mZnNldCArIGk7CiAgICAgICAgICAgICAgICBpZiAoaW5wdXRJZHggPj0gaW5wdXRMZW4gfHwgb3V0cHV0SWR4ID49IG91dHB1dExlbikKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBsaW5lYXIgY3Jvc3NmYWRlIHdpbmRvdyBmb3IgdGhlIG92ZXJsYXAgcmVnaW9uCiAgICAgICAgICAgICAgICAvLyBUbyBibGVuZCBzdHJpY3RseSwgd2UganVzdCBhZGQuIEEgcmVhbCBpbXBsZW1lbnRhdGlvbiB1c2VzIHByb3BlciB3aW5kb3cgZnVuY3Rpb25zLgogICAgICAgICAgICAgICAgLy8gSGVyZSB3ZSBzaW1wbHkgY29weSB0aGUgZ3JhaW4uIFRoZSBqaXR0ZXIgY29tZXMgZnJvbSB0aGUgcGhhc2UgZGlzY29udGludWl0eS4KICAgICAgICAgICAgICAgIC8vIFdlJ2xsIGRvIGEgc2ltcGxlIE9MQS4KICAgICAgICAgICAgICAgIGxldCBnYWluID0gMS4wOwogICAgICAgICAgICAgICAgaWYgKGkgPCBvdmVybGFwKSB7CiAgICAgICAgICAgICAgICAgICAgZ2FpbiA9IGkgLyBvdmVybGFwOyAvLyBGYWRlIEluCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChpID4gZ3JhaW5TaXplIC0gb3ZlcmxhcCkgewogICAgICAgICAgICAgICAgICAgIGdhaW4gPSAoZ3JhaW5TaXplIC0gaSkgLyBvdmVybGFwOyAvLyBGYWRlIE91dAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gQWRkIHRvIG91dHB1dCAoT0xBKQogICAgICAgICAgICAgICAgb3V0cHV0RGF0YVtvdXRwdXRJZHhdICs9IGlucHV0RGF0YVtpbnB1dElkeF0gKiBnYWluOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIE1vdmUgaGVhZHMKICAgICAgICAgICAgLy8gT3V0cHV0IG1vdmVzIGJ5IHRoZSBub24tb3ZlcmxhcHBlZCBhbW91bnQgKGhvcCBzaXplKQogICAgICAgICAgICBjb25zdCBvdXRwdXRIb3AgPSBncmFpblNpemUgLSBvdmVybGFwOwogICAgICAgICAgICBvdXRwdXRPZmZzZXQgKz0gb3V0cHV0SG9wOwogICAgICAgICAgICAvLyBJbnB1dCBtb3ZlcyBieSAoaG9wIHNpemUgKiByYXRlKSB0byBhY2hpZXZlIHRpbWUgc3RyZXRjaAogICAgICAgICAgICBpbnB1dE9mZnNldCArPSBvdXRwdXRIb3AgKiBwbGF5YmFja1JhdGU7CiAgICAgICAgfQogICAgfQogICAgLy8gTm9ybWFsaXplIG91dHB1dCB0byBwcmV2ZW50IGNsaXBwaW5nIGZyb20gT0xBCiAgICByZXR1cm4gbm9ybWFsaXplQnVmZmVyKG91dHB1dEJ1ZmZlcik7Cn07Ci8vIC0tLSBCUE0gRGV0ZWN0aW9uIC0tLQpleHBvcnQgY29uc3QgZGV0ZWN0QlBNID0gYXN5bmMgKGJ1ZmZlcikgPT4gewogICAgdHJ5IHsKICAgICAgICBsZXQgYW5hbHlzaXNCdWZmZXIgPSBidWZmZXI7CiAgICAgICAgaWYgKGJ1ZmZlci5kdXJhdGlvbiA+IDQwKSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5mbG9vcihidWZmZXIuZHVyYXRpb24gLyAyKSAtIDIwOwogICAgICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIDQwOwogICAgICAgICAgICBhbmFseXNpc0J1ZmZlciA9IHRyaW1CdWZmZXIoYnVmZmVyLCBzdGFydCwgZW5kKTsKICAgICAgICB9CiAgICAgICAgY29uc3Qgb2ZmbGluZUN0eCA9IG5ldyBPZmZsaW5lQXVkaW9Db250ZXh0KDEsIGFuYWx5c2lzQnVmZmVyLmxlbmd0aCwgYW5hbHlzaXNCdWZmZXIuc2FtcGxlUmF0ZSk7CiAgICAgICAgY29uc3Qgc291cmNlID0gb2ZmbGluZUN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKICAgICAgICBzb3VyY2UuYnVmZmVyID0gYW5hbHlzaXNCdWZmZXI7CiAgICAgICAgY29uc3QgbG93cGFzcyA9IG9mZmxpbmVDdHguY3JlYXRlQmlxdWFkRmlsdGVyKCk7CiAgICAgICAgbG93cGFzcy50eXBlID0gImxvd3Bhc3MiOwogICAgICAgIGxvd3Bhc3MuZnJlcXVlbmN5LnZhbHVlID0gNDAwOwogICAgICAgIGxvd3Bhc3MuUS52YWx1ZSA9IDE7CiAgICAgICAgY29uc3QgaGlnaHBhc3MgPSBvZmZsaW5lQ3R4LmNyZWF0ZUJpcXVhZEZpbHRlcigpOwogICAgICAgIGhpZ2hwYXNzLnR5cGUgPSAiaGlnaHBhc3MiOwogICAgICAgIGhpZ2hwYXNzLmZyZXF1ZW5jeS52YWx1ZSA9IDcwOwogICAgICAgIGhpZ2hwYXNzLlEudmFsdWUgPSAxOwogICAgICAgIHNvdXJjZS5jb25uZWN0KGxvd3Bhc3MpOwogICAgICAgIGxvd3Bhc3MuY29ubmVjdChoaWdocGFzcyk7CiAgICAgICAgaGlnaHBhc3MuY29ubmVjdChvZmZsaW5lQ3R4LmRlc3RpbmF0aW9uKTsKICAgICAgICBzb3VyY2Uuc3RhcnQoMCk7CiAgICAgICAgY29uc3QgcmVuZGVyZWQgPSBhd2FpdCBvZmZsaW5lQ3R4LnN0YXJ0UmVuZGVyaW5nKCk7CiAgICAgICAgY29uc3QgZGF0YSA9IHJlbmRlcmVkLmdldENoYW5uZWxEYXRhKDApOwogICAgICAgIGNvbnN0IHdpbmRvd1NpemUgPSBNYXRoLmZsb29yKGFuYWx5c2lzQnVmZmVyLnNhbXBsZVJhdGUgKiAwLjAwNSk7CiAgICAgICAgY29uc3QgZW5lcmd5UHJvZmlsZSA9IFtdOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gd2luZG93U2l6ZSkgewogICAgICAgICAgICBsZXQgc3VtID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB3aW5kb3dTaXplICYmIGkgKyBqIDwgZGF0YS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgc3VtICs9IGRhdGFbaSArIGpdICogZGF0YVtpICsgal07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW5lcmd5UHJvZmlsZS5wdXNoKE1hdGguc3FydChzdW0gLyB3aW5kb3dTaXplKSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IG9uc2V0UHJvZmlsZSA9IFtdOwogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZW5lcmd5UHJvZmlsZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjb25zdCBkaWZmID0gZW5lcmd5UHJvZmlsZVtpXSAtIGVuZXJneVByb2ZpbGVbaSAtIDFdOwogICAgICAgICAgICBvbnNldFByb2ZpbGUucHVzaChNYXRoLm1heChkaWZmLCAwKSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IG1pbkJQTSA9IDYwOwogICAgICAgIGNvbnN0IG1heEJQTSA9IDE4MDsKICAgICAgICBjb25zdCBtaW5MYWcgPSBNYXRoLmZsb29yKDYwIC8gKG1heEJQTSAqIDAuMDA1KSk7CiAgICAgICAgY29uc3QgbWF4TGFnID0gTWF0aC5jZWlsKDYwIC8gKG1pbkJQTSAqIDAuMDA1KSk7CiAgICAgICAgY29uc3QgY29ycmVsYXRpb25zID0gW107CiAgICAgICAgY29uc3Qgc2VhcmNoTGVuID0gTWF0aC5taW4ob25zZXRQcm9maWxlLmxlbmd0aCwgMzAwMCk7CiAgICAgICAgZm9yIChsZXQgbGFnID0gbWluTGFnOyBsYWcgPD0gbWF4TGFnOyBsYWcrKykgewogICAgICAgICAgICBsZXQgY3VycmVudENvcnJlbGF0aW9uID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWFyY2hMZW4gLSBsYWc7IGkrKykgewogICAgICAgICAgICAgICAgY3VycmVudENvcnJlbGF0aW9uICs9IG9uc2V0UHJvZmlsZVtpXSAqIG9uc2V0UHJvZmlsZVtpICsgbGFnXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb3JyZWxhdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgICBicG06IDYwIC8gKGxhZyAqIDAuMDA1KSwKICAgICAgICAgICAgICAgIHN0cmVuZ3RoOiBjdXJyZW50Q29ycmVsYXRpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNvcnJlbGF0aW9ucy5zb3J0KChhLCBiKSA9PiBiLnN0cmVuZ3RoIC0gYS5zdHJlbmd0aCk7CiAgICAgICAgaWYgKGNvcnJlbGF0aW9ucy5sZW5ndGggPT09IDApCiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIGNvbnN0IHRvcENhbmRpZGF0ZXMgPSBjb3JyZWxhdGlvbnMuc2xpY2UoMCwgNSk7CiAgICAgICAgbGV0IGNob3NlbkJQTSA9IHRvcENhbmRpZGF0ZXNbMF0uYnBtOwogICAgICAgIGNvbnN0IG1heFN0cmVuZ3RoID0gdG9wQ2FuZGlkYXRlc1swXS5zdHJlbmd0aDsKICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRvcENhbmRpZGF0ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gdG9wQ2FuZGlkYXRlc1tpXTsKICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5zdHJlbmd0aCA+IG1heFN0cmVuZ3RoICogMC43NSkgewogICAgICAgICAgICAgICAgY29uc3Qgd2lubmVySXNFeHRyZW1lID0gY2hvc2VuQlBNIDwgOTAgfHwgY2hvc2VuQlBNID4gMTYwOwogICAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlSXNOb3JtYWwgPSBjYW5kaWRhdGUuYnBtID49IDkwICYmIGNhbmRpZGF0ZS5icG0gPD0gMTYwOwogICAgICAgICAgICAgICAgaWYgKHdpbm5lcklzRXh0cmVtZSAmJiBjYW5kaWRhdGVJc05vcm1hbCkgewogICAgICAgICAgICAgICAgICAgIGNob3NlbkJQTSA9IGNhbmRpZGF0ZS5icG07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoY2FuZGlkYXRlLmJwbSAtIDIgKiBjaG9zZW5CUE0pIDwgNSkgewogICAgICAgICAgICAgICAgICAgIGNob3NlbkJQTSA9IGNhbmRpZGF0ZS5icG07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoY2hvc2VuQlBNKTsKICAgIH0KICAgIGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiQlBNIERldGVjdGlvbiBFcnJvciIsIGUpOwogICAgICAgIHJldHVybiAwOwogICAgfQp9OwovLyAtLS0gUHJldmlldyBHZW5lcmF0aW9uIC0tLQpleHBvcnQgY29uc3QgZ2VuZXJhdGVQcm9qZWN0UHJldmlldyA9ICh0cmFja3MsIHdpZHRoLCBoZWlnaHQpID0+IHsKICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICBpZiAoIWN0eCkKICAgICAgICByZXR1cm4gJyc7CiAgICBjdHguZmlsbFN0eWxlID0gJyMxODE4MWInOwogICAgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgaWYgKHRyYWNrcy5sZW5ndGggPT09IDApCiAgICAgICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoKTsKICAgIGNvbnN0IG1heER1ciA9IE1hdGgubWF4KC4uLnRyYWNrcy5tYXAodCA9PiB0LnN0YXJ0VGltZSArIHQuZHVyYXRpb24pKTsKICAgIGNvbnN0IHNjYWxlWCA9IHdpZHRoIC8gKG1heER1ciB8fCAxKTsKICAgIHRyYWNrcy5mb3JFYWNoKHRyYWNrID0+IHsKICAgICAgICBjb25zdCB4ID0gdHJhY2suc3RhcnRUaW1lICogc2NhbGVYOwogICAgICAgIGNvbnN0IHcgPSBNYXRoLm1heCgyLCB0cmFjay5kdXJhdGlvbiAqIHNjYWxlWCk7CiAgICAgICAgY29uc3QgbGFuZUggPSBoZWlnaHQgLyA1OwogICAgICAgIGNvbnN0IHkgPSAodHJhY2subGFuZSAlIDUpICogbGFuZUggKyAyOwogICAgICAgIGNvbnN0IGggPSBsYW5lSCAtIDQ7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRyYWNrLmNvbG9yOwogICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCB3LCBoKTsKICAgIH0pOwogICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpOwp9OwovLyAtLS0gT2ZmbGluZSBQcm9jZXNzaW5nIFV0aWxpdGllcyAtLS0KZXhwb3J0IGNvbnN0IGFwcGx5RmFkZSA9IGFzeW5jIChidWZmZXIsIHR5cGUsIGR1cmF0aW9uKSA9PiB7CiAgICBjb25zdCBjdHggPSBuZXcgT2ZmbGluZUF1ZGlvQ29udGV4dChidWZmZXIubnVtYmVyT2ZDaGFubmVscywgYnVmZmVyLmxlbmd0aCwgYnVmZmVyLnNhbXBsZVJhdGUpOwogICAgY29uc3Qgc291cmNlID0gY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOwogICAgc291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjsKICAgIGNvbnN0IGdhaW4gPSBjdHguY3JlYXRlR2FpbigpOwogICAgc291cmNlLmNvbm5lY3QoZ2Fpbik7CiAgICBnYWluLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTsKICAgIGNvbnN0IGZhZGVEdXIgPSBNYXRoLm1pbihkdXJhdGlvbiwgYnVmZmVyLmR1cmF0aW9uKTsKICAgIGlmICh0eXBlID09PSAnaW4nKSB7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIDApOwogICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgxLCBmYWRlRHVyKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLCBidWZmZXIuZHVyYXRpb24gLSBmYWRlRHVyKTsKICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgYnVmZmVyLmR1cmF0aW9uKTsKICAgIH0KICAgIHNvdXJjZS5zdGFydCgpOwogICAgcmV0dXJuIGF3YWl0IGN0eC5zdGFydFJlbmRlcmluZygpOwp9OwpleHBvcnQgY29uc3QgbWVyZ2VCdWZmZXJzID0gYXN5bmMgKGxlZnQsIHJpZ2h0LCBvdmVybGFwRHVyYXRpb24pID0+IHsKICAgIGNvbnN0IGNoYW5uZWxzID0gTWF0aC5tYXgobGVmdC5udW1iZXJPZkNoYW5uZWxzLCByaWdodC5udW1iZXJPZkNoYW5uZWxzKTsKICAgIGNvbnN0IHNhbXBsZVJhdGUgPSBsZWZ0LnNhbXBsZVJhdGU7CiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gbGVmdC5kdXJhdGlvbiArIHJpZ2h0LmR1cmF0aW9uIC0gb3ZlcmxhcER1cmF0aW9uOwogICAgY29uc3QgbGVuZ3RoID0gTWF0aC5jZWlsKHRvdGFsRHVyYXRpb24gKiBzYW1wbGVSYXRlKTsKICAgIGNvbnN0IGN0eCA9IG5ldyBPZmZsaW5lQXVkaW9Db250ZXh0KGNoYW5uZWxzLCBsZW5ndGgsIHNhbXBsZVJhdGUpOwogICAgY29uc3Qgc3JjTGVmdCA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKICAgIHNyY0xlZnQuYnVmZmVyID0gbGVmdDsKICAgIGNvbnN0IGdhaW5MZWZ0ID0gY3R4LmNyZWF0ZUdhaW4oKTsKICAgIHNyY0xlZnQuY29ubmVjdChnYWluTGVmdCk7CiAgICBnYWluTGVmdC5jb25uZWN0KGN0eC5kZXN0aW5hdGlvbik7CiAgICBjb25zdCBzcmNSaWdodCA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKICAgIHNyY1JpZ2h0LmJ1ZmZlciA9IHJpZ2h0OwogICAgY29uc3QgZ2FpblJpZ2h0ID0gY3R4LmNyZWF0ZUdhaW4oKTsKICAgIHNyY1JpZ2h0LmNvbm5lY3QoZ2FpblJpZ2h0KTsKICAgIGdhaW5SaWdodC5jb25uZWN0KGN0eC5kZXN0aW5hdGlvbik7CiAgICBjb25zdCBvdmVybGFwU3RhcnQgPSBsZWZ0LmR1cmF0aW9uIC0gb3ZlcmxhcER1cmF0aW9uOwogICAgZ2FpbkxlZnQuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLCBvdmVybGFwU3RhcnQpOwogICAgZ2FpbkxlZnQuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLCBsZWZ0LmR1cmF0aW9uKTsKICAgIGNvbnN0IHJpZ2h0U3RhcnRUaW1lID0gb3ZlcmxhcFN0YXJ0OwogICAgZ2FpblJpZ2h0LmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgcmlnaHRTdGFydFRpbWUpOwogICAgZ2FpblJpZ2h0LmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMSwgcmlnaHRTdGFydFRpbWUgKyBvdmVybGFwRHVyYXRpb24pOwogICAgc3JjTGVmdC5zdGFydCgwKTsKICAgIHNyY1JpZ2h0LnN0YXJ0KHJpZ2h0U3RhcnRUaW1lKTsKICAgIHJldHVybiBhd2FpdCBjdHguc3RhcnRSZW5kZXJpbmcoKTsKfTsKZXhwb3J0IGNvbnN0IGNoYW5nZVNwZWVkID0gYXN5bmMgKGJ1ZmZlciwgcGxheWJhY2tSYXRlLCBwcmVzZXJ2ZVBpdGNoID0gZmFsc2UpID0+IHsKICAgIGlmIChwcmVzZXJ2ZVBpdGNoKSB7CiAgICAgICAgLy8gVXNlIEdyYW51bGFyIFRpbWUgU3RyZXRjaAogICAgICAgIHJldHVybiBhd2FpdCBncmFudWxhclRpbWVTdHJldGNoKGJ1ZmZlciwgcGxheWJhY2tSYXRlKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIC8vIFN0YW5kYXJkIFJlc2FtcGxpbmcgKENoYW5nZXMgUGl0Y2gpCiAgICAgICAgY29uc3QgbmV3RHVyYXRpb24gPSBidWZmZXIuZHVyYXRpb24gLyBwbGF5YmFja1JhdGU7CiAgICAgICAgY29uc3QgY3R4ID0gbmV3IE9mZmxpbmVBdWRpb0NvbnRleHQoYnVmZmVyLm51bWJlck9mQ2hhbm5lbHMsIE1hdGguY2VpbChuZXdEdXJhdGlvbiAqIGJ1ZmZlci5zYW1wbGVSYXRlKSwgYnVmZmVyLnNhbXBsZVJhdGUpOwogICAgICAgIGNvbnN0IHNvdXJjZSA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKICAgICAgICBzb3VyY2UuYnVmZmVyID0gYnVmZmVyOwogICAgICAgIHNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWUgPSBwbGF5YmFja1JhdGU7CiAgICAgICAgc291cmNlLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTsKICAgICAgICBzb3VyY2Uuc3RhcnQoKTsKICAgICAgICByZXR1cm4gYXdhaXQgY3R4LnN0YXJ0UmVuZGVyaW5nKCk7CiAgICB9Cn07CmV4cG9ydCBjb25zdCByZXZlcnNlQnVmZmVyID0gKGJ1ZmZlcikgPT4gewogICAgY29uc3QgY3R4ID0gZ2V0QXVkaW9Db250ZXh0KCk7CiAgICBjb25zdCBuZXdCdWZmZXIgPSBjdHguY3JlYXRlQnVmZmVyKGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzLCBidWZmZXIubGVuZ3RoLCBidWZmZXIuc2FtcGxlUmF0ZSk7CiAgICBmb3IgKGxldCBjID0gMDsgYyA8IGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOyBjKyspIHsKICAgICAgICBjb25zdCBvbGREYXRhID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKGMpOwogICAgICAgIGNvbnN0IG5ld0RhdGEgPSBuZXdCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoYyk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIG5ld0RhdGFbaV0gPSBvbGREYXRhW2J1ZmZlci5sZW5ndGggLSAxIC0gaV07CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ld0J1ZmZlcjsKfTsKZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZUJ1ZmZlciA9IChidWZmZXIpID0+IHsKICAgIGxldCBtYXggPSAwOwogICAgZm9yIChsZXQgYyA9IDA7IGMgPCBidWZmZXIubnVtYmVyT2ZDaGFubmVsczsgYysrKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YShjKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRhdGFbaV0pID4gbWF4KQogICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5hYnMoZGF0YVtpXSk7CiAgICAgICAgfQogICAgfQogICAgaWYgKG1heCA9PT0gMCkKICAgICAgICByZXR1cm4gYnVmZmVyOwogICAgY29uc3QgYW1wID0gMC45OCAvIG1heDsKICAgIGNvbnN0IGN0eCA9IGdldEF1ZGlvQ29udGV4dCgpOwogICAgY29uc3QgbmV3QnVmZmVyID0gY3R4LmNyZWF0ZUJ1ZmZlcihidWZmZXIubnVtYmVyT2ZDaGFubmVscywgYnVmZmVyLmxlbmd0aCwgYnVmZmVyLnNhbXBsZVJhdGUpOwogICAgZm9yIChsZXQgYyA9IDA7IGMgPCBidWZmZXIubnVtYmVyT2ZDaGFubmVsczsgYysrKSB7CiAgICAgICAgY29uc3Qgb2xkRGF0YSA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YShjKTsKICAgICAgICBjb25zdCBuZXdEYXRhID0gbmV3QnVmZmVyLmdldENoYW5uZWxEYXRhKGMpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3RGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBuZXdEYXRhW2ldID0gb2xkRGF0YVtpXSAqIGFtcDsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3QnVmZmVyOwp9OwpleHBvcnQgY29uc3QgcmVzYW1wbGVCdWZmZXIgPSBhc3luYyAoYnVmZmVyLCB0YXJnZXRSYXRlKSA9PiB7CiAgICBpZiAoYnVmZmVyLnNhbXBsZVJhdGUgPT09IHRhcmdldFJhdGUpCiAgICAgICAgcmV0dXJuIGJ1ZmZlcjsKICAgIGNvbnN0IGN0eCA9IG5ldyBPZmZsaW5lQXVkaW9Db250ZXh0KGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzLCBidWZmZXIuZHVyYXRpb24gKiB0YXJnZXRSYXRlLCB0YXJnZXRSYXRlKTsKICAgIGNvbnN0IHNvdXJjZSA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKICAgIHNvdXJjZS5idWZmZXIgPSBidWZmZXI7CiAgICBzb3VyY2UuY29ubmVjdChjdHguZGVzdGluYXRpb24pOwogICAgc291cmNlLnN0YXJ0KCk7CiAgICByZXR1cm4gYXdhaXQgY3R4LnN0YXJ0UmVuZGVyaW5nKCk7Cn07CmV4cG9ydCBjb25zdCBhcHBseUVRID0gYXN5bmMgKGJ1ZmZlciwgcHJlc2V0KSA9PiB7CiAgICBjb25zdCBjdHggPSBuZXcgT2ZmbGluZUF1ZGlvQ29udGV4dChidWZmZXIubnVtYmVyT2ZDaGFubmVscywgYnVmZmVyLmxlbmd0aCwgYnVmZmVyLnNhbXBsZVJhdGUpOwogICAgY29uc3Qgc291cmNlID0gY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOwogICAgc291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjsKICAgIGNvbnN0IGZpbHRlcnMgPSBbXTsKICAgIGNvbnN0IGNyZWF0ZUZpbHRlciA9ICh0eXBlLCBmcmVxLCBnYWluID0gMCwgUSA9IDEpID0+IHsKICAgICAgICBjb25zdCBmID0gY3R4LmNyZWF0ZUJpcXVhZEZpbHRlcigpOwogICAgICAgIGYudHlwZSA9IHR5cGU7CiAgICAgICAgZi5mcmVxdWVuY3kudmFsdWUgPSBmcmVxOwogICAgICAgIGYuZ2Fpbi52YWx1ZSA9IGdhaW47CiAgICAgICAgZi5RLnZhbHVlID0gUTsKICAgICAgICByZXR1cm4gZjsKICAgIH07CiAgICBzd2l0Y2ggKHByZXNldCkgewogICAgICAgIGNhc2UgJ1RlbGVwaG9uZSc6CiAgICAgICAgICAgIGZpbHRlcnMucHVzaChjcmVhdGVGaWx0ZXIoJ2hpZ2hwYXNzJywgNDAwKSk7CiAgICAgICAgICAgIGZpbHRlcnMucHVzaChjcmVhdGVGaWx0ZXIoJ2xvd3Bhc3MnLCAzMDAwKSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Jhc3MgQm9vc3QnOgogICAgICAgICAgICBmaWx0ZXJzLnB1c2goY3JlYXRlRmlsdGVyKCdsb3dzaGVsZicsIDEwMCwgOCkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdUcmVibGUgQm9vc3QnOgogICAgICAgICAgICBmaWx0ZXJzLnB1c2goY3JlYXRlRmlsdGVyKCdoaWdoc2hlbGYnLCAzMDAwLCA4KSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Jhc3MgQ3V0JzoKICAgICAgICAgICAgZmlsdGVycy5wdXNoKGNyZWF0ZUZpbHRlcignbG93c2hlbGYnLCAxMDAsIC0xMikpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdUcmVibGUgQ3V0JzoKICAgICAgICAgICAgZmlsdGVycy5wdXNoKGNyZWF0ZUZpbHRlcignaGlnaHNoZWxmJywgMzAwMCwgLTEyKSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ01pZCBCb29zdCc6CiAgICAgICAgICAgIGZpbHRlcnMucHVzaChjcmVhdGVGaWx0ZXIoJ3BlYWtpbmcnLCAxMDAwLCA2LCAxKSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ1YtU2hhcGUnOgogICAgICAgICAgICBmaWx0ZXJzLnB1c2goY3JlYXRlRmlsdGVyKCdsb3dzaGVsZicsIDEwMCwgNCkpOwogICAgICAgICAgICBmaWx0ZXJzLnB1c2goY3JlYXRlRmlsdGVyKCdwZWFraW5nJywgMTAwMCwgLTYsIDEpKTsKICAgICAgICAgICAgZmlsdGVycy5wdXNoKGNyZWF0ZUZpbHRlcignaGlnaHNoZWxmJywgMzAwMCwgNCkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdMby1GaSBSYWRpbyc6CiAgICAgICAgICAgIGZpbHRlcnMucHVzaChjcmVhdGVGaWx0ZXIoJ2hpZ2hwYXNzJywgMjAwKSk7CiAgICAgICAgICAgIGZpbHRlcnMucHVzaChjcmVhdGVGaWx0ZXIoJ2xvd3Bhc3MnLCAyMDAwKSk7CiAgICAgICAgICAgIGZpbHRlcnMucHVzaChjcmVhdGVGaWx0ZXIoJ3BlYWtpbmcnLCAxMDAwLCAxMCwgMikpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gYnVmZmVyOwogICAgfQogICAgbGV0IGN1cnJlbnROb2RlID0gc291cmNlOwogICAgZmlsdGVycy5mb3JFYWNoKGYgPT4gewogICAgICAgIGN1cnJlbnROb2RlLmNvbm5lY3QoZik7CiAgICAgICAgY3VycmVudE5vZGUgPSBmOwogICAgfSk7CiAgICBjdXJyZW50Tm9kZS5jb25uZWN0KGN0eC5kZXN0aW5hdGlvbik7CiAgICBzb3VyY2Uuc3RhcnQoKTsKICAgIHJldHVybiBhd2FpdCBjdHguc3RhcnRSZW5kZXJpbmcoKTsKfTsKZXhwb3J0IGNvbnN0IHJlbW92ZVZvY2FscyA9IGFzeW5jIChidWZmZXIpID0+IHsKICAgIGNvbnN0IGNoYW5uZWxzID0gYnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7CiAgICBpZiAoY2hhbm5lbHMgPCAyKQogICAgICAgIHJldHVybiBidWZmZXI7CiAgICBjb25zdCBjdHggPSBnZXRBdWRpb0NvbnRleHQoKTsKICAgIGNvbnN0IG5ld0J1ZmZlciA9IGN0eC5jcmVhdGVCdWZmZXIoMiwgYnVmZmVyLmxlbmd0aCwgYnVmZmVyLnNhbXBsZVJhdGUpOwogICAgY29uc3QgbGVmdCA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTsKICAgIGNvbnN0IHJpZ2h0ID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKDEpOwogICAgY29uc3QgbmV3TGVmdCA9IG5ld0J1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTsKICAgIGNvbnN0IG5ld1JpZ2h0ID0gbmV3QnVmZmVyLmdldENoYW5uZWxEYXRhKDEpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDZW50ZXIgY2FuY2VsbGF0aW9uOiBMIC0gUgogICAgICAgIGNvbnN0IHNhbXBsZSA9IChsZWZ0W2ldIC0gcmlnaHRbaV0pOwogICAgICAgIG5ld0xlZnRbaV0gPSBzYW1wbGU7CiAgICAgICAgbmV3UmlnaHRbaV0gPSBzYW1wbGU7CiAgICB9CiAgICByZXR1cm4gbmV3QnVmZmVyOwp9OwpleHBvcnQgY29uc3QgaXNvbGF0ZVZvY2FscyA9IGFzeW5jIChidWZmZXIpID0+IHsKICAgIGNvbnN0IGNoYW5uZWxzID0gYnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7CiAgICBpZiAoY2hhbm5lbHMgPCAyKQogICAgICAgIHJldHVybiBidWZmZXI7CiAgICBjb25zdCBjdHggPSBnZXRBdWRpb0NvbnRleHQoKTsKICAgIGNvbnN0IG5ld0J1ZmZlciA9IGN0eC5jcmVhdGVCdWZmZXIoMiwgYnVmZmVyLmxlbmd0aCwgYnVmZmVyLnNhbXBsZVJhdGUpOwogICAgY29uc3QgbGVmdCA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTsKICAgIGNvbnN0IHJpZ2h0ID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKDEpOwogICAgY29uc3QgbmV3TGVmdCA9IG5ld0J1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTsKICAgIGNvbnN0IG5ld1JpZ2h0ID0gbmV3QnVmZmVyLmdldENoYW5uZWxEYXRhKDEpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDZW50ZXIgaXNvbGF0aW9uIChhcHByb3hpbWF0aW9uKTogKEwgKyBSKSAvIDIKICAgICAgICBjb25zdCBzYW1wbGUgPSAobGVmdFtpXSArIHJpZ2h0W2ldKSAvIDI7CiAgICAgICAgbmV3TGVmdFtpXSA9IHNhbXBsZTsKICAgICAgICBuZXdSaWdodFtpXSA9IHNhbXBsZTsKICAgIH0KICAgIHJldHVybiBuZXdCdWZmZXI7Cn07Ci8vIC0tLSBDb3JlIEVkaXRpbmcgLS0tCmV4cG9ydCBjb25zdCB0cmltQnVmZmVyID0gKGJ1ZmZlciwgc3RhcnQsIGVuZCkgPT4gewogICAgY29uc3QgY3R4ID0gZ2V0QXVkaW9Db250ZXh0KCk7CiAgICBjb25zdCByYXRlID0gYnVmZmVyLnNhbXBsZVJhdGU7CiAgICBjb25zdCBzdGFydE9mZnNldCA9IE1hdGguZmxvb3Ioc3RhcnQgKiByYXRlKTsKICAgIGNvbnN0IGVuZE9mZnNldCA9IE1hdGguZmxvb3IoZW5kICogcmF0ZSk7CiAgICBjb25zdCBmcmFtZUNvdW50ID0gZW5kT2Zmc2V0IC0gc3RhcnRPZmZzZXQ7CiAgICBpZiAoZnJhbWVDb3VudCA8PSAwKQogICAgICAgIHJldHVybiBjdHguY3JlYXRlQnVmZmVyKGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzLCAxLCByYXRlKTsKICAgIGNvbnN0IG5ld0J1ZmZlciA9IGN0eC5jcmVhdGVCdWZmZXIoYnVmZmVyLm51bWJlck9mQ2hhbm5lbHMsIGZyYW1lQ291bnQsIHJhdGUpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIubnVtYmVyT2ZDaGFubmVsczsgaSsrKSB7CiAgICAgICAgY29uc3QgY2hhbkRhdGEgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoaSk7CiAgICAgICAgY29uc3QgbmV3Q2hhbkRhdGEgPSBuZXdCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoaSk7CiAgICAgICAgaWYgKHN0YXJ0T2Zmc2V0ID49IDAgJiYgc3RhcnRPZmZzZXQgPCBjaGFuRGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgY29uc3Qgc2VnbWVudCA9IGNoYW5EYXRhLnNsaWNlKHN0YXJ0T2Zmc2V0LCBzdGFydE9mZnNldCArIGZyYW1lQ291bnQpOwogICAgICAgICAgICBuZXdDaGFuRGF0YS5zZXQoc2VnbWVudCk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ld0J1ZmZlcjsKfTsKZXhwb3J0IGNvbnN0IHNwbGl0QnVmZmVyID0gKGJ1ZmZlciwgc3BsaXRUaW1lKSA9PiB7CiAgICBpZiAoc3BsaXRUaW1lIDw9IDAgfHwgc3BsaXRUaW1lID49IGJ1ZmZlci5kdXJhdGlvbikKICAgICAgICByZXR1cm4gbnVsbDsKICAgIGNvbnN0IHBhcnQxID0gdHJpbUJ1ZmZlcihidWZmZXIsIDAsIHNwbGl0VGltZSk7CiAgICBjb25zdCBwYXJ0MiA9IHRyaW1CdWZmZXIoYnVmZmVyLCBzcGxpdFRpbWUsIGJ1ZmZlci5kdXJhdGlvbik7CiAgICByZXR1cm4gW3BhcnQxLCBwYXJ0Ml07Cn07Ci8vIC0tLSBHZW5lcmF0aW9uIC0tLQpleHBvcnQgY29uc3QgZ2VuZXJhdGVEcnVtQmVhdCA9IGFzeW5jIChzdHlsZSwgYnBtLCBiYXJzKSA9PiB7CiAgICBjb25zdCBzciA9IERFRkFVTFRfU0FNUExFX1JBVEU7CiAgICBjb25zdCBiZWF0cyA9IEJFQVRfUEFUVEVSTlNbc3R5bGVdIHx8IEJFQVRfUEFUVEVSTlNbJ01ldHJvbm9tZSddOwogICAgY29uc3QgYmVhdExlbiA9IDYwIC8gYnBtOwogICAgY29uc3Qgc3RlcExlbiA9IGJlYXRMZW4gLyA0OwogICAgY29uc3QgdG90YWxEdXJhdGlvbiA9IGJhcnMgKiA0ICogYmVhdExlbjsKICAgIGNvbnN0IGN0eCA9IG5ldyBPZmZsaW5lQXVkaW9Db250ZXh0KDIsIE1hdGguY2VpbCh0b3RhbER1cmF0aW9uICogc3IpLCBzcik7CiAgICBjb25zdCBwYXR0ZXJuID0gYmVhdHNbMF07CiAgICBjb25zdCBjcmVhdGVTb3VuZCA9ICh0eXBlLCB0aW1lKSA9PiB7CiAgICAgICAgY29uc3Qgb3NjID0gY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICBjb25zdCBnYWluID0gY3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICBvc2MuY29ubmVjdChnYWluKTsKICAgICAgICBnYWluLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTsKICAgICAgICBpZiAodHlwZSA9PT0gMSkgeyAvLyBLaWNrCiAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoMTUwLCB0aW1lKTsKICAgICAgICAgICAgb3NjLmZyZXF1ZW5jeS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDEsIHRpbWUgKyAwLjUpOwogICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMSwgdGltZSk7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDEsIHRpbWUgKyAwLjUpOwogICAgICAgICAgICBvc2Muc3RhcnQodGltZSk7CiAgICAgICAgICAgIG9zYy5zdG9wKHRpbWUgKyAwLjUpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICh0eXBlID09PSAyKSB7IC8vIFNuYXJlCiAgICAgICAgICAgIG9zYy50eXBlID0gJ3RyaWFuZ2xlJzsKICAgICAgICAgICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSgxMDAsIHRpbWUpOwogICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC44LCB0aW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMSwgdGltZSArIDAuMik7CiAgICAgICAgICAgIG9zYy5zdGFydCh0aW1lKTsKICAgICAgICAgICAgb3NjLnN0b3AodGltZSArIDAuMik7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IDMpIHsgLy8gSGlIYXQKICAgICAgICAgICAgb3NjLnR5cGUgPSAnc3F1YXJlJzsKICAgICAgICAgICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSg4MDAsIHRpbWUpOwogICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBjdHguY3JlYXRlQmlxdWFkRmlsdGVyKCk7CiAgICAgICAgICAgIGZpbHRlci50eXBlID0gJ2hpZ2hwYXNzJzsKICAgICAgICAgICAgZmlsdGVyLmZyZXF1ZW5jeS52YWx1ZSA9IDUwMDA7CiAgICAgICAgICAgIG9zYy5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgIG9zYy5jb25uZWN0KGZpbHRlcik7CiAgICAgICAgICAgIGZpbHRlci5jb25uZWN0KGdhaW4pOwogICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4zLCB0aW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMSwgdGltZSArIDAuMDUpOwogICAgICAgICAgICBvc2Muc3RhcnQodGltZSk7CiAgICAgICAgICAgIG9zYy5zdG9wKHRpbWUgKyAwLjA1KTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gNCkgeyAvLyBNZXRybyBIaWdoCiAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kudmFsdWUgPSAxMjAwOwogICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC41LCB0aW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMSwgdGltZSArIDAuMSk7CiAgICAgICAgICAgIG9zYy5zdGFydCh0aW1lKTsKICAgICAgICAgICAgb3NjLnN0b3AodGltZSArIDAuMSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IDUpIHsgLy8gTWV0cm8gTG93CiAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kudmFsdWUgPSA4MDA7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLjUsIHRpbWUpOwogICAgICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAxLCB0aW1lICsgMC4xKTsKICAgICAgICAgICAgb3NjLnN0YXJ0KHRpbWUpOwogICAgICAgICAgICBvc2Muc3RvcCh0aW1lICsgMC4xKTsKICAgICAgICB9CiAgICB9OwogICAgZm9yIChsZXQgYiA9IDA7IGIgPCBiYXJzOyBiKyspIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHsKICAgICAgICAgICAgY29uc3Qgc291bmRUeXBlID0gcGF0dGVybltpXTsKICAgICAgICAgICAgaWYgKHNvdW5kVHlwZSA+IDApIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSAoYiAqIDE2ICsgaSkgKiBzdGVwTGVuOwogICAgICAgICAgICAgICAgY3JlYXRlU291bmQoc291bmRUeXBlLCB0aW1lKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBhd2FpdCBjdHguc3RhcnRSZW5kZXJpbmcoKTsKfTsKLy8gLS0tIFN5bnRoIEdlbmVyYXRpb24gKFZpcnR1YWwgQW5hbG9nKSAtLS0KY29uc3QgTk9URVMgPSB7CiAgICAnQyc6IDAsICdDIyc6IDEsICdEJzogMiwgJ0QjJzogMywgJ0UnOiA0LCAnRic6IDUsCiAgICAnRiMnOiA2LCAnRyc6IDcsICdHIyc6IDgsICdBJzogOSwgJ0EjJzogMTAsICdCJzogMTEKfTsKY29uc3QgZ2V0U2NhbGVOb3RlcyA9IChyb290LCBvY3RhdmUsIHNjYWxlKSA9PiB7CiAgICBjb25zdCByb290SW5kZXggPSBOT1RFU1tyb290LnRvVXBwZXJDYXNlKCldOwogICAgY29uc3Qgcm9vdEZyZXFCYXNlID0gMjYxLjYzOyAvLyBDNAogICAgLy8gSW50ZXJ2YWxzCiAgICBjb25zdCBtYWpvciA9IFswLCAyLCA0LCA1LCA3LCA5LCAxMSwgMTJdOwogICAgY29uc3QgbWlub3IgPSBbMCwgMiwgMywgNSwgNywgOCwgMTAsIDEyXTsKICAgIGNvbnN0IGludGVydmFscyA9IHNjYWxlID09PSAnTWFqb3InID8gbWFqb3IgOiBtaW5vcjsKICAgIC8vIEZvcm11bGE6IGZyZXEgPSBDNCAqIDJeKChzZW1pdG9uZXNfZnJvbV9DNCkvMTIpCiAgICAvLyBTZW1pdG9uZXMgZnJvbSBDNCA9IChPY3RhdmUgLSA0KSoxMiArIChOb3RlSW5kZXggLSBDX0luZGV4KQogICAgcmV0dXJuIGludGVydmFscy5tYXAoc2VtaXRvbmUgPT4gewogICAgICAgIGNvbnN0IHRvdGFsU2VtaXRvbmVzID0gKG9jdGF2ZSAtIDQpICogMTIgKyByb290SW5kZXggKyBzZW1pdG9uZTsKICAgICAgICByZXR1cm4gcm9vdEZyZXFCYXNlICogTWF0aC5wb3coMiwgdG90YWxTZW1pdG9uZXMgLyAxMik7CiAgICB9KTsKfTsKZXhwb3J0IGNvbnN0IGdlbmVyYXRlU3ludGhTZXF1ZW5jZSA9IGFzeW5jIChwcmVzZXQsIHBhdHRlcm5UeXBlLCByb290LCBzY2FsZSwgYnBtLCBiYXJzKSA9PiB7CiAgICBjb25zdCBzciA9IERFRkFVTFRfU0FNUExFX1JBVEU7CiAgICBjb25zdCBiZWF0TGVuID0gNjAgLyBicG07CiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gYmFycyAqIDQgKiBiZWF0TGVuOwogICAgLy8gMiBDaGFubmVscyBmb3Igc3RlcmVvIHdpZHRoIGVmZmVjdHMKICAgIGNvbnN0IGN0eCA9IG5ldyBPZmZsaW5lQXVkaW9Db250ZXh0KDIsIE1hdGguY2VpbCh0b3RhbER1cmF0aW9uICogc3IpLCBzcik7CiAgICBjb25zdCBub3RlcyA9IGdldFNjYWxlTm90ZXMocm9vdCwgcGF0dGVyblR5cGUgPT09ICdCYXNzbGluZScgPyAyIDogNCwgc2NhbGUpOwogICAgY29uc3QgcGxheU5vdGUgPSAoZnJlcSwgdGltZSwgZHVyYXRpb24pID0+IHsKICAgICAgICBjb25zdCBvc2MgPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSBjdHguY3JlYXRlR2FpbigpOwogICAgICAgIGNvbnN0IGZpbHRlciA9IGN0eC5jcmVhdGVCaXF1YWRGaWx0ZXIoKTsKICAgICAgICBvc2MuY29ubmVjdChmaWx0ZXIpOwogICAgICAgIGZpbHRlci5jb25uZWN0KGdhaW4pOwogICAgICAgIGdhaW4uY29ubmVjdChjdHguZGVzdGluYXRpb24pOwogICAgICAgIC8vIFN5bnRoIFBhdGNoIExvZ2ljCiAgICAgICAgaWYgKHByZXNldCA9PT0gJ0FuYWxvZyBCYXNzJykgewogICAgICAgICAgICBvc2MudHlwZSA9ICdzYXd0b290aCc7CiAgICAgICAgICAgIGZpbHRlci50eXBlID0gJ2xvd3Bhc3MnOwogICAgICAgICAgICBmaWx0ZXIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDIwMCwgdGltZSk7CiAgICAgICAgICAgIGZpbHRlci5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgxNTAwLCB0aW1lICsgMC4wNSk7CiAgICAgICAgICAgIGZpbHRlci5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgxMDAsIHRpbWUgKyBkdXJhdGlvbik7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLCB0aW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAuOCwgdGltZSArIDAuMDIpOwogICAgICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAxLCB0aW1lICsgZHVyYXRpb24pOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwcmVzZXQgPT09ICdDaGlwdHVuZSBMZWFkJykgewogICAgICAgICAgICBvc2MudHlwZSA9ICdzcXVhcmUnOwogICAgICAgICAgICBmaWx0ZXIudHlwZSA9ICdsb3dwYXNzJzsKICAgICAgICAgICAgZmlsdGVyLmZyZXF1ZW5jeS52YWx1ZSA9IDEyMDAwOwogICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgdGltZSk7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLjUsIHRpbWUgKyAwLjAxKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAuNSwgdGltZSArIGR1cmF0aW9uIC0gMC4wNSk7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLCB0aW1lICsgZHVyYXRpb24pOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwcmVzZXQgPT09ICdEcmVhbXkgUGFkJykgewogICAgICAgICAgICBvc2MudHlwZSA9ICd0cmlhbmdsZSc7CiAgICAgICAgICAgIGZpbHRlci50eXBlID0gJ2xvd3Bhc3MnOwogICAgICAgICAgICBmaWx0ZXIuZnJlcXVlbmN5LnZhbHVlID0gMjAwMDsKICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIHRpbWUpOwogICAgICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMC40LCB0aW1lICsgZHVyYXRpb24gLyAyKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIHRpbWUgKyBkdXJhdGlvbik7CiAgICAgICAgICAgIC8vIEFkZCBhIGRldHVuZWQgb3NjaWxsYXRvciBmb3IgY2hvcnVzIGVmZmVjdAogICAgICAgICAgICBjb25zdCBvc2MyID0gY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgb3NjMi50eXBlID0gJ3RyaWFuZ2xlJzsKICAgICAgICAgICAgb3NjMi5mcmVxdWVuY3kudmFsdWUgPSBmcmVxICogMS4wMTsgLy8gRGV0dW5lCiAgICAgICAgICAgIG9zYzIuY29ubmVjdChmaWx0ZXIpOwogICAgICAgICAgICBvc2MyLnN0YXJ0KHRpbWUpOwogICAgICAgICAgICBvc2MyLnN0b3AodGltZSArIGR1cmF0aW9uKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAocHJlc2V0ID09PSAnUGx1Y2snKSB7CiAgICAgICAgICAgIG9zYy50eXBlID0gJ3RyaWFuZ2xlJzsKICAgICAgICAgICAgZmlsdGVyLnR5cGUgPSAnbG93cGFzcyc7CiAgICAgICAgICAgIGZpbHRlci5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoMzAwMCwgdGltZSk7CiAgICAgICAgICAgIGZpbHRlci5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgyMDAsIHRpbWUgKyAwLjMpOwogICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgdGltZSk7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLjgsIHRpbWUgKyAwLjAxKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMDEsIHRpbWUgKyAwLjUpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwcmVzZXQgPT09ICdFbGVjdHJpYyBQaWFubycpIHsKICAgICAgICAgICAgb3NjLnR5cGUgPSAndHJpYW5nbGUnOwogICAgICAgICAgICBmaWx0ZXIudHlwZSA9ICdsb3dwYXNzJzsKICAgICAgICAgICAgZmlsdGVyLmZyZXF1ZW5jeS52YWx1ZSA9IDMwMDA7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLCB0aW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAuNywgdGltZSArIDAuMDIpOwogICAgICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAxLCB0aW1lICsgZHVyYXRpb24gKiAxLjUpOyAvLyBMb25nIGRlY2F5CiAgICAgICAgICAgIC8vIEZNIE1vZHVsYXRpb24gZm9yIG1ldGFsbGljIHRvbmUKICAgICAgICAgICAgY29uc3QgbW9kT3NjID0gY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgbW9kT3NjLnR5cGUgPSAnc2luZSc7CiAgICAgICAgICAgIG1vZE9zYy5mcmVxdWVuY3kudmFsdWUgPSBmcmVxICogMjsKICAgICAgICAgICAgY29uc3QgbW9kR2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgIG1vZEdhaW4uZ2Fpbi52YWx1ZSA9IDUwMDsgLy8gTW9kdWxhdGlvbiBkZXB0aAogICAgICAgICAgICBtb2RPc2MuY29ubmVjdChtb2RHYWluKTsKICAgICAgICAgICAgbW9kR2Fpbi5jb25uZWN0KG9zYy5mcmVxdWVuY3kpOwogICAgICAgICAgICBtb2RPc2Muc3RhcnQodGltZSk7CiAgICAgICAgICAgIG1vZE9zYy5zdG9wKHRpbWUgKyBkdXJhdGlvbik7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHByZXNldCA9PT0gJ1NhdyBMZWFkJykgewogICAgICAgICAgICBvc2MudHlwZSA9ICdzYXd0b290aCc7CiAgICAgICAgICAgIGZpbHRlci50eXBlID0gJ2xvd3Bhc3MnOwogICAgICAgICAgICBmaWx0ZXIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDgwMCwgdGltZSk7CiAgICAgICAgICAgIGZpbHRlci5mcmVxdWVuY3kubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoNDAwMCwgdGltZSArIDAuMSk7IC8vIFdhaCBlZmZlY3QKICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIHRpbWUpOwogICAgICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMC41LCB0aW1lICsgMC4wNSk7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLCB0aW1lICsgZHVyYXRpb24pOwogICAgICAgICAgICBjb25zdCBvc2MyID0gY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgb3NjMi50eXBlID0gJ3Nhd3Rvb3RoJzsKICAgICAgICAgICAgb3NjMi5mcmVxdWVuY3kudmFsdWUgPSBmcmVxICogMS4wMDU7IC8vIFNsaWdodCBkZXR1bmUKICAgICAgICAgICAgb3NjMi5jb25uZWN0KGZpbHRlcik7CiAgICAgICAgICAgIG9zYzIuc3RhcnQodGltZSk7CiAgICAgICAgICAgIG9zYzIuc3RvcCh0aW1lICsgZHVyYXRpb24pOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwcmVzZXQgPT09ICdTdHJpbmdzJykgewogICAgICAgICAgICBvc2MudHlwZSA9ICdzYXd0b290aCc7CiAgICAgICAgICAgIGZpbHRlci50eXBlID0gJ2xvd3Bhc3MnOwogICAgICAgICAgICBmaWx0ZXIuZnJlcXVlbmN5LnZhbHVlID0gMTUwMDsKICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIHRpbWUpOwogICAgICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMC40LCB0aW1lICsgMC4zKTsgLy8gU2xvdyBhdHRhY2sKICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIHRpbWUgKyBkdXJhdGlvbiArIDAuMik7IC8vIFNsb3cgcmVsZWFzZQogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChwcmVzZXQgPT09ICdHbGl0Y2ggQmFzcycpIHsKICAgICAgICAgICAgb3NjLnR5cGUgPSAnc3F1YXJlJzsKICAgICAgICAgICAgZmlsdGVyLnR5cGUgPSAnbG93cGFzcyc7CiAgICAgICAgICAgIGZpbHRlci5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODAwLCB0aW1lKTsKICAgICAgICAgICAgLy8gTEZPIGZvciBmaWx0ZXIKICAgICAgICAgICAgY29uc3QgbGZvID0gY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgICAgbGZvLnR5cGUgPSAnc3F1YXJlJzsKICAgICAgICAgICAgbGZvLmZyZXF1ZW5jeS52YWx1ZSA9IDEyOyAvLyBGYXN0IHdvYgogICAgICAgICAgICBjb25zdCBsZm9HYWluID0gY3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgbGZvR2Fpbi5nYWluLnZhbHVlID0gNjAwOwogICAgICAgICAgICBsZm8uY29ubmVjdChsZm9HYWluKTsKICAgICAgICAgICAgbGZvR2Fpbi5jb25uZWN0KGZpbHRlci5mcmVxdWVuY3kpOwogICAgICAgICAgICBsZm8uc3RhcnQodGltZSk7CiAgICAgICAgICAgIGxmby5zdG9wKHRpbWUgKyBkdXJhdGlvbik7CiAgICAgICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLCB0aW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAuOCwgdGltZSArIDAuMDEpOwogICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC44LCB0aW1lICsgZHVyYXRpb24gLSAwLjA1KTsKICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIHRpbWUgKyBkdXJhdGlvbik7CiAgICAgICAgfQogICAgICAgIG9zYy5mcmVxdWVuY3kudmFsdWUgPSBmcmVxOwogICAgICAgIG9zYy5zdGFydCh0aW1lKTsKICAgICAgICBvc2Muc3RvcCh0aW1lICsgZHVyYXRpb24pOwogICAgfTsKICAgIC8vIFBhdHRlcm4gTG9naWMKICAgIGlmIChwYXR0ZXJuVHlwZSA9PT0gJ09uZSBTaG90JykgewogICAgICAgIHBsYXlOb3RlKG5vdGVzWzBdLCAwLCAyKTsKICAgIH0KICAgIGVsc2UgaWYgKHBhdHRlcm5UeXBlID09PSAnQmFzc2xpbmUnKSB7CiAgICAgICAgY29uc3Qgc3RlcCA9IGJlYXRMZW4gLyAyOwogICAgICAgIGNvbnN0IHRvdGFsU3RlcHMgPSBiYXJzICogODsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsU3RlcHM7IGkrKykgewogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuMykgewogICAgICAgICAgICAgICAgY29uc3Qgbm90ZUlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpOwogICAgICAgICAgICAgICAgcGxheU5vdGUobm90ZXNbbm90ZUlkeF0sIGkgKiBzdGVwLCBzdGVwICogMC44KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGVsc2UgaWYgKHBhdHRlcm5UeXBlID09PSAnQXJwZWdnaW8nKSB7CiAgICAgICAgY29uc3Qgc3RlcCA9IGJlYXRMZW4gLyA0OwogICAgICAgIGNvbnN0IHRvdGFsU3RlcHMgPSBiYXJzICogMTY7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbFN0ZXBzOyBpKyspIHsKICAgICAgICAgICAgY29uc3Qgbm90ZUlkeCA9IGkgJSA0OwogICAgICAgICAgICBjb25zdCBzY2FsZUlkeCA9IFswLCAyLCA0LCA3XVtub3RlSWR4XTsKICAgICAgICAgICAgaWYgKHNjYWxlSWR4IDwgbm90ZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBwbGF5Tm90ZShub3Rlc1tzY2FsZUlkeF0sIGkgKiBzdGVwLCBzdGVwICogMC41KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGVsc2UgaWYgKHBhdHRlcm5UeXBlID09PSAnUmFuZG9tIE1lbG9keScpIHsKICAgICAgICBjb25zdCBzdGVwID0gYmVhdExlbiAvIDI7CiAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IGJhcnMgKiA4OwogICAgICAgIGxldCBsYXN0Tm90ZSA9IDA7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbFN0ZXBzOyBpKyspIHsKICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGRpciA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyAxIDogLTE7CiAgICAgICAgICAgICAgICBsZXQgbmV4dE5vdGUgPSBsYXN0Tm90ZSArIGRpcjsKICAgICAgICAgICAgICAgIGlmIChuZXh0Tm90ZSA8IDApCiAgICAgICAgICAgICAgICAgICAgbmV4dE5vdGUgPSAwOwogICAgICAgICAgICAgICAgaWYgKG5leHROb3RlID49IG5vdGVzLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgICBuZXh0Tm90ZSA9IG5vdGVzLmxlbmd0aCAtIDE7CiAgICAgICAgICAgICAgICBwbGF5Tm90ZShub3Rlc1tuZXh0Tm90ZV0sIGkgKiBzdGVwLCBzdGVwICogMC45KTsKICAgICAgICAgICAgICAgIGxhc3ROb3RlID0gbmV4dE5vdGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBlbHNlIGlmIChwYXR0ZXJuVHlwZSA9PT0gJ0Nob3JkcycpIHsKICAgICAgICBjb25zdCBzdGVwID0gYmVhdExlbiAqIDI7CiAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IGJhcnMgKiAyOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxTdGVwczsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzaW9uID0gWzAsIDQsIDUsIDNdOwogICAgICAgICAgICBjb25zdCByb290SWR4ID0gcHJvZ3Jlc3Npb25baSAlIDRdOwogICAgICAgICAgICBwbGF5Tm90ZShub3Rlc1tyb290SWR4XSwgaSAqIHN0ZXAsIHN0ZXApOwogICAgICAgICAgICBpZiAocm9vdElkeCArIDIgPCBub3Rlcy5sZW5ndGgpCiAgICAgICAgICAgICAgICBwbGF5Tm90ZShub3Rlc1tyb290SWR4ICsgMl0sIGkgKiBzdGVwLCBzdGVwKTsKICAgICAgICAgICAgaWYgKHJvb3RJZHggKyA0IDwgbm90ZXMubGVuZ3RoKQogICAgICAgICAgICAgICAgcGxheU5vdGUobm90ZXNbcm9vdElkeCArIDRdLCBpICogc3RlcCwgc3RlcCk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIGF3YWl0IGN0eC5zdGFydFJlbmRlcmluZygpOwp9OwovLyAtLS0gTWl4aW5nIC0tLQpleHBvcnQgY29uc3QgbWl4VHJhY2tzID0gYXN5bmMgKHRyYWNrcywgZHVyYXRpb24pID0+IHsKICAgIC8vIER5bmFtaWNhbGx5IGNob29zZSBzYW1wbGUgcmF0ZSBiYXNlZCBvbiB0cmFja3MsIGRlZmF1bHRpbmcgdG8gNDQuMWsgYnV0IGdvaW5nIHVwIHRvIG1heCBmb3VuZAogICAgY29uc3QgbWF4UmF0ZSA9IHRyYWNrcy5sZW5ndGggPiAwCiAgICAgICAgPyBNYXRoLm1heCguLi50cmFja3MubWFwKHQgPT4gdC5idWZmZXIuc2FtcGxlUmF0ZSkpCiAgICAgICAgOiBERUZBVUxUX1NBTVBMRV9SQVRFOwogICAgY29uc3Qgc2FtcGxlUmF0ZSA9IE1hdGgubWF4KERFRkFVTFRfU0FNUExFX1JBVEUsIG1heFJhdGUpOwogICAgY29uc3QgY3R4ID0gbmV3IE9mZmxpbmVBdWRpb0NvbnRleHQoMiwgTWF0aC5jZWlsKGR1cmF0aW9uICogc2FtcGxlUmF0ZSksIHNhbXBsZVJhdGUpOwogICAgdHJhY2tzLmZvckVhY2godHJhY2sgPT4gewogICAgICAgIGlmICh0cmFjay5pc011dGVkKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgY29uc3Qgc291cmNlID0gY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOwogICAgICAgIHNvdXJjZS5idWZmZXIgPSB0cmFjay5idWZmZXI7CiAgICAgICAgY29uc3QgZ2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgZ2Fpbi5nYWluLnZhbHVlID0gdHJhY2sudm9sdW1lOwogICAgICAgIC8vIEFwcGx5IFZvbHVtZSBBdXRvbWF0aW9uIGN1cnZlIGlmIGV4aXN0cwogICAgICAgIGlmICh0cmFjay52b2x1bWVBdXRvbWF0aW9uICYmIHRyYWNrLnZvbHVtZUF1dG9tYXRpb24ubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCBwb2ludHMgPSBbLi4udHJhY2sudm9sdW1lQXV0b21hdGlvbl0uc29ydCgoYSwgYikgPT4gYS50aW1lIC0gYi50aW1lKTsKICAgICAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHBvaW50c1swXS52YWx1ZSwgTWF0aC5tYXgoMCwgcG9pbnRzWzBdLnRpbWUgKyB0cmFjay5zdGFydFRpbWUpKTsKICAgICAgICAgICAgcG9pbnRzLmZvckVhY2goKHAsIGkpID0+IHsKICAgICAgICAgICAgICAgIGlmIChpID4gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBNYXRoLm1heCgwLCBwLnRpbWUgKyB0cmFjay5zdGFydFRpbWUpOwogICAgICAgICAgICAgICAgICAgIC8vIFVzZSBsaW5lYXIgcmFtcCBmb3IgYXV0b21hdGlvbgogICAgICAgICAgICAgICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShwLnZhbHVlLCB0aW1lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHNvdXJjZS5jb25uZWN0KGdhaW4pOwogICAgICAgIGdhaW4uY29ubmVjdChjdHguZGVzdGluYXRpb24pOwogICAgICAgIHNvdXJjZS5zdGFydCh0cmFjay5zdGFydFRpbWUsIHRyYWNrLnRyaW1TdGFydCwgdHJhY2suZHVyYXRpb24pOwogICAgfSk7CiAgICByZXR1cm4gYXdhaXQgY3R4LnN0YXJ0UmVuZGVyaW5nKCk7Cn07CmV4cG9ydCBjb25zdCBlbmNvZGVXQVZCdWZmZXIgPSAoYnVmZmVyKSA9PiB7CiAgICBjb25zdCBudW1DaGFubmVscyA9IGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOwogICAgY29uc3Qgc2FtcGxlUmF0ZSA9IGJ1ZmZlci5zYW1wbGVSYXRlOwogICAgY29uc3QgZm9ybWF0ID0gMTsKICAgIGNvbnN0IGJpdERlcHRoID0gMTY7CiAgICBjb25zdCBieXRlc1BlclNhbXBsZSA9IGJpdERlcHRoIC8gODsKICAgIGNvbnN0IGxlbmd0aCA9IGJ1ZmZlci5sZW5ndGg7CiAgICBjb25zdCBkYXRhTGVuZ3RoID0gbGVuZ3RoICogbnVtQ2hhbm5lbHMgKiBieXRlc1BlclNhbXBsZTsKICAgIGNvbnN0IGJ1ZmZlckxlbmd0aCA9IDQ0ICsgZGF0YUxlbmd0aDsKICAgIGNvbnN0IGFycmF5QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlckxlbmd0aCk7CiAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyKTsKICAgIGNvbnN0IHdyaXRlU3RyaW5nID0gKG9mZnNldCwgc3RyaW5nKSA9PiB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSk7CiAgICAgICAgfQogICAgfTsKICAgIHdyaXRlU3RyaW5nKDAsICdSSUZGJyk7CiAgICB2aWV3LnNldFVpbnQzMig0LCAzNiArIGRhdGFMZW5ndGgsIHRydWUpOwogICAgd3JpdGVTdHJpbmcoOCwgJ1dBVkUnKTsKICAgIHdyaXRlU3RyaW5nKDEyLCAnZm10ICcpOwogICAgdmlldy5zZXRVaW50MzIoMTYsIDE2LCB0cnVlKTsKICAgIHZpZXcuc2V0VWludDE2KDIwLCBmb3JtYXQsIHRydWUpOwogICAgdmlldy5zZXRVaW50MTYoMjIsIG51bUNoYW5uZWxzLCB0cnVlKTsKICAgIHZpZXcuc2V0VWludDMyKDI0LCBzYW1wbGVSYXRlLCB0cnVlKTsKICAgIHZpZXcuc2V0VWludDMyKDI4LCBzYW1wbGVSYXRlICogbnVtQ2hhbm5lbHMgKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSk7CiAgICB2aWV3LnNldFVpbnQxNigzMiwgbnVtQ2hhbm5lbHMgKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSk7CiAgICB2aWV3LnNldFVpbnQxNigzNCwgYml0RGVwdGgsIHRydWUpOwogICAgd3JpdGVTdHJpbmcoMzYsICdkYXRhJyk7CiAgICB2aWV3LnNldFVpbnQzMig0MCwgZGF0YUxlbmd0aCwgdHJ1ZSk7CiAgICBsZXQgb2Zmc2V0ID0gNDQ7CiAgICBjb25zdCBjaGFubmVscyA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1DaGFubmVsczsgaSsrKSB7CiAgICAgICAgY2hhbm5lbHMucHVzaChidWZmZXIuZ2V0Q2hhbm5lbERhdGEoaSkpOwogICAgfQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGNoID0gMDsgY2ggPCBudW1DaGFubmVsczsgY2grKykgewogICAgICAgICAgICBjb25zdCBzYW1wbGUgPSBjaGFubmVsc1tjaF1baV07CiAgICAgICAgICAgIGNvbnN0IHMgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgc2FtcGxlKSk7CiAgICAgICAgICAgIHZpZXcuc2V0SW50MTYob2Zmc2V0LCBzIDwgMCA/IHMgKiAweDgwMDAgOiBzICogMHg3RkZGLCB0cnVlKTsKICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIGFycmF5QnVmZmVyOwp9OwpleHBvcnQgY29uc3QgZW5jb2RlV0FWID0gKGJ1ZmZlcikgPT4gewogICAgcmV0dXJuIG5ldyBCbG9iKFtlbmNvZGVXQVZCdWZmZXIoYnVmZmVyKV0sIHsgdHlwZTogJ2F1ZGlvL3dhdicgfSk7Cn07Ci8vIFBsYWNlaG9sZGVyIGZvciBGTEFDIGVuY29kaW5nIHVzaW5nIFdBViBsb2dpYyBmb3Igbm93IGFzIG5vIGxpYnJhcnkgaXMgYXZhaWxhYmxlLgovLyBJbiBhIHJlYWwgc2NlbmFyaW8sIHRoaXMgd291bGQgdXNlIGxpYmZsYWMuanMgb3IgTWVkaWFSZWNvcmRlciB3aXRoIGF1ZGlvL2ZsYWMgbWltZSB0eXBlLgpleHBvcnQgY29uc3QgZW5jb2RlRkxBQyA9IChidWZmZXIpID0+IHsKICAgIC8vIFdlIHdyYXAgV0FWIGRhdGEgYnV0IGxhYmVsIGl0IGRpZmZlcmVudGx5IGZvciBub3cuIAogICAgLy8gSWRlYWxseSwgaW50ZWdyYXRpb24gd2l0aCBmbGFjLmpzIHdvdWxkIGhhcHBlbiBoZXJlLgogICAgcmV0dXJuIG5ldyBCbG9iKFtlbmNvZGVXQVZCdWZmZXIoYnVmZmVyKV0sIHsgdHlwZTogJ2F1ZGlvL2ZsYWMnIH0pOwp9OwpleHBvcnQgY29uc3QgZW5jb2RlTVAzID0gKGJ1ZmZlcikgPT4gewogICAgY29uc3QgbGFtZSA9IHdpbmRvdy5sYW1lanM7CiAgICBpZiAoIWxhbWUpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNUDMgRW5jb2RlciBub3QgbG9hZGVkIik7CiAgICBjb25zdCBjaGFubmVscyA9IGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOwogICAgY29uc3Qgc2FtcGxlUmF0ZSA9IGJ1ZmZlci5zYW1wbGVSYXRlOwogICAgY29uc3Qga2JwcyA9IDEyODsKICAgIGNvbnN0IG1wM0VuY29kZXIgPSBuZXcgbGFtZS5NcDNFbmNvZGVyKGNoYW5uZWxzLCBzYW1wbGVSYXRlLCBrYnBzKTsKICAgIGNvbnN0IHNhbXBsZXNMID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKDApOwogICAgY29uc3Qgc2FtcGxlc1IgPSBjaGFubmVscyA+IDEgPyBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoMSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBjb252ZXJ0VG9JbnQxNiA9IChkYXRhKSA9PiB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEludDE2QXJyYXkoZGF0YS5sZW5ndGgpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBjb25zdCBzID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIGRhdGFbaV0pKTsKICAgICAgICAgICAgcmVzdWx0W2ldID0gcyA8IDAgPyBzICogMHg4MDAwIDogcyAqIDB4N0ZGRjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CiAgICBjb25zdCBpbnQxNkwgPSBjb252ZXJ0VG9JbnQxNihzYW1wbGVzTCk7CiAgICBjb25zdCBpbnQxNlIgPSBzYW1wbGVzUiA/IGNvbnZlcnRUb0ludDE2KHNhbXBsZXNSKSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IG1wM0RhdGEgPSBbXTsKICAgIGNvbnN0IG1wM2J1ZiA9IG1wM0VuY29kZXIuZW5jb2RlQnVmZmVyKGludDE2TCwgaW50MTZSKTsKICAgIGlmIChtcDNidWYubGVuZ3RoID4gMCkKICAgICAgICBtcDNEYXRhLnB1c2gobXAzYnVmKTsKICAgIGNvbnN0IGZsdXNoID0gbXAzRW5jb2Rlci5mbHVzaCgpOwogICAgaWYgKGZsdXNoLmxlbmd0aCA+IDApCiAgICAgICAgbXAzRGF0YS5wdXNoKGZsdXNoKTsKICAgIHJldHVybiBuZXcgQmxvYihtcDNEYXRhLCB7IHR5cGU6ICdhdWRpby9tcDMnIH0pOwp9Owo=","@/services/geminiService":"data:application/javascript;base64,Ly8gVGhpcyBmaWxlIGlzIGRlcHJlY2F0ZWQgYW5kIGNhbiBiZSBzYWZlbHkgZGVsZXRlZCBmcm9tIHlvdXIgcHJvamVjdC4K","@/components/Button":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmNvbnN0IEJ1dHRvbiA9ICh7IHZhcmlhbnQgPSAncHJpbWFyeScsIGljb24sIGxhYmVsLCBmdWxsV2lkdGggPSBmYWxzZSwgY2xhc3NOYW1lID0gJycsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSA9PiB7CiAgICBjb25zdCBiYXNlU3R5bGVzID0gImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC00IHB5LTMgcm91bmRlZC14bCBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWFsbCBhY3RpdmU6c2NhbGUtOTUgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpwb2ludGVyLWV2ZW50cy1ub25lIHRvdWNoLW1hbmlwdWxhdGlvbiI7CiAgICBjb25zdCB2YXJpYW50cyA9IHsKICAgICAgICBwcmltYXJ5OiAiYmctY3lhbi01MDAgaG92ZXI6YmctY3lhbi00MDAgdGV4dC1ibGFjayBzaGFkb3ctbGcgc2hhZG93LWN5YW4tNTAwLzIwIiwKICAgICAgICBzZWNvbmRhcnk6ICJiZy16aW5jLTgwMCBob3ZlcjpiZy16aW5jLTcwMCB0ZXh0LXppbmMtMTAwIGJvcmRlciBib3JkZXItemluYy03MDAiLAogICAgICAgIGRhbmdlcjogImJnLXJlZC01MDAvMTAgaG92ZXI6YmctcmVkLTUwMC8yMCB0ZXh0LXJlZC00MDAgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzUwIiwKICAgICAgICBnaG9zdDogImJnLXRyYW5zcGFyZW50IGhvdmVyOmJnLXppbmMtODAwLzUwIHRleHQtemluYy00MDAgaG92ZXI6dGV4dC16aW5jLTIwMCIKICAgIH07CiAgICBjb25zdCB3aWR0aENsYXNzID0gZnVsbFdpZHRoID8gJ3ctZnVsbCcgOiAnJzsKICAgIHJldHVybiAoX2pzeHMoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiBgJHtiYXNlU3R5bGVzfSAke3ZhcmlhbnRzW3ZhcmlhbnRdfSAke3dpZHRoQ2xhc3N9ICR7Y2xhc3NOYW1lfWAsIC4uLnByb3BzLCBjaGlsZHJlbjogW2ljb24gJiYgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiBsYWJlbCB8fCBjaGlsZHJlbiA/ICJtci0yIiA6ICIiLCBjaGlsZHJlbjogaWNvbiB9KSwgbGFiZWwgfHwgY2hpbGRyZW5dIH0pKTsKfTsKZXhwb3J0IGRlZmF1bHQgQnV0dG9uOwo=","@/components/WaveformDisplay":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgU0VMRUNUSU9OX0NPTE9SIH0gZnJvbSAnQC9jb25zdGFudHMnOwpjb25zdCBUSUxFX1NJWkUgPSAyMDQ4OyAvLyBNYXggd2lkdGggcGVyIGNhbnZhcyB0aWxlIChzYWZlIGZvciBtb2JpbGUpCmNvbnN0IGRhcmtlbkNvbG9yID0gKGhleCwgcGVyY2VudCkgPT4gewogICAgbGV0IG51bSA9IHBhcnNlSW50KGhleC5yZXBsYWNlKCIjIiwgIiIpLCAxNiksIGFtdCA9IE1hdGgucm91bmQoMi41NSAqIHBlcmNlbnQpLCBSID0gKG51bSA+PiAxNikgLSBhbXQsIEcgPSAobnVtID4+IDggJiAweDAwRkYpIC0gYW10LCBCID0gKG51bSAmIDB4MDAwMEZGKSAtIGFtdDsKICAgIHJldHVybiAiIyIgKyAoMHgxMDAwMDAwICsgKFIgPCAyNTUgPyBSIDwgMSA/IDAgOiBSIDogMjU1KSAqIDB4MTAwMDAgKyAoRyA8IDI1NSA/IEcgPCAxID8gMCA6IEcgOiAyNTUpICogMHgxMDAgKyAoQiA8IDI1NSA/IEIgPCAxID8gMCA6IEIgOiAyNTUpKS50b1N0cmluZygxNikuc2xpY2UoMSk7Cn07CmNvbnN0IFdhdmVmb3JtVGlsZSA9IFJlYWN0Lm1lbW8oKHsgdGlsZUluZGV4LCB0b3RhbFdpZHRoLCBidWZmZXIsIHN0YXJ0VGltZSwgdHJpbVN0YXJ0LCBkdXJhdGlvbiwgc2VsZWN0aW9uLCBjb2xvciwgem9vbSwgY29sb3JPdmVycmlkZSwgZmFkZUluRHVyYXRpb24gPSAwLCBmYWRlT3V0RHVyYXRpb24gPSAwLCBoZWlnaHQgPSA4MCwgYXV0b21hdGlvblBvaW50cywgc2hvd0F1dG9tYXRpb25IYW5kbGVzLCBpc0xvb3BpbmcsIGJhY2tncm91bmRDb2xvciA9ICcjMTgxODFiJyB9KSA9PiB7CiAgICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCB0aWxlWCA9IHRpbGVJbmRleCAqIFRJTEVfU0laRTsKICAgIGNvbnN0IHRpbGVXaWR0aCA9IE1hdGgubWluKFRJTEVfU0laRSwgdG90YWxXaWR0aCAtIHRpbGVYKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzPy5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IGZhbHNlIH0pOwogICAgICAgIGlmICghY2FudmFzIHx8ICFjdHggfHwgIWJ1ZmZlcikKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7CiAgICAgICAgY29uc3QgcGh5c2ljYWxXaWR0aCA9IE1hdGguZmxvb3IodGlsZVdpZHRoICogZHByKTsKICAgICAgICBjb25zdCBwaHlzaWNhbEhlaWdodCA9IE1hdGguZmxvb3IoaGVpZ2h0ICogZHByKTsKICAgICAgICBpZiAoY2FudmFzLndpZHRoICE9PSBwaHlzaWNhbFdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT09IHBoeXNpY2FsSGVpZ2h0KSB7CiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHBoeXNpY2FsV2lkdGg7CiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBwaHlzaWNhbEhlaWdodDsKICAgICAgICB9CiAgICAgICAgY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTsKICAgICAgICBjdHguc2NhbGUoZHByLCBkcHIpOwogICAgICAgIC8vIENsZWFyIEJhY2tncm91bmQKICAgICAgICBjdHguZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yOwogICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB0aWxlV2lkdGgsIGhlaWdodCk7CiAgICAgICAgLy8gLS0tIFdhdmVmb3JtIERyYXdpbmcgLS0tCiAgICAgICAgY29uc3QgZGF0YSA9IGJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTsKICAgICAgICBjb25zdCBidWZmZXJMZW5ndGggPSBkYXRhLmxlbmd0aDsKICAgICAgICBjb25zdCBhbXAgPSBoZWlnaHQgLyAyOwogICAgICAgIGlmIChjb2xvck92ZXJyaWRlKSB7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvck92ZXJyaWRlOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGdyYWRpZW50ID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIGhlaWdodCk7CiAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgY29sb3IpOwogICAgICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIGRhcmtlbkNvbG9yKGNvbG9yLCA0MCkpOwogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgIC8vIENhbGN1bGF0ZSBUaW1lIE9mZnNldHMgZm9yIHRoaXMgVGlsZQogICAgICAgIGNvbnN0IHRpbGVTdGFydFRpbWVPZmZzZXQgPSB0aWxlWCAvIHpvb207IC8vIFNlY29uZHMgaW50byB0aGUgdHJhY2sgdmlzdWFsbHkKICAgICAgICBjb25zdCBzZWNvbmRzUGVyUGl4ZWwgPSAxIC8gem9vbTsKICAgICAgICBjb25zdCBzYW1wbGVzUGVyUGl4ZWwgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHNlY29uZHNQZXJQaXhlbCAqIGJ1ZmZlci5zYW1wbGVSYXRlKSk7CiAgICAgICAgY29uc3QgaW5uZXJTdHJpZGUgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHNhbXBsZXNQZXJQaXhlbCAvIDIwMCkpOwogICAgICAgIC8vIFNvcnRpbmcgYXV0b21hdGlvbiBwb2ludHMgb25jZSAoY291bGQgYmUgb3B0aW1pemVkIHRvIHByb3ApCiAgICAgICAgbGV0IHNvcnRlZFBvaW50cyA9IFtdOwogICAgICAgIGlmIChhdXRvbWF0aW9uUG9pbnRzICYmIGF1dG9tYXRpb25Qb2ludHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzb3J0ZWRQb2ludHMgPSBbLi4uYXV0b21hdGlvblBvaW50c10uc29ydCgoYSwgYikgPT4gYS50aW1lIC0gYi50aW1lKTsKICAgICAgICB9CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aWxlV2lkdGg7IGkrKykgewogICAgICAgICAgICAvLyBSZWxUaW1lIGlzIHRpbWUgcmVsYXRpdmUgdG8gdGhlIFRyYWNrIFN0YXJ0CiAgICAgICAgICAgIGNvbnN0IHJlbFRpbWUgPSB0aWxlU3RhcnRUaW1lT2Zmc2V0ICsgKGkgKiBzZWNvbmRzUGVyUGl4ZWwpOwogICAgICAgICAgICBjb25zdCBidWZmZXJUaW1lID0gdHJpbVN0YXJ0ICsgcmVsVGltZTsgLy8gVGltZSBpbnNpZGUgdGhlIGF1ZGlvIGJ1ZmZlcgogICAgICAgICAgICBsZXQgbWluID0gMS4wOwogICAgICAgICAgICBsZXQgbWF4ID0gLTEuMDsKICAgICAgICAgICAgY29uc3QgcGl4ZWxTdGFydEluZGV4ID0gTWF0aC5mbG9vcihidWZmZXJUaW1lICogYnVmZmVyLnNhbXBsZVJhdGUpOwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNhbXBsZXNQZXJQaXhlbDsgaiArPSBpbm5lclN0cmlkZSkgewogICAgICAgICAgICAgICAgbGV0IGlkeCA9IHBpeGVsU3RhcnRJbmRleCArIGo7CiAgICAgICAgICAgICAgICBpZiAoaXNMb29waW5nKSB7CiAgICAgICAgICAgICAgICAgICAgaWR4ID0gaWR4ICUgYnVmZmVyTGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGlmIChpZHggPCAwKQogICAgICAgICAgICAgICAgICAgICAgICBpZHggKz0gYnVmZmVyTGVuZ3RoOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaWR4ID49IGJ1ZmZlckxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgZGF0dW0gPSBkYXRhW2lkeF07CiAgICAgICAgICAgICAgICBpZiAoZGF0dW0gPCBtaW4pCiAgICAgICAgICAgICAgICAgICAgbWluID0gZGF0dW07CiAgICAgICAgICAgICAgICBpZiAoZGF0dW0gPiBtYXgpCiAgICAgICAgICAgICAgICAgICAgbWF4ID0gZGF0dW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1pbiA9PT0gMS4wICYmIG1heCA9PT0gLTEuMCkgewogICAgICAgICAgICAgICAgbWluID0gMDsKICAgICAgICAgICAgICAgIG1heCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbWluID0gTWF0aC5tYXgoLTEsIG1pbik7CiAgICAgICAgICAgIG1heCA9IE1hdGgubWluKDEsIG1heCk7CiAgICAgICAgICAgIC8vIC0tLSBBcHBseSBHYWluIChGYWRlcyAmIEF1dG9tYXRpb24pIC0tLQogICAgICAgICAgICBsZXQgZ2FpbiA9IDEuMDsKICAgICAgICAgICAgLy8gQXV0b21hdGlvbgogICAgICAgICAgICBpZiAoc29ydGVkUG9pbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIC8vIEZpbmQgcG9pbnRzIHN1cnJvdW5kaW5nIGJ1ZmZlclRpbWUKICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBsaW5lYXIgc2VhcmNoIGlzIGZhc3QgZW5vdWdoIGZvciBwZXItcGl4ZWwgaW4gdGhpcyBjb250ZXh0CiAgICAgICAgICAgICAgICBsZXQgcDEgPSBzb3J0ZWRQb2ludHNbMF07CiAgICAgICAgICAgICAgICBsZXQgcDIgPSBzb3J0ZWRQb2ludHNbMF07CiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHNvcnRlZFBvaW50cy5sZW5ndGggLSAxOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyVGltZSA+PSBzb3J0ZWRQb2ludHNba10udGltZSAmJiBidWZmZXJUaW1lIDw9IHNvcnRlZFBvaW50c1trICsgMV0udGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICBwMSA9IHNvcnRlZFBvaW50c1trXTsKICAgICAgICAgICAgICAgICAgICAgICAgcDIgPSBzb3J0ZWRQb2ludHNbayArIDFdOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoYnVmZmVyVGltZSA+PSBzb3J0ZWRQb2ludHNbc29ydGVkUG9pbnRzLmxlbmd0aCAtIDFdLnRpbWUpIHsKICAgICAgICAgICAgICAgICAgICBwMSA9IHNvcnRlZFBvaW50c1tzb3J0ZWRQb2ludHMubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgcDIgPSBwMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwMSA9PT0gcDIpIHsKICAgICAgICAgICAgICAgICAgICBnYWluICo9IHAxLnZhbHVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBwMi50aW1lIC0gcDEudGltZTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IChidWZmZXJUaW1lIC0gcDEudGltZSkgLyByYW5nZTsKICAgICAgICAgICAgICAgICAgICBnYWluICo9IHAxLnZhbHVlICsgKHAyLnZhbHVlIC0gcDEudmFsdWUpICogcHJvZ3Jlc3M7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gRmFkZXMKICAgICAgICAgICAgaWYgKGZhZGVJbkR1cmF0aW9uID4gMCAmJiByZWxUaW1lIDwgZmFkZUluRHVyYXRpb24pIHsKICAgICAgICAgICAgICAgIGdhaW4gKj0gKHJlbFRpbWUgLyBmYWRlSW5EdXJhdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGZhZGVPdXREdXJhdGlvbiA+IDAgJiYgcmVsVGltZSA+IChkdXJhdGlvbiAtIGZhZGVPdXREdXJhdGlvbikpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVGcm9tRW5kID0gZHVyYXRpb24gLSByZWxUaW1lOwogICAgICAgICAgICAgICAgZ2FpbiAqPSAodGltZUZyb21FbmQgLyBmYWRlT3V0RHVyYXRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGdhaW4gPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBnYWluKSk7CiAgICAgICAgICAgIG1pbiAqPSBnYWluOwogICAgICAgICAgICBtYXggKj0gZ2FpbjsKICAgICAgICAgICAgY29uc3QgeVRvcCA9IE1hdGguZmxvb3IoKDEgKyBtaW4pICogYW1wKTsKICAgICAgICAgICAgY29uc3QgeUJvdHRvbSA9IE1hdGguY2VpbCgoMSArIG1heCkgKiBhbXApOwogICAgICAgICAgICBjb25zdCBiYXJIZWlnaHQgPSBNYXRoLm1heCgxLCB5Qm90dG9tIC0geVRvcCk7CiAgICAgICAgICAgIGN0eC5maWxsUmVjdChpLCB5VG9wLCAxLCBiYXJIZWlnaHQpOwogICAgICAgIH0KICAgICAgICAvLyAtLS0gRHJhdyBTZWxlY3Rpb24gLS0tCiAgICAgICAgaWYgKHNlbGVjdGlvbikgewogICAgICAgICAgICBjb25zdCB0cmFja0VuZCA9IHN0YXJ0VGltZSArIGR1cmF0aW9uOwogICAgICAgICAgICBjb25zdCB0aWxlU3RhcnRHbG9iYWwgPSBzdGFydFRpbWUgKyB0aWxlU3RhcnRUaW1lT2Zmc2V0OwogICAgICAgICAgICBjb25zdCB0aWxlRW5kR2xvYmFsID0gdGlsZVN0YXJ0R2xvYmFsICsgKHRpbGVXaWR0aCAvIHpvb20pOwogICAgICAgICAgICAvLyBDaGVjayBvdmVybGFwCiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uZW5kID4gdGlsZVN0YXJ0R2xvYmFsICYmIHNlbGVjdGlvbi5zdGFydCA8IHRpbGVFbmRHbG9iYWwpIHsKICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBsb2NhbCBwaXhlbHMKICAgICAgICAgICAgICAgIGNvbnN0IHNlbFN0YXJ0TG9jYWwgPSBNYXRoLm1heCgwLCAoc2VsZWN0aW9uLnN0YXJ0IC0gdGlsZVN0YXJ0R2xvYmFsKSAqIHpvb20pOwogICAgICAgICAgICAgICAgY29uc3Qgc2VsRW5kTG9jYWwgPSBNYXRoLm1pbih0aWxlV2lkdGgsIChzZWxlY3Rpb24uZW5kIC0gdGlsZVN0YXJ0R2xvYmFsKSAqIHpvb20pOwogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFNFTEVDVElPTl9DT0xPUjsKICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChzZWxTdGFydExvY2FsLCAwLCBzZWxFbmRMb2NhbCAtIHNlbFN0YXJ0TG9jYWwsIGhlaWdodCk7CiAgICAgICAgICAgICAgICAvLyBIYW5kbGVzCiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOwogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5zdGFydCA+PSB0aWxlU3RhcnRHbG9iYWwgJiYgc2VsZWN0aW9uLnN0YXJ0IDwgdGlsZUVuZEdsb2JhbCkgewogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChzZWxTdGFydExvY2FsLCAwLCAxLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5lbmQgPiB0aWxlU3RhcnRHbG9iYWwgJiYgc2VsZWN0aW9uLmVuZCA8PSB0aWxlRW5kR2xvYmFsKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHNlbEVuZExvY2FsIC0gKHNlbEVuZExvY2FsID09PSB0aWxlV2lkdGggPyAxIDogMCksIDAsIDEsIGhlaWdodCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gLS0tIERyYXcgQXV0b21hdGlvbiBMaW5lcyAtLS0KICAgICAgICBpZiAoc2hvd0F1dG9tYXRpb25IYW5kbGVzICYmIHNvcnRlZFBvaW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNmYWNjMTUnOwogICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgLy8gRmlsdGVyIHBvaW50cyByZWxldmFudCB0byB0aGlzIHRpbGUgKHBsdXMgb25lIGJlZm9yZS9hZnRlciBmb3IgY29ubmVjdGl2aXR5KQogICAgICAgICAgICBjb25zdCB0aWxlU3RhcnRUaW1lUmVsID0gdGlsZVN0YXJ0VGltZU9mZnNldDsKICAgICAgICAgICAgY29uc3QgdGlsZUVuZFRpbWVSZWwgPSB0aWxlU3RhcnRUaW1lT2Zmc2V0ICsgKHRpbGVXaWR0aCAvIHpvb20pOwogICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRyYXcgbGluZXMuIFdlIGNhbiBqdXN0IGl0ZXJhdGUgYWxsIHBvaW50cyBhbmQgcHJvamVjdCB0aGVtLgogICAgICAgICAgICAvLyBDYW52YXMgY2xpcHBpbmcgaGFuZGxlcyB0aGUgcmVzdC4KICAgICAgICAgICAgbGV0IGhhc01vdmVkID0gZmFsc2U7CiAgICAgICAgICAgIHNvcnRlZFBvaW50cy5mb3JFYWNoKChwLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHB4ID0gKHAudGltZSAtIHRyaW1TdGFydCkgKiB6b29tIC0gdGlsZVg7CiAgICAgICAgICAgICAgICBjb25zdCBweSA9ICgxIC0gcC52YWx1ZSkgKiBoZWlnaHQ7CiAgICAgICAgICAgICAgICAvLyBPcHRpbWl6YXRpb246IFNraXAgcG9pbnRzIGZhciBvdXRzaWRlCiAgICAgICAgICAgICAgICBpZiAocHggPCAtMTAwICYmIGlkeCA8IHNvcnRlZFBvaW50cy5sZW5ndGggLSAxICYmIChzb3J0ZWRQb2ludHNbaWR4ICsgMV0udGltZSAtIHRyaW1TdGFydCkgKiB6b29tIC0gdGlsZVggPCAtMTAwKQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIGlmIChweCA+IHRpbGVXaWR0aCArIDEwMCAmJiBpZHggPiAwICYmIChzb3J0ZWRQb2ludHNbaWR4IC0gMV0udGltZSAtIHRyaW1TdGFydCkgKiB6b29tIC0gdGlsZVggPiB0aWxlV2lkdGggKyAxMDApCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKCFoYXNNb3ZlZCkgewogICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8ocHgsIHB5KTsKICAgICAgICAgICAgICAgICAgICBoYXNNb3ZlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHB4LCBweSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgIC8vIERyYXcgRG90cwogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmYWNjMTUnOwogICAgICAgICAgICBzb3J0ZWRQb2ludHMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHB4ID0gKHAudGltZSAtIHRyaW1TdGFydCkgKiB6b29tIC0gdGlsZVg7CiAgICAgICAgICAgICAgICBjb25zdCBweSA9ICgxIC0gcC52YWx1ZSkgKiBoZWlnaHQ7CiAgICAgICAgICAgICAgICBpZiAocHggPj0gLTQgJiYgcHggPD0gdGlsZVdpZHRoICsgNCkgewogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICBjdHguYXJjKHB4LCBweSwgNCwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMCwwLDAsMC41KSc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LCBbYnVmZmVyLCBzdGFydFRpbWUsIHRyaW1TdGFydCwgZHVyYXRpb24sIHNlbGVjdGlvbiwgY29sb3IsIHpvb20sIGNvbG9yT3ZlcnJpZGUsIGZhZGVJbkR1cmF0aW9uLCBmYWRlT3V0RHVyYXRpb24sIGhlaWdodCwgYXV0b21hdGlvblBvaW50cywgc2hvd0F1dG9tYXRpb25IYW5kbGVzLCBpc0xvb3BpbmcsIGJhY2tncm91bmRDb2xvciwgdGlsZUluZGV4LCB0aWxlV2lkdGgsIHRpbGVYXSk7CiAgICByZXR1cm4gKF9qc3goImNhbnZhcyIsIHsgcmVmOiBjYW52YXNSZWYsIHN0eWxlOiB7CiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICAgICAgICBsZWZ0OiBgJHt0aWxlWH1weGAsCiAgICAgICAgICAgIHRvcDogMCwKICAgICAgICAgICAgd2lkdGg6IGAke3RpbGVXaWR0aH1weGAsCiAgICAgICAgICAgIGhlaWdodDogJzEwMCUnCiAgICAgICAgfSB9KSk7Cn0pOwpjb25zdCBXYXZlZm9ybURpc3BsYXkgPSAocHJvcHMpID0+IHsKICAgIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTsKICAgIC8vIENhbGN1bGF0ZSB0b3RhbCB2aXN1YWwgd2lkdGgKICAgIGNvbnN0IHRvdGFsV2lkdGggPSBNYXRoLmNlaWwocHJvcHMuZHVyYXRpb24gKiBwcm9wcy56b29tKTsKICAgIGNvbnN0IHRpbGVDb3VudCA9IE1hdGguY2VpbCh0b3RhbFdpZHRoIC8gVElMRV9TSVpFKTsKICAgIHJldHVybiAoX2pzeCgiZGl2IiwgeyByZWY6IGNvbnRhaW5lclJlZiwgc3R5bGU6IHsgd2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnMTAwJScsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH0sIGNsYXNzTmFtZTogYHNocmluay0wIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuICR7cHJvcHMuY29sb3JPdmVycmlkZSA/ICcnIDogJ3JpbmctMSByaW5nLXdoaXRlLzUnfWAsIGNoaWxkcmVuOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0aWxlQ291bnQgfSkubWFwKChfLCBpKSA9PiAoX2pzeChXYXZlZm9ybVRpbGUsIHsgdGlsZUluZGV4OiBpLCB0b3RhbFdpZHRoOiB0b3RhbFdpZHRoLCAuLi5wcm9wcyB9LCBpKSkpIH0pKTsKfTsKZXhwb3J0IGRlZmF1bHQgV2F2ZWZvcm1EaXNwbGF5Owo=","@/components/AIGeneratorModal":"data:application/javascript;base64,Ly8gVGhpcyBmaWxlIGlzIGRlcHJlY2F0ZWQgYW5kIGNhbiBiZSBzYWZlbHkgZGVsZXRlZCBmcm9tIHlvdXIgcHJvamVjdC4K","@/App":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gInJlYWN0L2pzeC1ydW50aW1lIjsKaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlQ2FsbGJhY2ssIHVzZUxheW91dEVmZmVjdCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvQnV0dG9uJzsKaW1wb3J0IEJlYXRNYWtlck1vZGFsIGZyb20gJ0AvY29tcG9uZW50cy9CZWF0TWFrZXJNb2RhbCc7CmltcG9ydCBFZmZlY3RzTW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL0VmZmVjdHNNb2RhbCc7CmltcG9ydCBFeHBvcnRNb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvRXhwb3J0TW9kYWwnOwppbXBvcnQgeyBIZWFkZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvSGVhZGVyJzsKaW1wb3J0IHsgVHJhbnNwb3J0Q29udHJvbHMgfSBmcm9tICdAL2NvbXBvbmVudHMvVHJhbnNwb3J0Q29udHJvbHMnOwppbXBvcnQgeyBUaW1lbGluZSB9IGZyb20gJ0AvY29tcG9uZW50cy9UaW1lbGluZSc7CmltcG9ydCB7IGdldEF1ZGlvQ29udGV4dCwgZGVjb2RlQXVkaW9EYXRhLCBlbmNvZGVXQVYsIGVuY29kZU1QMywgZW5jb2RlRkxBQywgYXBwbHlGYWRlLCBtZXJnZUJ1ZmZlcnMsIGNoYW5nZVNwZWVkLCByZXZlcnNlQnVmZmVyLCBub3JtYWxpemVCdWZmZXIsIHJlc2FtcGxlQnVmZmVyLCBhcHBseUVRLCBtaXhUcmFja3MsIGdlbmVyYXRlUHJvamVjdFByZXZpZXcsIGRldGVjdEJQTSwgcmVtb3ZlVm9jYWxzLCBpc29sYXRlVm9jYWxzIH0gZnJvbSAnQC9zZXJ2aWNlcy9hdWRpb1V0aWxzJzsKaW1wb3J0IHsgc2F2ZVByb2plY3QsIGxvYWRQcm9qZWN0cywgbG9hZFByb2plY3RUcmFja3MsIGRlbGV0ZVByb2plY3QsIHVwZGF0ZVByb2plY3ROYW1lIH0gZnJvbSAnQC9zZXJ2aWNlcy9zdG9yYWdlU2VydmljZSc7CmltcG9ydCB7IEFwcFN0YXRlIH0gZnJvbSAnQC90eXBlcyc7CmltcG9ydCB7IERFRkFVTFRfWk9PTSwgTUFYX1pPT00sIE1JTl9aT09NLCBUUkFDS19DT0xPUlMsIERFRkFVTFRfTEFORV9IRUlHSFQsIE1JTl9MQU5FX0hFSUdIVCwgU05BUF9USFJFU0hPTERfUFgsIExPTkdfUFJFU1NfRFVSQVRJT04sIERSQUdfVEhSRVNIT0xEX1BYIH0gZnJvbSAnQC9jb25zdGFudHMnOwovLyBJY29ucwpjb25zdCBMaWJyYXJ5SWNvbiA9ICgpID0+IF9qc3goInN2ZyIsIHsgY2xhc3NOYW1lOiAidy02IGgtNiIsIGZpbGw6ICJub25lIiwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgc3Ryb2tlV2lkdGg6ICIyIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xMiA2LjI1M3YxM20wLTEzQzEwLjgzMiA1LjQ3NyA5LjI0NiA1IDcuNSA1UzQuMTY4IDUuNDc3IDMgNi4yNTN2MTNDNC4xNjggMTguNDc3IDUuNzU0IDE4IDcuNSAxOHMzLjMzMi40NzcgNC41IDEuMjUzbTAtMTNDMTMuMTY4IDUuNDc3IDE0Ljc1NCA1IDE2LjUgNWMxLjc0NyAwIDMuMzMyLjQ3NyA0LjUgMS4yNTN2MTNDMTkuODMyIDE4LjQ3NyAxOC4yNDcgMTggMTYuNSAxOGMtMS43NDYgMC0zLjMzMi40NzctNC41IDEuMjUzIiB9KSB9KTsKY29uc3QgUGVuY2lsSWNvbiA9ICgpID0+IF9qc3goInN2ZyIsIHsgY2xhc3NOYW1lOiAidy00IGgtNCIsIGZpbGw6ICJub25lIiwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgc3Ryb2tlV2lkdGg6ICIyIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xNS4yMzIgNS4yMzJsMy41MzYgMy41MzZtLTIuMDM2LTUuMDM2YTIuNSAyLjUgMCAxMTMuNTM2IDMuNTM2TDYuNSAyMS4wMzZIM3YtMy41NzJMMTYuNzMyIDMuNzMyeiIgfSkgfSk7CmNvbnN0IENoZWNrSWNvbiA9ICgpID0+IF9qc3goInN2ZyIsIHsgY2xhc3NOYW1lOiAidy00IGgtNCIsIGZpbGw6ICJub25lIiwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgc3Ryb2tlV2lkdGg6ICIyIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk00LjUgMTIuNzVsNiA2IDktMTMuNSIgfSkgfSk7CmNvbnN0IE5ld0RvY0ljb24gPSAoKSA9PiBfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNSBoLTUiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTIgNC41djE1bTcuNS03LjVoLTE1IiB9KSB9KTsKY29uc3QgVHJhc2hJY29uID0gKCkgPT4gX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTE5IDdsLS44NjcgMTIuMTQyQTIgMiAwIDAxMTYuMTM4IDIxSDcuODYyYTIgMiAwIDAxLTEuOTk1LTEuODU4TDUgN201IDR2Nm00LTZ2Nm0xLTEwVjRhMSAxIDAgMDAtMS0xaC00YTEgMSAwIDAwLTEgMXYzTTQgN2gxNiIgfSkgfSk7CmNvbnN0IExvYWRpbmdTcGlubmVyID0gKCkgPT4gX2pzeHMoInN2ZyIsIHsgY2xhc3NOYW1lOiAiYW5pbWF0ZS1zcGluIGgtOCB3LTggdGV4dC1jeWFuLTUwMCIsIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCBmaWxsOiAibm9uZSIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogW19qc3goImNpcmNsZSIsIHsgY2xhc3NOYW1lOiAib3BhY2l0eS0yNSIsIGN4OiAiMTIiLCBjeTogIjEyIiwgcjogIjEwIiwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgc3Ryb2tlV2lkdGg6ICI0IiB9KSwgX2pzeCgicGF0aCIsIHsgY2xhc3NOYW1lOiAib3BhY2l0eS03NSIsIGZpbGw6ICJjdXJyZW50Q29sb3IiLCBkOiAiTTQgMTJhOCA4IDAgMDE4LThWMEM1LjM3MyAwIDAgNS4zNzMgMCAxMmg0em0yIDUuMjkxQTcuOTYyIDcuOTYyIDAgMDE0IDEySDBjMCAzLjA0MiAxLjEzNSA1LjgyNCAzIDcuOTM4bDMtMi42NDd6IiB9KV0gfSk7CmNvbnN0IGZvcm1hdFRpbWUgPSAoc2Vjb25kcykgPT4gewogICAgaWYgKGlzTmFOKHNlY29uZHMpKQogICAgICAgIHJldHVybiAiMC4wMHMiOwogICAgaWYgKHNlY29uZHMgPCA2MCkKICAgICAgICByZXR1cm4gYCR7c2Vjb25kcy50b0ZpeGVkKDIpfXNgOwogICAgY29uc3QgbSA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTsKICAgIGNvbnN0IHMgPSAoc2Vjb25kcyAlIDYwKS50b0ZpeGVkKDIpOwogICAgcmV0dXJuIGAke219bSAke3N9c2A7Cn07CmNvbnN0IEFwcCA9ICgpID0+IHsKICAgIC8vIFN0YXRlCiAgICBjb25zdCBbdHJhY2tzLCBzZXRUcmFja3NdID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW2hpc3RvcnksIHNldEhpc3RvcnldID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW3NlbGVjdGVkVHJhY2tJZCwgc2V0U2VsZWN0ZWRUcmFja0lkXSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgW2lzUGxheWluZywgc2V0SXNQbGF5aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IFtpc1NjcnViYmluZywgc2V0SXNTY3J1YmJpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW2lzUmVjb3JkaW5nLCBzZXRJc1JlY29yZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbY3VycmVudFRpbWUsIHNldEN1cnJlbnRUaW1lXSA9IHVzZVN0YXRlKDApOwogICAgY29uc3QgW3NlbGVjdGlvbiwgc2V0U2VsZWN0aW9uXSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgW2FwcFN0YXRlLCBzZXRBcHBTdGF0ZV0gPSB1c2VTdGF0ZShBcHBTdGF0ZS5JRExFKTsKICAgIGNvbnN0IFtsb2FkRXJyb3IsIHNldExvYWRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFt6b29tLCBzZXRab29tXSA9IHVzZVN0YXRlKERFRkFVTFRfWk9PTSk7CiAgICBjb25zdCBbbGFuZUhlaWdodCwgc2V0TGFuZUhlaWdodF0gPSB1c2VTdGF0ZShERUZBVUxUX0xBTkVfSEVJR0hUKTsKICAgIGNvbnN0IFtzYXZlU3RhdHVzLCBzZXRTYXZlU3RhdHVzXSA9IHVzZVN0YXRlKCdzYXZlZCcpOwogICAgY29uc3QgW2lzQmVhdE1vZGFsT3Blbiwgc2V0QmVhdE1vZGFsT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbaXNFZmZlY3RzTW9kYWxPcGVuLCBzZXRFZmZlY3RzTW9kYWxPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IFtpc0V4cG9ydE1vZGFsT3Blbiwgc2V0RXhwb3J0TW9kYWxPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIC8vIFBlcnNpc3RlbmNlCiAgICBjb25zdCBbY3VycmVudFByb2plY3RJZCwgc2V0Q3VycmVudFByb2plY3RJZF0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtjdXJyZW50UHJvamVjdE5hbWUsIHNldEN1cnJlbnRQcm9qZWN0TmFtZV0gPSB1c2VTdGF0ZSgiIik7CiAgICBjb25zdCBbc2F2ZWRQcm9qZWN0cywgc2V0U2F2ZWRQcm9qZWN0c10gPSB1c2VTdGF0ZShbXSk7CiAgICBjb25zdCBbcmVjZW50UHJvamVjdFByZXZpZXcsIHNldFJlY2VudFByb2plY3RQcmV2aWV3XSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgW3Byb2plY3RUb0RlbGV0ZSwgc2V0UHJvamVjdFRvRGVsZXRlXSA9IHVzZVN0YXRlKG51bGwpOwogICAgLy8gR3VhcmQgdG8gcHJldmVudCBhdXRvc2F2ZSBvdmVyd3JpdGVzIGR1cmluZyBsb2FkaW5nCiAgICBjb25zdCBpZ25vcmVDaGFuZ2VzUmVmID0gdXNlUmVmKGZhbHNlKTsKICAgIGNvbnN0IGlzRGlydHlSZWYgPSB1c2VSZWYoZmFsc2UpOwogICAgLy8gSW5saW5lIFJlbmFtaW5nIFN0YXRlCiAgICBjb25zdCBbZWRpdGluZ1Byb2plY3RJZCwgc2V0RWRpdGluZ1Byb2plY3RJZF0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtlZGl0aW5nTmFtZSwgc2V0RWRpdGluZ05hbWVdID0gdXNlU3RhdGUoIiIpOwogICAgLy8gVmlld3BvcnQgVHJhY2tpbmcKICAgIGNvbnN0IFt2aWV3cG9ydFdpZHRoLCBzZXRWaWV3cG9ydFdpZHRoXSA9IHVzZVN0YXRlKHdpbmRvdy5pbm5lcldpZHRoKTsKICAgIC8vIE5ldyBNb2RlcwogICAgY29uc3QgW2lzVHJpbU1vZGUsIHNldElzVHJpbU1vZGVdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW3RyaW1TdGF0ZSwgc2V0VHJpbVN0YXRlXSA9IHVzZVN0YXRlKG51bGwpOwogICAgLy8gSW50ZXJhY3RpdmUgRmFkZSBNb2RlCiAgICBjb25zdCBbaW50ZXJhY3RpdmVNb2RlLCBzZXRJbnRlcmFjdGl2ZU1vZGVdID0gdXNlU3RhdGUobnVsbCk7CiAgICAvLyBEcmFnZ2luZyBTdGF0ZQogICAgY29uc3QgW2RyYWdnaW5nVHJhY2tJZCwgc2V0RHJhZ2dpbmdUcmFja0lkXSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgbG9uZ1ByZXNzVGltZXJSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCBkcmFnUmVmID0gdXNlUmVmKHsKICAgICAgICBzdGFydFg6IDAsIHN0YXJ0WTogMCwgb2Zmc2V0VGltZTogMCwgdHJhY2tJZDogJycsIGxhc3RQb2ludGVyWDogMCwgbGFzdFBvaW50ZXJZOiAwLAogICAgICAgIGlzVGltZWxpbmVUYXA6IGZhbHNlLCB0aW1lbGluZVN0YXJ0WDogMCwgdGFyZ2V0RWxlbWVudDogbnVsbCwgcG9pbnRlcklkOiAtMSwKICAgICAgICBhdXRvbWF0aW9uSW5kZXg6IC0xCiAgICB9KTsKICAgIGNvbnN0IGxhc3REcmFnUG9zID0gdXNlUmVmKG51bGwpOwogICAgY29uc3QgYXV0b1Njcm9sbFJlZiA9IHVzZVJlZih7IHZ4OiAwLCB2eTogMCB9KTsKICAgIC8vIFBpbmNoIFpvb20gUmVmcwogICAgY29uc3QgYWN0aXZlUG9pbnRlcnMgPSB1c2VSZWYobmV3IE1hcCgpKTsKICAgIGNvbnN0IFtpc1pvb21pbmcsIHNldElzWm9vbWluZ10gPSB1c2VTdGF0ZShmYWxzZSk7IC8vIFRyYWNrIHpvb21pbmcgc3RhdGUgdG8gbG9jayBzY3JvbGwKICAgIGNvbnN0IHBpbmNoU3RhdGUgPSB1c2VSZWYoeyBtb2RlOiBudWxsLCBzdGFydERpc3Q6IDAsIHN0YXJ0RGlzdFg6IDAsIHN0YXJ0RGlzdFk6IDAsIHN0YXJ0Wm9vbTogMCwgc3RhcnRMYW5lSGVpZ2h0OiAwLCBpc0xvY2tlZDogZmFsc2UgfSk7CiAgICBjb25zdCBwZW5kaW5nU2Nyb2xsUmVmID0gdXNlUmVmKG51bGwpOwogICAgLy8gUmVmcwogICAgY29uc3QgYXVkaW9Tb3VyY2VOb2RlcyA9IHVzZVJlZihbXSk7CiAgICBjb25zdCBtZWRpYVJlY29yZGVyUmVmID0gdXNlUmVmKG51bGwpOwogICAgY29uc3Qgc3RhcnRUaW1lUmVmID0gdXNlUmVmKDApOwogICAgY29uc3QgZmlsZUlucHV0UmVmID0gdXNlUmVmKG51bGwpOwogICAgY29uc3QgdGltZWxpbmVSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCBwbGF5aGVhZFJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IHNhdmVUaW1lb3V0UmVmID0gdXNlUmVmKG51bGwpOwogICAgLy8gVHJhY2tzIFJlZiBmb3IgRXZlbnQgSGFuZGxlcnMKICAgIGNvbnN0IHRyYWNrc1JlZiA9IHVzZVJlZih0cmFja3MpOwogICAgdXNlRWZmZWN0KCgpID0+IHsgdHJhY2tzUmVmLmN1cnJlbnQgPSB0cmFja3M7IH0sIFt0cmFja3NdKTsKICAgIGNvbnN0IHVwZGF0ZVRyYWNrID0gKGlkLCB1cGRhdGVzKSA9PiB7CiAgICAgICAgc2V0VHJhY2tzKHByZXYgPT4gcHJldi5tYXAodCA9PiB0LmlkID09PSBpZCA/IHsgLi4udCwgLi4udXBkYXRlcyB9IDogdCkpOwogICAgfTsKICAgIC8vIENhbGN1bGF0ZSBtYXggc2FtcGxlIHJhdGUgZnJvbSB0cmFja3MgZm9yIGV4cG9ydCAob3IgZGVmYXVsdCA0NDEwMCkKICAgIGNvbnN0IHByb2plY3RTYW1wbGVSYXRlID0gUmVhY3QudXNlTWVtbygoKSA9PiB7CiAgICAgICAgaWYgKHRyYWNrcy5sZW5ndGggPT09IDApCiAgICAgICAgICAgIHJldHVybiA0NDEwMDsKICAgICAgICByZXR1cm4gTWF0aC5tYXgoLi4udHJhY2tzLm1hcCh0ID0+IHQuYnVmZmVyLnNhbXBsZVJhdGUpKTsKICAgIH0sIFt0cmFja3NdKTsKICAgIC8vIEtlZXAgUGxheWhlYWQgQ2VudGVyZWQgb24gWm9vbQogICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHsKICAgICAgICBpZiAodGltZWxpbmVSZWYuY3VycmVudCkgewogICAgICAgICAgICBjb25zdCByZWN0ID0gdGltZWxpbmVSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgY29uc3Qgdmlld3BvcnRXID0gcmVjdC53aWR0aDsKICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNlbnRlciBzY3JvbGwgYmFzZWQgb24gUGxheWhlYWQgVGltZQogICAgICAgICAgICBjb25zdCB0YXJnZXRTY3JvbGwgPSAoY3VycmVudFRpbWUgKiB6b29tKSAtICh2aWV3cG9ydFcgLyAyKTsKICAgICAgICAgICAgdGltZWxpbmVSZWYuY3VycmVudC5zY3JvbGxMZWZ0ID0gTWF0aC5tYXgoMCwgdGFyZ2V0U2Nyb2xsKTsKICAgICAgICB9CiAgICB9LCBbem9vbV0pOyAvLyBPbmx5IHdoZW4gem9vbSBjaGFuZ2VzIChub3QgY3VycmVudFRpbWUsIHRvIGF2b2lkIGZpZ2h0aW5nIHNjcm9sbCBkdXJpbmcgcGxheWJhY2spCiAgICAvLyBBdXRvIFNjcm9sbCBMb29wCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGxldCBmcmFtZUlkOwogICAgICAgIGNvbnN0IHNjcm9sbExvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgIGlmIChkcmFnZ2luZ1RyYWNrSWQgJiYgdGltZWxpbmVSZWYuY3VycmVudCAmJiAoYXV0b1Njcm9sbFJlZi5jdXJyZW50LnZ4ICE9PSAwIHx8IGF1dG9TY3JvbGxSZWYuY3VycmVudC52eSAhPT0gMCkpIHsKICAgICAgICAgICAgICAgIHRpbWVsaW5lUmVmLmN1cnJlbnQuc2Nyb2xsTGVmdCArPSBhdXRvU2Nyb2xsUmVmLmN1cnJlbnQudng7CiAgICAgICAgICAgICAgICB0aW1lbGluZVJlZi5jdXJyZW50LnNjcm9sbFRvcCArPSBhdXRvU2Nyb2xsUmVmLmN1cnJlbnQudnk7CiAgICAgICAgICAgICAgICAvLyBJZiBhdXRvLXNjcm9sbGluZywgZm9yY2UgdXBkYXRlIHRyYWNrIHBvc2l0aW9uIGJhc2VkIG9uIGxhc3Qga25vd24gcG9pbnRlciBwb3MKICAgICAgICAgICAgICAgIGlmIChsYXN0RHJhZ1Bvcy5jdXJyZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1RyYWNrRHJhZyhsYXN0RHJhZ1Bvcy5jdXJyZW50LngsIGxhc3REcmFnUG9zLmN1cnJlbnQueSwgZHJhZ2dpbmdUcmFja0lkKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmcmFtZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNjcm9sbExvb3ApOwogICAgICAgIH07CiAgICAgICAgZnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzY3JvbGxMb29wKTsKICAgICAgICByZXR1cm4gKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWVJZCk7CiAgICB9LCBbZHJhZ2dpbmdUcmFja0lkLCB6b29tLCBsYW5lSGVpZ2h0XSk7CiAgICAvLyBEZXJpdmVkIFN0YXRlOiBTbWFydCBTZWxlY3Rpb24KICAgIGNvbnN0IGVmZmVjdGl2ZVNlbGVjdGVkVHJhY2tJZCA9IHNlbGVjdGVkVHJhY2tJZCB8fCAoKCkgPT4gewogICAgICAgIGNvbnN0IGF0UGxheWhlYWQgPSB0cmFja3MuZmlsdGVyKHQgPT4gY3VycmVudFRpbWUgPj0gdC5zdGFydFRpbWUgJiYgY3VycmVudFRpbWUgPCB0LnN0YXJ0VGltZSArIHQuZHVyYXRpb24pOwogICAgICAgIHJldHVybiBhdFBsYXloZWFkLmxlbmd0aCA9PT0gMSA/IGF0UGxheWhlYWRbMF0uaWQgOiBudWxsOwogICAgfSkoKTsKICAgIGNvbnN0IHNlbGVjdGVkVHJhY2sgPSB0cmFja3MuZmluZCh0ID0+IHQuaWQgPT09IGVmZmVjdGl2ZVNlbGVjdGVkVHJhY2tJZCk7CiAgICAvLyBDYWxjdWxhdGUgbWF4RHVyYXRpb24gYW5kIGxheW91dCBtZXRyaWNzCiAgICBjb25zdCBtYXhEdXJhdGlvbiA9IHRyYWNrcy5sZW5ndGggPiAwID8gTWF0aC5tYXgoLi4udHJhY2tzLm1hcCh0ID0+IHQuc3RhcnRUaW1lICsgdC5kdXJhdGlvbikpIDogMDsKICAgIGNvbnN0IG1heExhbmUgPSB0cmFja3MubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLnRyYWNrcy5tYXAodCA9PiB0LmxhbmUpKSA6IDA7CiAgICBjb25zdCB0b3RhbExhbmVzID0gbWF4TGFuZSArIDI7CiAgICAvLyBEZXRlcm1pbmUgUHJvamVjdCBCUE0gKGZyb20gZmlyc3QgdHJhY2sgb3IgZGVmYXVsdCkKICAgIGNvbnN0IHByb2plY3RCcG0gPSB0cmFja3MuZmluZCh0ID0+IHQuYnBtKT8uYnBtIHx8IDEyMDsKICAgIGNvbnN0IGJlYXREdXJhdGlvbiA9IDYwIC8gcHJvamVjdEJwbTsKICAgIC8vIENhbGN1bGF0ZSBkeW5hbWljIG1pbmltdW0gem9vbSB0byBmaXQgZW50aXJlIHByb2plY3QKICAgIGNvbnN0IG1pblpvb20gPSBSZWFjdC51c2VNZW1vKCgpID0+IHsKICAgICAgICBpZiAobWF4RHVyYXRpb24gPD0gMCkKICAgICAgICAgICAgcmV0dXJuIE1JTl9aT09NOwogICAgICAgIGNvbnN0IGZpdFpvb20gPSB2aWV3cG9ydFdpZHRoIC8gbWF4RHVyYXRpb247CiAgICAgICAgcmV0dXJuIE1hdGgubWluKE1JTl9aT09NLCBmaXRab29tKTsKICAgIH0sIFttYXhEdXJhdGlvbiwgdmlld3BvcnRXaWR0aF0pOwogICAgLy8gU3RpY2t5IEF1dG8tWm9vbSBMb2dpYwogICAgY29uc3QgcHJldk1pblpvb21SZWYgPSB1c2VSZWYobWluWm9vbSk7CiAgICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4gewogICAgICAgIGNvbnN0IHByZXZNaW4gPSBwcmV2TWluWm9vbVJlZi5jdXJyZW50OwogICAgICAgIGNvbnN0IGN1cnJlbnRNaW4gPSBtaW5ab29tOwogICAgICAgIGNvbnN0IGlzQXRNaW4gPSBNYXRoLmFicyh6b29tIC0gcHJldk1pbikgPCAocHJldk1pbiAqIDAuMDEpIHx8IHpvb20gPCBwcmV2TWluOwogICAgICAgIGlmICh6b29tIDwgY3VycmVudE1pbikgewogICAgICAgICAgICBzZXRab29tKGN1cnJlbnRNaW4pOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChpc0F0TWluICYmIGN1cnJlbnRNaW4gPCBwcmV2TWluKSB7CiAgICAgICAgICAgIHNldFpvb20oY3VycmVudE1pbik7CiAgICAgICAgfQogICAgICAgIHByZXZNaW5ab29tUmVmLmN1cnJlbnQgPSBjdXJyZW50TWluOwogICAgfSwgW21pblpvb20sIHpvb21dKTsKICAgIC8vIFZpZXdwb3J0IFJlc2l6ZSBPYnNlcnZlcgogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBpZiAodGltZWxpbmVSZWYuY3VycmVudCkgewogICAgICAgICAgICBzZXRWaWV3cG9ydFdpZHRoKHRpbWVsaW5lUmVmLmN1cnJlbnQuY2xpZW50V2lkdGgpOwogICAgICAgIH0KICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihlbnRyaWVzID0+IHsKICAgICAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgZW50cmllcykgewogICAgICAgICAgICAgICAgc2V0Vmlld3BvcnRXaWR0aChlbnRyeS5jb250ZW50UmVjdC53aWR0aCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAodGltZWxpbmVSZWYuY3VycmVudCkKICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aW1lbGluZVJlZi5jdXJyZW50KTsKICAgICAgICByZXR1cm4gKCkgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgfSwgW10pOwogICAgLy8gLS0tIFJFRklORUQgWk9PTSBIQU5ETEVSUyAtLS0KICAgIGNvbnN0IHBlcmZvcm1ab29tID0gdXNlQ2FsbGJhY2soKG5ld1pvb20pID0+IHsKICAgICAgICBjb25zdCBzYWZlWm9vbSA9IE1hdGgubWluKE1BWF9aT09NLCBNYXRoLm1heChtaW5ab29tLCBuZXdab29tKSk7CiAgICAgICAgaWYgKE1hdGguYWJzKHNhZmVab29tIC0gem9vbSkgPCAwLjAwMSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIC8vIEF1dG8tY2xhbXAgUGxheWhlYWQgaWYgYmV5b25kIHRyYWNrcyBvbiBab29tCiAgICAgICAgaWYgKG1heER1cmF0aW9uID4gMCAmJiBjdXJyZW50VGltZSA+IG1heER1cmF0aW9uKSB7CiAgICAgICAgICAgIHNldEN1cnJlbnRUaW1lKG1heER1cmF0aW9uKTsKICAgICAgICB9CiAgICAgICAgc2V0Wm9vbShzYWZlWm9vbSk7CiAgICB9LCBbem9vbSwgbWluWm9vbSwgY3VycmVudFRpbWUsIG1heER1cmF0aW9uXSk7CiAgICBjb25zdCBwZXJmb3JtVmVydGljYWxab29tID0gdXNlQ2FsbGJhY2soKGRlbHRhWSwgc3RhcnRIZWlnaHQpID0+IHsKICAgICAgICBpZiAoIXRpbWVsaW5lUmVmLmN1cnJlbnQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCBjb250YWluZXJIID0gdGltZWxpbmVSZWYuY3VycmVudC5jbGllbnRIZWlnaHQ7CiAgICAgICAgY29uc3Qgc2Vuc2l0aXZpdHkgPSAwLjU7CiAgICAgICAgbGV0IG5ld0hlaWdodCA9IHN0YXJ0SGVpZ2h0ICsgZGVsdGFZICogc2Vuc2l0aXZpdHk7CiAgICAgICAgLy8gQ2xhbXAKICAgICAgICBjb25zdCBtYXhIID0gY29udGFpbmVySDsgLy8gQXQgbGVhc3Qgb25lIHRyYWNrIGZpdHMKICAgICAgICBjb25zdCBtaW5IID0gTUlOX0xBTkVfSEVJR0hUOwogICAgICAgIG5ld0hlaWdodCA9IE1hdGgubWF4KG1pbkgsIE1hdGgubWluKG5ld0hlaWdodCwgbWF4SCkpOwogICAgICAgIC8vIFNtYXJ0IFNuYXA6IElmIGNsb3NlIHRvIHNob3dpbmcgaW50ZWdlciBudW1iZXIgb2YgdHJhY2tzLCBzbmFwIHRvIGl0LgogICAgICAgIC8vIFdlIGNhbGN1bGF0ZSB0YXJnZXQgaGVpZ2h0cyB0aGF0IGZpdCAxLCAyLCAzLi4uIE4gdHJhY2tzIHBlcmZlY3RseS4KICAgICAgICBjb25zdCBtYXhUcmFja3MgPSBNYXRoLmZsb29yKGNvbnRhaW5lckggLyBtaW5IKTsKICAgICAgICBsZXQgc25hcHBlZCA9IG5ld0hlaWdodDsKICAgICAgICBsZXQgaXNTbmFwcGVkID0gZmFsc2U7CiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbWF4VHJhY2tzOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgdGFyZ2V0SCA9IGNvbnRhaW5lckggLyBpOwogICAgICAgICAgICAvLyBUb2xlcmFuY2UgaW5jcmVhc2VzIGZvciBzbWFsbGVyIHRyYWNrIGNvdW50cyAoZWFzaWVyIHRvIHNuYXAgdG8gMSBvciAyIHRyYWNrcykKICAgICAgICAgICAgY29uc3QgdG9sZXJhbmNlID0gMjU7CiAgICAgICAgICAgIGlmIChNYXRoLmFicyhuZXdIZWlnaHQgLSB0YXJnZXRIKSA8IHRvbGVyYW5jZSkgewogICAgICAgICAgICAgICAgc25hcHBlZCA9IHRhcmdldEg7CiAgICAgICAgICAgICAgICBpc1NuYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGlzU25hcHBlZCkKICAgICAgICAgICAgbmV3SGVpZ2h0ID0gc25hcHBlZDsKICAgICAgICBzZXRMYW5lSGVpZ2h0KG5ld0hlaWdodCk7CiAgICB9LCBbXSk7CiAgICAvLyAtLS0gR0xPQkFMIFpPT00gSEFORExFUiAoTW91c2UgKyBUcmFja3BhZCArIFNhZmFyaSBHZXN0dXJlKSAtLS0KICAgIGNvbnN0IHpvb21SZWYgPSB1c2VSZWYoem9vbSk7CiAgICBjb25zdCBsYW5lSGVpZ2h0UmVmID0gdXNlUmVmKGxhbmVIZWlnaHQpOwogICAgLy8gS2VlcCByZWZzIHN5bmNlZAogICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHsgem9vbVJlZi5jdXJyZW50ID0gem9vbTsgfSwgW3pvb21dKTsKICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7IGxhbmVIZWlnaHRSZWYuY3VycmVudCA9IGxhbmVIZWlnaHQ7IH0sIFtsYW5lSGVpZ2h0XSk7CiAgICAvLyBVc2UgYSBSZWYgZm9yIHBlcmZvcm1ab29tIHRvIGVuc3VyZSBldmVudCBsaXN0ZW5lcnMgYWx3YXlzIGNhbGwgdGhlIGxhdGVzdCB2ZXJzaW9uIHdpdGggZnJlc2ggY2xvc3VyZSB2YWx1ZXMKICAgIGNvbnN0IHBlcmZvcm1ab29tUmVmID0gdXNlUmVmKHBlcmZvcm1ab29tKTsKICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7IHBlcmZvcm1ab29tUmVmLmN1cnJlbnQgPSBwZXJmb3JtWm9vbTsgfSwgW3BlcmZvcm1ab29tXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGNvbnN0IGhhbmRsZUdsb2JhbFdoZWVsID0gKGUpID0+IHsKICAgICAgICAgICAgLy8gVHJhY2twYWQgUGluY2ggdHlwaWNhbGx5IGZpcmVzIFdoZWVsIHdpdGggY3RybEtleSBvbiBDaHJvbWUvRWRnZQogICAgICAgICAgICAvLyBNb3VzZSBXaGVlbCBab29tIHR5cGljYWxseSByZXF1aXJlcyBDdHJsCiAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgJiYgIWUubWV0YUtleSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFpvb20gPSB6b29tUmVmLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50TGFuZUhlaWdodCA9IGxhbmVIZWlnaHRSZWYuY3VycmVudDsKICAgICAgICAgICAgICAgIC8vIFRyYWNrcGFkczogZGVsdGFNb2RlIDAgKFBpeGVsKSwgc21hbGwgZGVsdGFZLgogICAgICAgICAgICAgICAgLy8gTWljZTogZGVsdGFNb2RlIDEgKExpbmUpLCBsYXJnZSBkZWx0YVkuCiAgICAgICAgICAgICAgICBjb25zdCBpc1RyYWNrcGFkID0gZS5kZWx0YU1vZGUgPT09IDA7CiAgICAgICAgICAgICAgICAvLyBIb3Jpem9udGFsIFBpbmNoIChUaW1lbGluZSkgaXMgZGVmYXVsdCBiZWhhdmlvcgogICAgICAgICAgICAgICAgLy8gVmVydGljYWwgUGluY2g/IEJyb3dzZXJzIGRvbid0IGRpc3RpbmN0IHdlbGwuIAogICAgICAgICAgICAgICAgLy8gV2UnbGwgc3VwcG9ydCBTaGlmdCtQaW5jaCBmb3IgVmVydGljYWwgTGF5ZXIgWm9vbQogICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAvLyBWZXJ0aWNhbCBab29tIChMYXllcnMpCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSAtZS5kZWx0YVk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSBpc1RyYWNrcGFkID8gMy4wIDogMC41OwogICAgICAgICAgICAgICAgICAgIHBlcmZvcm1WZXJ0aWNhbFpvb20oLWRlbHRhICogc3BlZWQsIGN1cnJlbnRMYW5lSGVpZ2h0KTsgLy8gSW52ZXJ0IGRlbHRhIGZvciBpbnR1aXRpdmUgZXhwYW5kCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBIb3Jpem9udGFsIFpvb20gKFRpbWVsaW5lKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gLWUuZGVsdGFZOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IGlzVHJhY2twYWQgPyAwLjAxNSA6IDAuMDAxOwogICAgICAgICAgICAgICAgICAgIC8vIE11bHRpcGxpY2F0aXZlIFpvb20gZm9yIHNtb290aCBmZWVsCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSAxICsgKGRlbHRhICogZmFjdG9yKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdab29tID0gY3VycmVudFpvb20gKiBzY2FsZTsKICAgICAgICAgICAgICAgICAgICBwZXJmb3JtWm9vbVJlZi5jdXJyZW50KG5ld1pvb20pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUuYWx0S2V5KSB7CiAgICAgICAgICAgICAgICAvLyBDbGFzc2ljIERlc2t0b3AgREFXIFZlcnRpY2FsIFpvb20gKEFsdCArIFNjcm9sbCkKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMYW5lSGVpZ2h0ID0gbGFuZUhlaWdodFJlZi5jdXJyZW50OwogICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBlLmRlbHRhWTsKICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVkID0gZS5kZWx0YU1vZGUgPT09IDEgPyAwLjUgOiAyLjA7CiAgICAgICAgICAgICAgICBwZXJmb3JtVmVydGljYWxab29tKGRlbHRhICogc3BlZWQsIGN1cnJlbnRMYW5lSGVpZ2h0KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gU2FmYXJpIEdlc3R1cmUgU3VwcG9ydCAoTWFjIFRyYWNrcGFkIG5hdGl2ZSBwaW5jaCkKICAgICAgICBjb25zdCBoYW5kbGVHZXN0dXJlU3RhcnQgPSAoZSkgPT4gewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHBpbmNoU3RhdGUuY3VycmVudC5zdGFydFpvb20gPSB6b29tUmVmLmN1cnJlbnQ7CiAgICAgICAgICAgIHBpbmNoU3RhdGUuY3VycmVudC5zdGFydExhbmVIZWlnaHQgPSBsYW5lSGVpZ2h0UmVmLmN1cnJlbnQ7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBoYW5kbGVHZXN0dXJlQ2hhbmdlID0gKGUpID0+IHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBjb25zdCBzY2FsZSA9IGUuc2NhbGU7CiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7CiAgICAgICAgICAgICAgICAvLyBWZXJ0aWNhbCBab29tIG9uIE1hYyBUcmFja3BhZCArIFNoaWZ0CiAgICAgICAgICAgICAgICBjb25zdCBzdGFydEggPSBwaW5jaFN0YXRlLmN1cnJlbnQuc3RhcnRMYW5lSGVpZ2h0OwogICAgICAgICAgICAgICAgLy8gSGV1cmlzdGljOiBtYXAgc2NhbGUgdG8gYWRkaXRpdmUgaGVpZ2h0CiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IChzY2FsZSAtIDEpICogMjAwOwogICAgICAgICAgICAgICAgcGVyZm9ybVZlcnRpY2FsWm9vbShkZWx0YSwgc3RhcnRIKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFN0YW5kYXJkIFBpbmNoIC0+IFRpbWVsaW5lIFpvb20KICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0WiA9IHBpbmNoU3RhdGUuY3VycmVudC5zdGFydFpvb207CiAgICAgICAgICAgICAgICBjb25zdCBuZXdaID0gc3RhcnRaICogc2NhbGU7CiAgICAgICAgICAgICAgICBwZXJmb3JtWm9vbVJlZi5jdXJyZW50KG5ld1opOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBjb25zdCBwcmV2ZW50R2VzdHVyZSA9IChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgaGFuZGxlR2xvYmFsV2hlZWwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7CiAgICAgICAgLy8gTm9uLXN0YW5kYXJkIFNhZmFyaSBldmVudHMgbmVlZCBjYXN0IG9yIGlnbm9yZSBUUyBlcnJvcgogICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZ2VzdHVyZXN0YXJ0JywgaGFuZGxlR2VzdHVyZVN0YXJ0KTsKICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2dlc3R1cmVjaGFuZ2UnLCBoYW5kbGVHZXN0dXJlQ2hhbmdlKTsKICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2dlc3R1cmVlbmQnLCBwcmV2ZW50R2VzdHVyZSk7CiAgICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgaGFuZGxlR2xvYmFsV2hlZWwpOwogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdnZXN0dXJlc3RhcnQnLCBoYW5kbGVHZXN0dXJlU3RhcnQpOwogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdnZXN0dXJlY2hhbmdlJywgaGFuZGxlR2VzdHVyZUNoYW5nZSk7CiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2dlc3R1cmVlbmQnLCBwcmV2ZW50R2VzdHVyZSk7CiAgICAgICAgfTsKICAgIH0sIFtdKTsgLy8gRW1wdHkgZGVwIGFycmF5OiBzdGFibGUgbGlzdGVuZXIKICAgIC8vIEhlbHBlcjogU21hcnQgSW5zZXJ0aW9uIFBvaW50IExvZ2ljCiAgICBjb25zdCBnZXRTbWFydEluc2VydGlvblBvaW50ID0gKG5ld0R1cmF0aW9uKSA9PiB7CiAgICAgICAgY29uc3QgZGVmYXVsdExhbmUgPSB0cmFja3MubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLnRyYWNrcy5tYXAodCA9PiB0LmxhbmUpKSArIDEgOiAwOwogICAgICAgIGNvbnN0IGZhbGxiYWNrID0geyBsYW5lOiBkZWZhdWx0TGFuZSwgc3RhcnRUaW1lOiBjdXJyZW50VGltZSB9OwogICAgICAgIC8vIDEuIElzIGEgdHJhY2sgc2VsZWN0ZWQ/CiAgICAgICAgaWYgKCFlZmZlY3RpdmVTZWxlY3RlZFRyYWNrSWQpCiAgICAgICAgICAgIHJldHVybiBmYWxsYmFjazsKICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRyYWNrcy5maW5kKHQgPT4gdC5pZCA9PT0gZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkKTsKICAgICAgICBpZiAoIXNlbGVjdGVkKQogICAgICAgICAgICByZXR1cm4gZmFsbGJhY2s7CiAgICAgICAgY29uc3QgdGhyZXNob2xkID0gMC4xOyAvLyAxMDBtcyB0b2xlcmFuY2UgZm9yICJhdCBzdGFydC9lbmQiCiAgICAgICAgLy8gMi4gQ2hlY2sgIkF0IEVuZCIgLT4gQXBwZW5kCiAgICAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnRUaW1lIC0gKHNlbGVjdGVkLnN0YXJ0VGltZSArIHNlbGVjdGVkLmR1cmF0aW9uKSkgPCB0aHJlc2hvbGQpIHsKICAgICAgICAgICAgY29uc3QgcHJvcG9zZWRTdGFydCA9IHNlbGVjdGVkLnN0YXJ0VGltZSArIHNlbGVjdGVkLmR1cmF0aW9uOwogICAgICAgICAgICBjb25zdCBwcm9wb3NlZEVuZCA9IHByb3Bvc2VkU3RhcnQgKyBuZXdEdXJhdGlvbjsKICAgICAgICAgICAgY29uc3QgaGFzQ29sbGlzaW9uID0gdHJhY2tzLnNvbWUodCA9PiB0LmxhbmUgPT09IHNlbGVjdGVkLmxhbmUgJiYKICAgICAgICAgICAgICAgIHQuaWQgIT09IHNlbGVjdGVkLmlkICYmCiAgICAgICAgICAgICAgICB0LnN0YXJ0VGltZSA8IHByb3Bvc2VkRW5kICYmCiAgICAgICAgICAgICAgICAodC5zdGFydFRpbWUgKyB0LmR1cmF0aW9uKSA+IHByb3Bvc2VkU3RhcnQpOwogICAgICAgICAgICBpZiAoIWhhc0NvbGxpc2lvbikgewogICAgICAgICAgICAgICAgcmV0dXJuIHsgbGFuZTogc2VsZWN0ZWQubGFuZSwgc3RhcnRUaW1lOiBwcm9wb3NlZFN0YXJ0IH07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gMy4gQ2hlY2sgIkF0IFN0YXJ0IiAtPiBQcmVwZW5kCiAgICAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnRUaW1lIC0gc2VsZWN0ZWQuc3RhcnRUaW1lKSA8IHRocmVzaG9sZCkgewogICAgICAgICAgICBjb25zdCBwcm9wb3NlZFN0YXJ0ID0gc2VsZWN0ZWQuc3RhcnRUaW1lIC0gbmV3RHVyYXRpb247CiAgICAgICAgICAgIGNvbnN0IHByb3Bvc2VkRW5kID0gc2VsZWN0ZWQuc3RhcnRUaW1lOwogICAgICAgICAgICBpZiAocHJvcG9zZWRTdGFydCA+PSAwKSB7CiAgICAgICAgICAgICAgICBjb25zdCBoYXNDb2xsaXNpb24gPSB0cmFja3Muc29tZSh0ID0+IHQubGFuZSA9PT0gc2VsZWN0ZWQubGFuZSAmJgogICAgICAgICAgICAgICAgICAgIHQuaWQgIT09IHNlbGVjdGVkLmlkICYmCiAgICAgICAgICAgICAgICAgICAgdC5zdGFydFRpbWUgPCBwcm9wb3NlZEVuZCAmJgogICAgICAgICAgICAgICAgICAgICh0LnN0YXJ0VGltZSArIHQuZHVyYXRpb24pID4gcHJvcG9zZWRTdGFydCk7CiAgICAgICAgICAgICAgICBpZiAoIWhhc0NvbGxpc2lvbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGxhbmU6IHNlbGVjdGVkLmxhbmUsIHN0YXJ0VGltZTogcHJvcG9zZWRTdGFydCB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxsYmFjazsKICAgIH07CiAgICBjb25zdCBoYW5kbGVGaWxlVXBsb2FkID0gYXN5bmMgKGUpID0+IHsKICAgICAgICBjb25zdCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzOwogICAgICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgc2V0QXBwU3RhdGUoQXBwU3RhdGUuTE9BRElORyk7CiAgICAgICAgcHVzaEhpc3RvcnkoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBuZXdUcmFja3MgPSBbXTsKICAgICAgICAgICAgbGV0IGJhc2VJbnNlcnRpb24gPSBudWxsOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZmlsZXNbaV07CiAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWQgPSBhd2FpdCBkZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIpOwogICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBiYXNlSW5zZXJ0aW9uID0gZ2V0U21hcnRJbnNlcnRpb25Qb2ludChkZWNvZGVkLmR1cmF0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCB0cmFja05hbWUgPSBmaWxlLm5hbWUuc3Vic3RyaW5nKDAsIDE1KTsKICAgICAgICAgICAgICAgIGxldCBkZXRlY3RlZEJwbSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnBtID0gYXdhaXQgZGV0ZWN0QlBNKGRlY29kZWQpOwogICAgICAgICAgICAgICAgICAgIGlmIChicG0gPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRldGVjdGVkQnBtID0gYnBtOwogICAgICAgICAgICAgICAgICAgICAgICB0cmFja05hbWUgPSBgJHt0cmFja05hbWV9ICgke2JwbX0gQlBNKWA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGJwbUVycikgeyB9CiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRMYW5lID0gYmFzZUluc2VydGlvbiA/IGJhc2VJbnNlcnRpb24ubGFuZSArIGkgOiAodHJhY2tzLmxlbmd0aCA+IDAgPyBNYXRoLm1heCguLi50cmFja3MubWFwKHQgPT4gdC5sYW5lKSkgKyAxICsgaSA6IGkpOwogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGltZSA9IGJhc2VJbnNlcnRpb24gPyBiYXNlSW5zZXJ0aW9uLnN0YXJ0VGltZSA6IGN1cnJlbnRUaW1lOwogICAgICAgICAgICAgICAgbmV3VHJhY2tzLnB1c2goewogICAgICAgICAgICAgICAgICAgIGlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSksCiAgICAgICAgICAgICAgICAgICAgbmFtZTogdHJhY2tOYW1lLAogICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogZGVjb2RlZCwKICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWU6IHRhcmdldFRpbWUsIHRyaW1TdGFydDogMCwKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogZGVjb2RlZC5kdXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICBsYW5lOiB0YXJnZXRMYW5lLAogICAgICAgICAgICAgICAgICAgIHZvbHVtZTogMS4wLCBpc011dGVkOiBmYWxzZSwgaXNTb2xvOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogVFJBQ0tfQ09MT1JTW3RhcmdldExhbmUgJSBUUkFDS19DT0xPUlMubGVuZ3RoXSwKICAgICAgICAgICAgICAgICAgICBicG06IGRldGVjdGVkQnBtCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZXRUcmFja3MocHJldiA9PiBbLi4ucHJldiwgLi4ubmV3VHJhY2tzXSk7CiAgICAgICAgICAgIGlmIChuZXdUcmFja3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRUcmFja0lkKG5ld1RyYWNrc1tuZXdUcmFja3MubGVuZ3RoIC0gMV0uaWQpOwogICAgICAgICAgICAgICAgc2V0SXNUcmltTW9kZShmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2V0QXBwU3RhdGUoQXBwU3RhdGUuRURJVElORyk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgICBzZXRBcHBTdGF0ZShBcHBTdGF0ZS5FUlJPUik7CiAgICAgICAgfQogICAgICAgIGlmIChmaWxlSW5wdXRSZWYuY3VycmVudCkKICAgICAgICAgICAgZmlsZUlucHV0UmVmLmN1cnJlbnQudmFsdWUgPSAnJzsKICAgIH07CiAgICBjb25zdCBwdXNoSGlzdG9yeSA9ICgpID0+IHsKICAgICAgICBzZXRIaXN0b3J5KHByZXYgPT4gewogICAgICAgICAgICBjb25zdCBuZXdIaXN0b3J5ID0gWy4uLnByZXYsIHRyYWNrc107CiAgICAgICAgICAgIGlmIChuZXdIaXN0b3J5Lmxlbmd0aCA+IDIwKQogICAgICAgICAgICAgICAgbmV3SGlzdG9yeS5zaGlmdCgpOwogICAgICAgICAgICByZXR1cm4gbmV3SGlzdG9yeTsKICAgICAgICB9KTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVVbmRvID0gKCkgPT4gewogICAgICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA9PT0gMCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHByZXZUcmFja3MgPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoIC0gMV07CiAgICAgICAgc2V0VHJhY2tzKHByZXZUcmFja3MpOwogICAgICAgIHNldEhpc3RvcnkocHJldiA9PiBwcmV2LnNsaWNlKDAsIC0xKSk7CiAgICAgICAgc3RvcFBsYXliYWNrKCk7CiAgICAgICAgc2V0SXNUcmltTW9kZShmYWxzZSk7CiAgICAgICAgc2V0VHJpbVN0YXRlKG51bGwpOwogICAgICAgIHNldEludGVyYWN0aXZlTW9kZShudWxsKTsKICAgIH07CiAgICBjb25zdCBzdG9wUGxheWJhY2sgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICAgICAgYXVkaW9Tb3VyY2VOb2Rlcy5jdXJyZW50LmZvckVhY2gobm9kZSA9PiB7IHRyeSB7CiAgICAgICAgICAgIG5vZGUuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgeyB9IH0pOwogICAgICAgIGF1ZGlvU291cmNlTm9kZXMuY3VycmVudCA9IFtdOwogICAgICAgIHNldElzUGxheWluZyhmYWxzZSk7CiAgICB9LCBbXSk7CiAgICAvLyAtLS0gUExBWUJBQ0sgTE9PUCAtLS0KICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKCFpc1BsYXlpbmcgfHwgaXNTY3J1YmJpbmcpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBsZXQgYW5pbWF0aW9uRnJhbWVJZDsKICAgICAgICBjb25zdCBjdHggPSBnZXRBdWRpb0NvbnRleHQoKTsKICAgICAgICBjb25zdCBsb29wID0gKCkgPT4gewogICAgICAgICAgICBjb25zdCBlbGFwc2VkID0gY3R4LmN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lUmVmLmN1cnJlbnQ7CiAgICAgICAgICAgIHNldEN1cnJlbnRUaW1lKGVsYXBzZWQpOwogICAgICAgICAgICBpZiAodGltZWxpbmVSZWYuY3VycmVudCkgewogICAgICAgICAgICAgICAgY29uc3QgcGxheWhlYWRYID0gZWxhcHNlZCAqIHpvb207CiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXJXID0gdGltZWxpbmVSZWYuY3VycmVudC5jbGllbnRXaWR0aDsKICAgICAgICAgICAgICAgIGNvbnN0IGhhbGZTY3JlZW4gPSBjb250YWluZXJXIC8gMjsKICAgICAgICAgICAgICAgIGlmIChwbGF5aGVhZFggPiBoYWxmU2NyZWVuKSB7CiAgICAgICAgICAgICAgICAgICAgdGltZWxpbmVSZWYuY3VycmVudC5zY3JvbGxMZWZ0ID0gcGxheWhlYWRYIC0gaGFsZlNjcmVlbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRpbWVsaW5lUmVmLmN1cnJlbnQuc2Nyb2xsTGVmdCA9IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGVsYXBzZWQgPj0gbWF4RHVyYXRpb24gJiYgIWlzUmVjb3JkaW5nKSB7CiAgICAgICAgICAgICAgICBzdG9wUGxheWJhY2soKTsKICAgICAgICAgICAgICAgIHNldEN1cnJlbnRUaW1lKDApOwogICAgICAgICAgICAgICAgaWYgKHRpbWVsaW5lUmVmLmN1cnJlbnQpCiAgICAgICAgICAgICAgICAgICAgdGltZWxpbmVSZWYuY3VycmVudC5zY3JvbGxMZWZ0ID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7CiAgICAgICAgcmV0dXJuICgpID0+IGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lSWQpOwogICAgfSwgW2lzUGxheWluZywgaXNTY3J1YmJpbmcsIG1heER1cmF0aW9uLCB6b29tLCBzdG9wUGxheWJhY2ssIGlzUmVjb3JkaW5nXSk7CiAgICBjb25zdCBoYW5kbGVQbGF5UGF1c2UgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgY3R4ID0gZ2V0QXVkaW9Db250ZXh0KCk7CiAgICAgICAgaWYgKGN0eC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpCiAgICAgICAgICAgIGF3YWl0IGN0eC5yZXN1bWUoKTsKICAgICAgICBpZiAoaXNQbGF5aW5nKSB7CiAgICAgICAgICAgIHN0b3BQbGF5YmFjaygpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgc3RvcFBsYXliYWNrKCk7CiAgICAgICAgICAgIGNvbnN0IG5vdyA9IGN0eC5jdXJyZW50VGltZTsKICAgICAgICAgICAgc3RhcnRUaW1lUmVmLmN1cnJlbnQgPSBub3cgLSBjdXJyZW50VGltZTsKICAgICAgICAgICAgdHJhY2tzLmZvckVhY2godHJhY2sgPT4gewogICAgICAgICAgICAgICAgaWYgKHRyYWNrLmlzTXV0ZWQpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgdHJhY2tTdGFydCA9IHRyYWNrLnN0YXJ0VGltZTsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGltZSA+IHRyYWNrU3RhcnQgKyB0cmFjay5kdXJhdGlvbikKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICBsZXQgc3RhcnRPZmZzZXQgPSAwOwogICAgICAgICAgICAgICAgbGV0IHNjaGVkdWxlVGltZSA9IDA7CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRpbWUgPCB0cmFja1N0YXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVUaW1lID0gbm93ICsgKHRyYWNrU3RhcnQgLSBjdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRPZmZzZXQgPSAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVUaW1lID0gbm93OwogICAgICAgICAgICAgICAgICAgIHN0YXJ0T2Zmc2V0ID0gY3VycmVudFRpbWUgLSB0cmFja1N0YXJ0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOwogICAgICAgICAgICAgICAgc291cmNlLmJ1ZmZlciA9IHRyYWNrLmJ1ZmZlcjsKICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBMb29waW5nCiAgICAgICAgICAgICAgICBpZiAodHJhY2suaXNMb29waW5nKSB7CiAgICAgICAgICAgICAgICAgICAgc291cmNlLmxvb3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHNvdXJjZS5sb29wU3RhcnQgPSAwOwogICAgICAgICAgICAgICAgICAgIHNvdXJjZS5sb29wRW5kID0gdHJhY2suYnVmZmVyLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgZ2FpbiA9IGN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgICAgICBnYWluLmdhaW4udmFsdWUgPSB0cmFjay52b2x1bWU7CiAgICAgICAgICAgICAgICAvLyBBcHBseSBBdXRvbWF0aW9uIEN1cnZlCiAgICAgICAgICAgICAgICBpZiAodHJhY2sudm9sdW1lQXV0b21hdGlvbiAmJiB0cmFjay52b2x1bWVBdXRvbWF0aW9uLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwb2ludHMgPSBbLi4udHJhY2sudm9sdW1lQXV0b21hdGlvbl0uc29ydCgoYSwgYikgPT4gYS50aW1lIC0gYi50aW1lKTsKICAgICAgICAgICAgICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUocG9pbnRzWzBdLnZhbHVlLCBNYXRoLm1heCgwLCBzY2hlZHVsZVRpbWUgKyBwb2ludHNbMF0udGltZSkpOwogICAgICAgICAgICAgICAgICAgIHBvaW50cy5mb3JFYWNoKChwLCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9pbnRUaW1lID0gc2NoZWR1bGVUaW1lICsgcC50aW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50VGltZSA+PSBub3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUocC52YWx1ZSwgcG9pbnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc291cmNlLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgICAgICAgICBnYWluLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTsKICAgICAgICAgICAgICAgIGlmIChzdGFydE9mZnNldCA+PSAwICYmIChzdGFydE9mZnNldCA8IHRyYWNrLmR1cmF0aW9uIHx8IHRyYWNrLmlzTG9vcGluZykpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidWZmZXJPZmZzZXQgPSAodHJhY2sudHJpbVN0YXJ0ICsgc3RhcnRPZmZzZXQpICUgdHJhY2suYnVmZmVyLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uVG9QbGF5ID0gdHJhY2suZHVyYXRpb24gLSBzdGFydE9mZnNldDsKICAgICAgICAgICAgICAgICAgICBpZiAoZHVyYXRpb25Ub1BsYXkgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5zdGFydChzY2hlZHVsZVRpbWUsIGJ1ZmZlck9mZnNldCwgdHJhY2suaXNMb29waW5nID8gZHVyYXRpb25Ub1BsYXkgOiBNYXRoLm1pbihkdXJhdGlvblRvUGxheSwgdHJhY2suYnVmZmVyLmR1cmF0aW9uIC0gdHJhY2sudHJpbVN0YXJ0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvU291cmNlTm9kZXMuY3VycmVudC5wdXNoKHNvdXJjZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2V0SXNQbGF5aW5nKHRydWUpOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVUb2dnbGVSZWNvcmQgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgaWYgKGlzUmVjb3JkaW5nKSB7CiAgICAgICAgICAgIGlmIChtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQgJiYgbWVkaWFSZWNvcmRlclJlZi5jdXJyZW50LnN0YXRlICE9PSAnaW5hY3RpdmUnKSB7CiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNldElzUmVjb3JkaW5nKGZhbHNlKTsKICAgICAgICAgICAgc3RvcFBsYXliYWNrKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyBhdWRpbzogdHJ1ZSB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihzdHJlYW0pOwogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlclJlZi5jdXJyZW50ID0gbWVkaWFSZWNvcmRlcjsKICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rcyA9IFtdOwogICAgICAgICAgICAgICAgY29uc3QgcmVjb3JkU3RhcnRUaW1lID0gY3VycmVudFRpbWU7CiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2h1bmtzLnB1c2goZS5kYXRhKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLm9uc3RvcCA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoY2h1bmtzLCB7IHR5cGU6ICdhdWRpby93ZWJtJyB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0NvbnRleHQgPSBnZXRBdWRpb0NvbnRleHQoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9IGF3YWl0IGF1ZGlvQ29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhbmUgPSB0cmFja3NSZWYuY3VycmVudC5sZW5ndGggPiAwID8gTWF0aC5tYXgoLi4udHJhY2tzUmVmLmN1cnJlbnQubWFwKHQgPT4gdC5sYW5lKSkgKyAxIDogMDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUcmFjayA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYFJlY29yZGluZyAke3RyYWNrc1JlZi5jdXJyZW50Lmxlbmd0aCArIDF9YCwKICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiBhdWRpb0J1ZmZlciwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lOiByZWNvcmRTdGFydFRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaW1TdGFydDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGF1ZGlvQnVmZmVyLmR1cmF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBsYW5lOiBsYW5lLAogICAgICAgICAgICAgICAgICAgICAgICB2b2x1bWU6IDEuMCwKICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXRlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGlzU29sbzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBUUkFDS19DT0xPUlNbbGFuZSAlIFRSQUNLX0NPTE9SUy5sZW5ndGhdCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBwdXNoSGlzdG9yeSgpOwogICAgICAgICAgICAgICAgICAgIHNldFRyYWNrcyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdUcmFja10pOwogICAgICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkVHJhY2tJZChuZXdUcmFjay5pZCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgpOwogICAgICAgICAgICAgICAgc2V0SXNSZWNvcmRpbmcodHJ1ZSk7CiAgICAgICAgICAgICAgICBpZiAoIWlzUGxheWluZykgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZVBsYXlQYXVzZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGFjY2Vzc2luZyBtaWNyb3Bob25lOiIsIGVycik7CiAgICAgICAgICAgICAgICBhbGVydCgiQ291bGQgbm90IGFjY2VzcyBtaWNyb3Bob25lLiIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIC8vIC0tLSBJbnRlcmFjdGlvbiBIYW5kbGVycyAtLS0KICAgIGNvbnN0IGhhbmRsZVRpbWVsaW5lU2Nyb2xsID0gKGUpID0+IHsKICAgICAgICAvLyBOby1vcCBmb3Igbm93IHVubGVzcyB3ZSB0cmFjayBzY3JvbGxpbmcgZm9yIG90aGVyIGZlYXR1cmVzCiAgICB9OwogICAgY29uc3QgdXBkYXRlUGxheWhlYWQgPSAoY2xpZW50WCkgPT4gewogICAgICAgIGlmICghdGltZWxpbmVSZWYuY3VycmVudCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHJlY3QgPSB0aW1lbGluZVJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIGNvbnN0IHJlbGF0aXZlWCA9IGNsaWVudFggLSByZWN0LmxlZnQgKyB0aW1lbGluZVJlZi5jdXJyZW50LnNjcm9sbExlZnQ7CiAgICAgICAgbGV0IG5ld1RpbWUgPSBNYXRoLm1heCgwLCByZWxhdGl2ZVggLyB6b29tKTsKICAgICAgICBjb25zdCBzbmFwU2Vjb25kcyA9IFNOQVBfVEhSRVNIT0xEX1BYIC8gem9vbTsKICAgICAgICBsZXQgY2xvc2VzdFNuYXBUaW1lID0gLTE7CiAgICAgICAgbGV0IG1pbkRpZmYgPSBJbmZpbml0eTsKICAgICAgICBpZiAobmV3VGltZSA8IHNuYXBTZWNvbmRzKSB7CiAgICAgICAgICAgIGNsb3Nlc3RTbmFwVGltZSA9IDA7CiAgICAgICAgICAgIG1pbkRpZmYgPSBuZXdUaW1lOwogICAgICAgIH0KICAgICAgICB0cmFja3MuZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB0LnN0YXJ0VGltZTsKICAgICAgICAgICAgY29uc3QgZW5kID0gdC5zdGFydFRpbWUgKyB0LmR1cmF0aW9uOwogICAgICAgICAgICBjb25zdCBkaWZmU3RhcnQgPSBNYXRoLmFicyhuZXdUaW1lIC0gc3RhcnQpOwogICAgICAgICAgICBpZiAoZGlmZlN0YXJ0IDwgc25hcFNlY29uZHMgJiYgZGlmZlN0YXJ0IDwgbWluRGlmZikgewogICAgICAgICAgICAgICAgY2xvc2VzdFNuYXBUaW1lID0gc3RhcnQ7CiAgICAgICAgICAgICAgICBtaW5EaWZmID0gZGlmZlN0YXJ0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGRpZmZFbmQgPSBNYXRoLmFicyhuZXdUaW1lIC0gZW5kKTsKICAgICAgICAgICAgaWYgKGRpZmZFbmQgPCBzbmFwU2Vjb25kcyAmJiBkaWZmRW5kIDwgbWluRGlmZikgewogICAgICAgICAgICAgICAgY2xvc2VzdFNuYXBUaW1lID0gZW5kOwogICAgICAgICAgICAgICAgbWluRGlmZiA9IGRpZmZFbmQ7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoY2xvc2VzdFNuYXBUaW1lICE9PSAtMSkgewogICAgICAgICAgICBpZiAoTWF0aC5hYnMobmV3VGltZSAtIGNsb3Nlc3RTbmFwVGltZSkgPiAwLjAwMSAmJiBuYXZpZ2F0b3IudmlicmF0ZSkKICAgICAgICAgICAgICAgIG5hdmlnYXRvci52aWJyYXRlKDUpOwogICAgICAgICAgICBuZXdUaW1lID0gY2xvc2VzdFNuYXBUaW1lOwogICAgICAgIH0KICAgICAgICBzZXRDdXJyZW50VGltZShuZXdUaW1lKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVQbGF5aGVhZFBvaW50ZXJEb3duID0gKGUpID0+IHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnN0b3BQcm9wYWdhdGlvbigpOyBzZXRJc1NjcnViYmluZyh0cnVlKTsgc3RvcFBsYXliYWNrKCk7IGUudGFyZ2V0LnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTsgfTsKICAgIGNvbnN0IGhhbmRsZVBsYXloZWFkUG9pbnRlck1vdmUgPSAoZSkgPT4geyBpZiAoIWlzU2NydWJiaW5nKQogICAgICAgIHJldHVybjsgZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnN0b3BQcm9wYWdhdGlvbigpOyB1cGRhdGVQbGF5aGVhZChlLmNsaWVudFgpOyB9OwogICAgY29uc3QgaGFuZGxlUGxheWhlYWRQb2ludGVyVXAgPSAoZSkgPT4geyBpZiAoaXNTY3J1YmJpbmcpIHsKICAgICAgICBzZXRJc1NjcnViYmluZyhmYWxzZSk7CiAgICAgICAgaWYgKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgZS50YXJnZXQuaGFzUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpKSB7CiAgICAgICAgICAgIGUudGFyZ2V0LnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7CiAgICAgICAgfQogICAgfSB9OwogICAgY29uc3QgaGFuZGxlVGltZWxpbmVQb2ludGVyRG93biA9IChlKSA9PiB7CiAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy50cmFjay1jbGlwJykpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmZhZGUtaGFuZGxlJykpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplID4gMSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGlmIChpc1BsYXlpbmcpCiAgICAgICAgICAgIHN0b3BQbGF5YmFjaygpOwogICAgICAgIHNldFNlbGVjdGVkVHJhY2tJZChudWxsKTsKICAgICAgICBzZXRJc1RyaW1Nb2RlKGZhbHNlKTsKICAgICAgICBkcmFnUmVmLmN1cnJlbnQuaXNUaW1lbGluZVRhcCA9IHRydWU7CiAgICAgICAgZHJhZ1JlZi5jdXJyZW50LnRpbWVsaW5lU3RhcnRYID0gZS5jbGllbnRYOwogICAgfTsKICAgIC8vIC0tLSBUcmFjayBEcmFnZ2luZyBMb2dpYyAtLS0KICAgIGNvbnN0IGhhbmRsZVRyYWNrUG9pbnRlckRvd24gPSAoZSwgdHJhY2spID0+IHsKICAgICAgICBpZiAoYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplID4gMSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgLy8gQXV0b21hdGlvbiBNb2RlIExvZ2ljCiAgICAgICAgaWYgKGludGVyYWN0aXZlTW9kZT8udHlwZSA9PT0gJ2F1dG9tYXRpb24nICYmIGludGVyYWN0aXZlTW9kZS50cmFja0lkID09PSB0cmFjay5pZCkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlWCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVZID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAgICAgICAgIGNvbnN0IHRyYWNrSCA9IGxhbmVIZWlnaHQgLSAyMDsKICAgICAgICAgICAgY29uc3QgSElUX1JBRElVUyA9IDI1OyAvLyBHb29kIHNpemUgZm9yIHRvdWNoCiAgICAgICAgICAgIGxldCBiZXN0RGlzdCA9IEluZmluaXR5OwogICAgICAgICAgICBsZXQgYmVzdEluZGV4ID0gLTE7CiAgICAgICAgICAgIGlmICh0cmFjay52b2x1bWVBdXRvbWF0aW9uKSB7CiAgICAgICAgICAgICAgICB0cmFjay52b2x1bWVBdXRvbWF0aW9uLmZvckVhY2goKHAsIGlkeCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB4ID0gKHAudGltZSAtIHRyYWNrLnRyaW1TdGFydCkgKiB6b29tOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB5ID0gKDEgLSBwLnZhbHVlKSAqIHRyYWNrSDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5oeXBvdChweCAtIHJlbGF0aXZlWCwgcHkgLSByZWxhdGl2ZVkpOwogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgSElUX1JBRElVUyAmJiBkaXN0IDwgYmVzdERpc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmVzdERpc3QgPSBkaXN0OwogICAgICAgICAgICAgICAgICAgICAgICBiZXN0SW5kZXggPSBpZHg7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGJlc3RJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIHNldEludGVyYWN0aXZlTW9kZShwcmV2ID0+IHByZXYgPyAoeyAuLi5wcmV2LCBpc0RyYWdnaW5nOiB0cnVlIH0pIDogbnVsbCk7CiAgICAgICAgICAgICAgICBkcmFnUmVmLmN1cnJlbnQuYXV0b21hdGlvbkluZGV4ID0gYmVzdEluZGV4OwogICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0UG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IE1hdGgubWF4KHRyYWNrLnRyaW1TdGFydCwgTWF0aC5taW4odHJhY2sudHJpbVN0YXJ0ICsgdHJhY2suZHVyYXRpb24sIHJlbGF0aXZlWCAvIHpvb20gKyB0cmFjay50cmltU3RhcnQpKTsKICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gMSAtIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHJlbGF0aXZlWSAvIHRyYWNrSCkpOwogICAgICAgICAgICAgICAgY29uc3QgbmV3UG9pbnQgPSB7IHRpbWUsIHZhbHVlIH07CiAgICAgICAgICAgICAgICBjb25zdCBuZXdQb2ludHMgPSB0cmFjay52b2x1bWVBdXRvbWF0aW9uID8gWy4uLnRyYWNrLnZvbHVtZUF1dG9tYXRpb24sIG5ld1BvaW50XSA6IFtuZXdQb2ludF07CiAgICAgICAgICAgICAgICB1cGRhdGVUcmFjayh0cmFjay5pZCwgeyB2b2x1bWVBdXRvbWF0aW9uOiBuZXdQb2ludHMgfSk7CiAgICAgICAgICAgICAgICBzZXRJbnRlcmFjdGl2ZU1vZGUocHJldiA9PiBwcmV2ID8gKHsgLi4ucHJldiwgaXNEcmFnZ2luZzogdHJ1ZSB9KSA6IG51bGwpOwogICAgICAgICAgICAgICAgZHJhZ1JlZi5jdXJyZW50LmF1dG9tYXRpb25JbmRleCA9IG5ld1BvaW50cy5sZW5ndGggLSAxOwogICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0UG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGlzVHJpbU1vZGUpIHsKICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZVNlbGVjdGVkVHJhY2tJZCAhPT0gdHJhY2suaWQpCiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFRyYWNrSWQodHJhY2suaWQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChpbnRlcmFjdGl2ZU1vZGUpIHsKICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZVNlbGVjdGVkVHJhY2tJZCAhPT0gdHJhY2suaWQpIHsKICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkVHJhY2tJZCh0cmFjay5pZCk7CiAgICAgICAgICAgICAgICBzZXRJbnRlcmFjdGl2ZU1vZGUobnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoaXNQbGF5aW5nKQogICAgICAgICAgICBzdG9wUGxheWJhY2soKTsKICAgICAgICBjb25zdCByZWN0ID0gdGltZWxpbmVSZWYuY3VycmVudD8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgaWYgKCFyZWN0KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgY29uc3QgbW91c2VUaW1lID0gKChlLmNsaWVudFggLSByZWN0LmxlZnQpICsgKHRpbWVsaW5lUmVmLmN1cnJlbnQ/LnNjcm9sbExlZnQgfHwgMCkpIC8gem9vbTsKICAgICAgICBjb25zdCB0aW1lT2Zmc2V0ID0gbW91c2VUaW1lIC0gdHJhY2suc3RhcnRUaW1lOwogICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBlLmN1cnJlbnRUYXJnZXQ7CiAgICAgICAgZHJhZ1JlZi5jdXJyZW50ID0gewogICAgICAgICAgICBzdGFydFg6IGUuY2xpZW50WCwKICAgICAgICAgICAgc3RhcnRZOiBlLmNsaWVudFksCiAgICAgICAgICAgIG9mZnNldFRpbWU6IHRpbWVPZmZzZXQsCiAgICAgICAgICAgIHRyYWNrSWQ6IHRyYWNrLmlkLAogICAgICAgICAgICBsYXN0UG9pbnRlclg6IGUuY2xpZW50WCwKICAgICAgICAgICAgbGFzdFBvaW50ZXJZOiBlLmNsaWVudFksCiAgICAgICAgICAgIGlzVGltZWxpbmVUYXA6IGZhbHNlLAogICAgICAgICAgICB0aW1lbGluZVN0YXJ0WDogMCwKICAgICAgICAgICAgdGFyZ2V0RWxlbWVudDogdGFyZ2V0RWxlbWVudCwKICAgICAgICAgICAgcG9pbnRlcklkOiBlLnBvaW50ZXJJZCwKICAgICAgICAgICAgYXV0b21hdGlvbkluZGV4OiAtMQogICAgICAgIH07CiAgICAgICAgLy8gRGVsYXkgc2V0dGluZyBkcmFnZ2luZ1RyYWNrSWQgdG8gZGV0ZWN0IGludGVudCAoRHJhZyB2cyBTY3JvbGwpCiAgICAgICAgbG9uZ1ByZXNzVGltZXJSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAvLyBDUklUSUNBTDogQ2FwdHVyZSBwb2ludGVyIE5PVyB0byBsb2NrIGRyYWcgYW5kIGRpc2FibGUgc2Nyb2xsCiAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50KSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuc2V0UG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiQ291bGQgbm90IGNhcHR1cmUgcG9pbnRlciIsIGVycik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2V0RHJhZ2dpbmdUcmFja0lkKHRyYWNrLmlkKTsKICAgICAgICAgICAgc2V0U2VsZWN0ZWRUcmFja0lkKHRyYWNrLmlkKTsKICAgICAgICAgICAgaWYgKG5hdmlnYXRvci52aWJyYXRlKQogICAgICAgICAgICAgICAgbmF2aWdhdG9yLnZpYnJhdGUoMTApOwogICAgICAgIH0sIExPTkdfUFJFU1NfRFVSQVRJT04pOwogICAgfTsKICAgIGNvbnN0IHByb2Nlc3NUcmFja0RyYWcgPSAoY2xpZW50WCwgY2xpZW50WSwgYWN0aXZlVHJhY2tJZCkgPT4gewogICAgICAgIGlmICghdGltZWxpbmVSZWYuY3VycmVudCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHRyYWNrID0gdHJhY2tzUmVmLmN1cnJlbnQuZmluZCh0ID0+IHQuaWQgPT09IGFjdGl2ZVRyYWNrSWQpOwogICAgICAgIGlmICghdHJhY2spCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCByZWN0ID0gdGltZWxpbmVSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICBjb25zdCBzY3JvbGxMID0gdGltZWxpbmVSZWYuY3VycmVudC5zY3JvbGxMZWZ0OwogICAgICAgIGNvbnN0IG1vdXNlWCA9IGNsaWVudFggLSByZWN0LmxlZnQgKyBzY3JvbGxMOwogICAgICAgIGNvbnN0IG1vdXNlWSA9IGNsaWVudFkgLSByZWN0LnRvcCArIHRpbWVsaW5lUmVmLmN1cnJlbnQuc2Nyb2xsVG9wOwogICAgICAgIGxldCB0YXJnZXRMYW5lID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcigobW91c2VZIC0gMTApIC8gbGFuZUhlaWdodCkpOwogICAgICAgIGNvbnN0IGN1cnJlbnRNb3VzZVRpbWUgPSBNYXRoLm1heCgwLCBtb3VzZVggLyB6b29tKTsKICAgICAgICBsZXQgcHJvcG9zZWRTdGFydFRpbWUgPSBjdXJyZW50TW91c2VUaW1lIC0gZHJhZ1JlZi5jdXJyZW50Lm9mZnNldFRpbWU7CiAgICAgICAgY29uc3QgbGFuZVRyYWNrcyA9IHRyYWNrc1JlZi5jdXJyZW50LmZpbHRlcih0ID0+IHQubGFuZSA9PT0gdGFyZ2V0TGFuZSAmJiB0LmlkICE9PSBhY3RpdmVUcmFja0lkKTsKICAgICAgICBsYW5lVHJhY2tzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRUaW1lIC0gYi5zdGFydFRpbWUpOwogICAgICAgIGNvbnN0IGdhcHMgPSBbXTsKICAgICAgICBsZXQgbGFzdEVuZCA9IDA7CiAgICAgICAgbGFuZVRyYWNrcy5mb3JFYWNoKHQgPT4gewogICAgICAgICAgICBpZiAodC5zdGFydFRpbWUgPiBsYXN0RW5kKSB7CiAgICAgICAgICAgICAgICBnYXBzLnB1c2goeyBzdGFydDogbGFzdEVuZCwgZW5kOiB0LnN0YXJ0VGltZSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsYXN0RW5kID0gdC5zdGFydFRpbWUgKyB0LmR1cmF0aW9uOwogICAgICAgIH0pOwogICAgICAgIGdhcHMucHVzaCh7IHN0YXJ0OiBsYXN0RW5kLCBlbmQ6IEluZmluaXR5IH0pOwogICAgICAgIGxldCBiZXN0U3RhcnRUaW1lID0gLTE7CiAgICAgICAgbGV0IG1pbkRpc3BsYWNlbWVudCA9IEluZmluaXR5OwogICAgICAgIGdhcHMuZm9yRWFjaChnYXAgPT4gewogICAgICAgICAgICBjb25zdCBnYXBTaXplID0gZ2FwLmVuZCAtIGdhcC5zdGFydDsKICAgICAgICAgICAgaWYgKGdhcFNpemUgPCB0cmFjay5kdXJhdGlvbiAtIDAuMDEpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHZhbGlkU3RhcnQgPSBnYXAuc3RhcnQ7CiAgICAgICAgICAgIGNvbnN0IHZhbGlkRW5kID0gZ2FwLmVuZCAtIHRyYWNrLmR1cmF0aW9uOwogICAgICAgICAgICBjb25zdCBjbGFtcGVkU3RhcnQgPSBNYXRoLm1heCh2YWxpZFN0YXJ0LCBNYXRoLm1pbihwcm9wb3NlZFN0YXJ0VGltZSwgdmFsaWRFbmQpKTsKICAgICAgICAgICAgY29uc3QgZGlmZiA9IE1hdGguYWJzKGNsYW1wZWRTdGFydCAtIHByb3Bvc2VkU3RhcnRUaW1lKTsKICAgICAgICAgICAgaWYgKGRpZmYgPCBtaW5EaXNwbGFjZW1lbnQpIHsKICAgICAgICAgICAgICAgIG1pbkRpc3BsYWNlbWVudCA9IGRpZmY7CiAgICAgICAgICAgICAgICBiZXN0U3RhcnRUaW1lID0gY2xhbXBlZFN0YXJ0OwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGJlc3RTdGFydFRpbWUgPT09IC0xKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgcHJvcG9zZWRTdGFydFRpbWUgPSBiZXN0U3RhcnRUaW1lOwogICAgICAgIC8vIFNuYXBwaW5nCiAgICAgICAgY29uc3Qgc25hcFNlY29uZHMgPSBTTkFQX1RIUkVTSE9MRF9QWCAvIHpvb207CiAgICAgICAgbGV0IGJlc3RTbmFwID0gLTE7CiAgICAgICAgbGV0IG1pbkRpZmYgPSBJbmZpbml0eTsKICAgICAgICBjb25zdCBjYW5kaWRhdGVzID0gWzAsIGN1cnJlbnRUaW1lXTsKICAgICAgICBnYXBzLmZvckVhY2goZ2FwID0+IHsKICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKGdhcC5zdGFydCk7CiAgICAgICAgICAgIGlmIChnYXAuZW5kICE9PSBJbmZpbml0eSkKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChnYXAuZW5kIC0gdHJhY2suZHVyYXRpb24pOwogICAgICAgIH0pOwogICAgICAgIHRyYWNrc1JlZi5jdXJyZW50LmZvckVhY2gob3RoZXIgPT4gewogICAgICAgICAgICBpZiAob3RoZXIuaWQgPT09IGFjdGl2ZVRyYWNrSWQpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGlmIChNYXRoLmFicyhvdGhlci5sYW5lIC0gdGFyZ2V0TGFuZSkgPT09IDEpIHsKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChvdGhlci5zdGFydFRpbWUpOwogICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKG90aGVyLnN0YXJ0VGltZSArIG90aGVyLmR1cmF0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IFNOQVBfWk9PTV9USFJFU0hPTEQgPSBNSU5fWk9PTSArIChNQVhfWk9PTSAtIE1JTl9aT09NKSAqIDAuMjU7CiAgICAgICAgaWYgKHpvb20gPiBTTkFQX1pPT01fVEhSRVNIT0xEKSB7CiAgICAgICAgICAgIGNvbnN0IGNsb3Nlc3RCZWF0ID0gTWF0aC5yb3VuZChwcm9wb3NlZFN0YXJ0VGltZSAvIGJlYXREdXJhdGlvbikgKiBiZWF0RHVyYXRpb247CiAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChjbG9zZXN0QmVhdCk7CiAgICAgICAgfQogICAgICAgIGNhbmRpZGF0ZXMuZm9yRWFjaChjYW5kID0+IHsKICAgICAgICAgICAgY29uc3QgZGlmZlN0YXJ0ID0gTWF0aC5hYnMocHJvcG9zZWRTdGFydFRpbWUgLSBjYW5kKTsKICAgICAgICAgICAgaWYgKGRpZmZTdGFydCA8IHNuYXBTZWNvbmRzICYmIGRpZmZTdGFydCA8IG1pbkRpZmYpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGZpdHMgPSBnYXBzLnNvbWUoZyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsaWRTdGFydCA9IGcuc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsaWRFbmQgPSBnLmVuZCAtIHRyYWNrLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5kID49IHZhbGlkU3RhcnQgLSAwLjAwMSAmJiBjYW5kIDw9IHZhbGlkRW5kICsgMC4wMDEgJiYgKGcuZW5kIC0gZy5zdGFydCA+PSB0cmFjay5kdXJhdGlvbiAtIDAuMDEpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoZml0cykgewogICAgICAgICAgICAgICAgICAgIGJlc3RTbmFwID0gY2FuZDsKICAgICAgICAgICAgICAgICAgICBtaW5EaWZmID0gZGlmZlN0YXJ0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHByb3Bvc2VkRW5kVGltZSA9IHByb3Bvc2VkU3RhcnRUaW1lICsgdHJhY2suZHVyYXRpb247CiAgICAgICAgICAgIGNvbnN0IGRpZmZFbmQgPSBNYXRoLmFicyhwcm9wb3NlZEVuZFRpbWUgLSBjYW5kKTsKICAgICAgICAgICAgaWYgKGRpZmZFbmQgPCBzbmFwU2Vjb25kcyAmJiBkaWZmRW5kIDwgbWluRGlmZikgewogICAgICAgICAgICAgICAgY29uc3QgYWxpZ25lZFN0YXJ0ID0gY2FuZCAtIHRyYWNrLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgY29uc3QgZml0cyA9IGdhcHMuc29tZShnID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxpZFN0YXJ0ID0gZy5zdGFydDsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxpZEVuZCA9IGcuZW5kIC0gdHJhY2suZHVyYXRpb247CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFsaWduZWRTdGFydCA+PSB2YWxpZFN0YXJ0IC0gMC4wMDEgJiYgYWxpZ25lZFN0YXJ0IDw9IHZhbGlkRW5kICsgMC4wMDEgJiYgKGcuZW5kIC0gZy5zdGFydCA+PSB0cmFjay5kdXJhdGlvbiAtIDAuMDEpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoZml0cykgewogICAgICAgICAgICAgICAgICAgIGJlc3RTbmFwID0gYWxpZ25lZFN0YXJ0OwogICAgICAgICAgICAgICAgICAgIG1pbkRpZmYgPSBkaWZmRW5kOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGJlc3RTbmFwICE9PSAtMSkgewogICAgICAgICAgICBwcm9wb3NlZFN0YXJ0VGltZSA9IGJlc3RTbmFwOwogICAgICAgIH0KICAgICAgICB1cGRhdGVUcmFjayhhY3RpdmVUcmFja0lkLCB7IHN0YXJ0VGltZTogcHJvcG9zZWRTdGFydFRpbWUsIGxhbmU6IHRhcmdldExhbmUgfSk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlVHJhY2tEcmFnTW92ZSA9IChlKSA9PiB7CiAgICAgICAgaWYgKGludGVyYWN0aXZlTW9kZT8udHlwZSA9PT0gJ2F1dG9tYXRpb24nICYmIGludGVyYWN0aXZlTW9kZS5pc0RyYWdnaW5nKSB7CiAgICAgICAgICAgIGNvbnN0IHRyYWNrID0gdHJhY2tzLmZpbmQodCA9PiB0LmlkID09PSBpbnRlcmFjdGl2ZU1vZGUudHJhY2tJZCk7CiAgICAgICAgICAgIGlmICh0cmFjaykgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgaWYgKCF0aW1lbGluZVJlZi5jdXJyZW50KQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVsaW5lUmVjdCA9IHRpbWVsaW5lUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICBjb25zdCBhYnNvbHV0ZVggPSBlLmNsaWVudFggLSB0aW1lbGluZVJlY3QubGVmdCArIHRpbWVsaW5lUmVmLmN1cnJlbnQuc2Nyb2xsTGVmdDsKICAgICAgICAgICAgICAgIGNvbnN0IGFic29sdXRlVGltZSA9IGFic29sdXRlWCAvIHpvb207CiAgICAgICAgICAgICAgICBjb25zdCByZWxUaW1lID0gYWJzb2x1dGVUaW1lIC0gdHJhY2suc3RhcnRUaW1lOwogICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IE1hdGgubWF4KHRyYWNrLnRyaW1TdGFydCwgTWF0aC5taW4odHJhY2sudHJpbVN0YXJ0ICsgdHJhY2suZHVyYXRpb24sIHJlbFRpbWUgKyB0cmFjay50cmltU3RhcnQpKTsKICAgICAgICAgICAgICAgIGNvbnN0IGFic29sdXRlWSA9IGUuY2xpZW50WSAtIHRpbWVsaW5lUmVjdC50b3AgKyB0aW1lbGluZVJlZi5jdXJyZW50LnNjcm9sbFRvcDsKICAgICAgICAgICAgICAgIGNvbnN0IHRyYWNrVG9wID0gdHJhY2subGFuZSAqIGxhbmVIZWlnaHQgKyAxMDsKICAgICAgICAgICAgICAgIGNvbnN0IHRyYWNrSGVpZ2h0ID0gbGFuZUhlaWdodCAtIDIwOwogICAgICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVZID0gYWJzb2x1dGVZIC0gdHJhY2tUb3A7CiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIDEgLSAocmVsYXRpdmVZIC8gdHJhY2tIZWlnaHQpKSk7CiAgICAgICAgICAgICAgICBjb25zdCBwb2ludHMgPSBbLi4uKHRyYWNrLnZvbHVtZUF1dG9tYXRpb24gfHwgW10pXTsKICAgICAgICAgICAgICAgIGlmIChkcmFnUmVmLmN1cnJlbnQuYXV0b21hdGlvbkluZGV4ICE9PSAtMSAmJiBwb2ludHNbZHJhZ1JlZi5jdXJyZW50LmF1dG9tYXRpb25JbmRleF0pIHsKICAgICAgICAgICAgICAgICAgICBwb2ludHNbZHJhZ1JlZi5jdXJyZW50LmF1dG9tYXRpb25JbmRleF0gPSB7IHRpbWUsIHZhbHVlIH07CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVHJhY2sodHJhY2suaWQsIHsgdm9sdW1lQXV0b21hdGlvbjogcG9pbnRzIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGFjdGl2ZVBvaW50ZXJzLmN1cnJlbnQuc2l6ZSA+IDEpIHsKICAgICAgICAgICAgaWYgKGRyYWdnaW5nVHJhY2tJZCkKICAgICAgICAgICAgICAgIHNldERyYWdnaW5nVHJhY2tJZChudWxsKTsKICAgICAgICAgICAgaWYgKGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChsb25nUHJlc3NUaW1lclJlZi5jdXJyZW50KTsKICAgICAgICAgICAgICAgIGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFkcmFnZ2luZ1RyYWNrSWQgJiYgbG9uZ1ByZXNzVGltZXJSZWYuY3VycmVudCkgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5oeXBvdChlLmNsaWVudFggLSBkcmFnUmVmLmN1cnJlbnQuc3RhcnRYLCBlLmNsaWVudFkgLSBkcmFnUmVmLmN1cnJlbnQuc3RhcnRZKTsKICAgICAgICAgICAgaWYgKGRpc3QgPiBEUkFHX1RIUkVTSE9MRF9QWCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQpOwogICAgICAgICAgICAgICAgbG9uZ1ByZXNzVGltZXJSZWYuY3VycmVudCA9IG51bGw7CiAgICAgICAgICAgICAgICByZXR1cm47IC8vIEFsbG93IG5hdGl2ZSBzY3JvbGwKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWRyYWdnaW5nVHJhY2tJZCB8fCAhdGltZWxpbmVSZWYuY3VycmVudCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBsYXN0RHJhZ1Bvcy5jdXJyZW50ID0geyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9OwogICAgICAgIGNvbnN0IGVkZ2VUaHJlc2hvbGQgPSA3NTsKICAgICAgICBjb25zdCByZWN0ID0gdGltZWxpbmVSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICBsZXQgdnggPSAwOwogICAgICAgIGxldCB2eSA9IDA7CiAgICAgICAgaWYgKGUuY2xpZW50WCA8IHJlY3QubGVmdCArIGVkZ2VUaHJlc2hvbGQpCiAgICAgICAgICAgIHZ4ID0gLTE1OwogICAgICAgIGVsc2UgaWYgKGUuY2xpZW50WCA+IHJlY3QucmlnaHQgLSBlZGdlVGhyZXNob2xkKQogICAgICAgICAgICB2eCA9IDE1OwogICAgICAgIGlmIChlLmNsaWVudFkgPCByZWN0LnRvcCArIGVkZ2VUaHJlc2hvbGQpCiAgICAgICAgICAgIHZ5ID0gLTEwOwogICAgICAgIGVsc2UgaWYgKGUuY2xpZW50WSA+IHJlY3QuYm90dG9tIC0gZWRnZVRocmVzaG9sZCkKICAgICAgICAgICAgdnkgPSAxMDsKICAgICAgICBhdXRvU2Nyb2xsUmVmLmN1cnJlbnQgPSB7IHZ4LCB2eSB9OwogICAgICAgIHByb2Nlc3NUcmFja0RyYWcoZS5jbGllbnRYLCBlLmNsaWVudFksIGRyYWdnaW5nVHJhY2tJZCk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlVHJhY2tQb2ludGVyVXAgPSAoZSwgdHJhY2spID0+IHsKICAgICAgICBpZiAoaW50ZXJhY3RpdmVNb2RlPy50eXBlID09PSAnYXV0b21hdGlvbicgJiYgaW50ZXJhY3RpdmVNb2RlLmlzRHJhZ2dpbmcpIHsKICAgICAgICAgICAgc2V0SW50ZXJhY3RpdmVNb2RlKHByZXYgPT4gcHJldiA/ICh7IC4uLnByZXYsIGlzRHJhZ2dpbmc6IGZhbHNlIH0pIDogbnVsbCk7CiAgICAgICAgICAgIHB1c2hIaXN0b3J5KCk7CiAgICAgICAgICAgIGlmIChlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIGUudGFyZ2V0Lmhhc1BvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKSkgewogICAgICAgICAgICAgICAgZS50YXJnZXQucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGF1dG9TY3JvbGxSZWYuY3VycmVudCA9IHsgdng6IDAsIHZ5OiAwIH07CiAgICAgICAgaWYgKGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQpOwogICAgICAgICAgICBsb25nUHJlc3NUaW1lclJlZi5jdXJyZW50ID0gbnVsbDsKICAgICAgICAgICAgc2V0U2VsZWN0ZWRUcmFja0lkKHRyYWNrLmlkKTsKICAgICAgICB9CiAgICAgICAgaWYgKGRyYWdnaW5nVHJhY2tJZCkgewogICAgICAgICAgICBzZXREcmFnZ2luZ1RyYWNrSWQobnVsbCk7CiAgICAgICAgICAgIHB1c2hIaXN0b3J5KCk7CiAgICAgICAgICAgIGlmIChlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIGUudGFyZ2V0Lmhhc1BvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKSkgewogICAgICAgICAgICAgICAgZS50YXJnZXQucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVUcmFja1BvaW50ZXJDYW5jZWwgPSAoZSkgPT4gewogICAgICAgIGF1dG9TY3JvbGxSZWYuY3VycmVudCA9IHsgdng6IDAsIHZ5OiAwIH07CiAgICAgICAgaWYgKGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQpOwogICAgICAgICAgICBsb25nUHJlc3NUaW1lclJlZi5jdXJyZW50ID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKGRyYWdnaW5nVHJhY2tJZCkgewogICAgICAgICAgICBzZXREcmFnZ2luZ1RyYWNrSWQobnVsbCk7CiAgICAgICAgfQogICAgfTsKICAgIC8vIC0tLSBUcmltIExvZ2ljIC0tLQogICAgY29uc3QgaGFuZGxlVHJpbVBvaW50ZXJEb3duID0gKGUsIHRyYWNrLCBzaWRlKSA9PiB7CiAgICAgICAgaWYgKGFjdGl2ZVBvaW50ZXJzLmN1cnJlbnQuc2l6ZSA+IDEpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBzZXRUcmltU3RhdGUoewogICAgICAgICAgICBpc0RyYWdnaW5nOiB0cnVlLCBzaWRlLAogICAgICAgICAgICBpbml0aWFsTW91c2VYOiBlLmNsaWVudFgsCiAgICAgICAgICAgIGluaXRpYWxTdGFydFRpbWU6IHRyYWNrLnN0YXJ0VGltZSwKICAgICAgICAgICAgaW5pdGlhbFRyaW1TdGFydDogdHJhY2sudHJpbVN0YXJ0LAogICAgICAgICAgICBpbml0aWFsRHVyYXRpb246IHRyYWNrLmR1cmF0aW9uLAogICAgICAgICAgICBjdXJyZW50RGVsdGE6IDAKICAgICAgICB9KTsKICAgICAgICBlLnRhcmdldC5zZXRQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlVHJpbVBvaW50ZXJNb3ZlID0gKGUpID0+IHsKICAgICAgICBpZiAoYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplID4gMSkgewogICAgICAgICAgICBzZXRUcmltU3RhdGUobnVsbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCF0cmltU3RhdGU/LmlzRHJhZ2dpbmcpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgY29uc3QgZGVsdGFQeCA9IGUuY2xpZW50WCAtIHRyaW1TdGF0ZS5pbml0aWFsTW91c2VYOwogICAgICAgIGxldCBkZWx0YVNlYyA9IGRlbHRhUHggLyB6b29tOwogICAgICAgIGNvbnN0IHRyYWNrID0gdHJhY2tzLmZpbmQodCA9PiB0LmlkID09PSBlZmZlY3RpdmVTZWxlY3RlZFRyYWNrSWQpOwogICAgICAgIGlmICh0cmFjaykgewogICAgICAgICAgICBjb25zdCBzbmFwU2Vjb25kcyA9IFNOQVBfVEhSRVNIT0xEX1BYIC8gem9vbTsKICAgICAgICAgICAgbGV0IHRhcmdldFRpbWUgPSAwOwogICAgICAgICAgICBpZiAodHJpbVN0YXRlLnNpZGUgPT09ICdzdGFydCcpIHsKICAgICAgICAgICAgICAgIHRhcmdldFRpbWUgPSB0cmltU3RhdGUuaW5pdGlhbFN0YXJ0VGltZSArIGRlbHRhU2VjOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGFyZ2V0VGltZSA9IHRyaW1TdGF0ZS5pbml0aWFsU3RhcnRUaW1lICsgdHJpbVN0YXRlLmluaXRpYWxEdXJhdGlvbiArIGRlbHRhU2VjOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbY3VycmVudFRpbWUsIDBdOwogICAgICAgICAgICBjb25zdCBhZGphY2VudExhbmVzID0gW3RyYWNrLmxhbmUgLSAxLCB0cmFjay5sYW5lICsgMV07CiAgICAgICAgICAgIHRyYWNrcy5mb3JFYWNoKG90aGVyID0+IHsKICAgICAgICAgICAgICAgIGlmIChvdGhlci5pZCA9PT0gdHJhY2suaWQpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKGFkamFjZW50TGFuZXMuaW5jbHVkZXMob3RoZXIubGFuZSkpIHsKICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2gob3RoZXIuc3RhcnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2gob3RoZXIuc3RhcnRUaW1lICsgb3RoZXIuZHVyYXRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGV0IGJlc3RTbmFwID0gLTE7CiAgICAgICAgICAgIGxldCBtaW5EaWZmID0gSW5maW5pdHk7CiAgICAgICAgICAgIGNhbmRpZGF0ZXMuZm9yRWFjaChjYW5kID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBNYXRoLmFicyh0YXJnZXRUaW1lIC0gY2FuZCk7CiAgICAgICAgICAgICAgICBpZiAoZGlmZiA8IHNuYXBTZWNvbmRzICYmIGRpZmYgPCBtaW5EaWZmKSB7CiAgICAgICAgICAgICAgICAgICAgYmVzdFNuYXAgPSBjYW5kOwogICAgICAgICAgICAgICAgICAgIG1pbkRpZmYgPSBkaWZmOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGJlc3RTbmFwICE9PSAtMSkgewogICAgICAgICAgICAgICAgaWYgKHRyaW1TdGF0ZS5zaWRlID09PSAnc3RhcnQnKSB7CiAgICAgICAgICAgICAgICAgICAgZGVsdGFTZWMgPSBiZXN0U25hcCAtIHRyaW1TdGF0ZS5pbml0aWFsU3RhcnRUaW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGVsdGFTZWMgPSBiZXN0U25hcCAtICh0cmltU3RhdGUuaW5pdGlhbFN0YXJ0VGltZSArIHRyaW1TdGF0ZS5pbml0aWFsRHVyYXRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG1pbkRpZmYgPiAwLjAwMSAmJiBuYXZpZ2F0b3IudmlicmF0ZSkKICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IudmlicmF0ZSg1KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXRUcmltU3RhdGUocHJldiA9PiBwcmV2ID8gKHsgLi4ucHJldiwgY3VycmVudERlbHRhOiBkZWx0YVNlYyB9KSA6IG51bGwpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZVRyaW1Qb2ludGVyVXAgPSAoZSwgdHJhY2spID0+IHsKICAgICAgICBpZiAoIXRyaW1TdGF0ZT8uaXNEcmFnZ2luZykKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBjb25zdCB0ID0gdHJhY2sgfHwgdHJhY2tzLmZpbmQodHIgPT4gdHIuaWQgPT09IGVmZmVjdGl2ZVNlbGVjdGVkVHJhY2tJZCk7CiAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgbGV0IGNoYW5nZSA9IHRyaW1TdGF0ZS5jdXJyZW50RGVsdGE7CiAgICAgICAgICAgIGxldCB7IHN0YXJ0VGltZTogbmV3U3RhcnRUaW1lLCB0cmltU3RhcnQ6IG5ld1RyaW1TdGFydCwgZHVyYXRpb246IG5ld0R1cmF0aW9uIH0gPSB0OwogICAgICAgICAgICBpZiAodHJpbVN0YXRlLnNpZGUgPT09ICdzdGFydCcpIHsKICAgICAgICAgICAgICAgIGlmIChuZXdUcmltU3RhcnQgKyBjaGFuZ2UgPCAwKQogICAgICAgICAgICAgICAgICAgIGNoYW5nZSA9IC1uZXdUcmltU3RhcnQ7CiAgICAgICAgICAgICAgICBpZiAobmV3RHVyYXRpb24gLSBjaGFuZ2UgPCAwLjEpCiAgICAgICAgICAgICAgICAgICAgY2hhbmdlID0gbmV3RHVyYXRpb24gLSAwLjE7CiAgICAgICAgICAgICAgICBuZXdTdGFydFRpbWUgKz0gY2hhbmdlOwogICAgICAgICAgICAgICAgbmV3RHVyYXRpb24gLT0gY2hhbmdlOwogICAgICAgICAgICAgICAgbmV3VHJpbVN0YXJ0ICs9IGNoYW5nZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChuZXdEdXJhdGlvbiArIGNoYW5nZSA8IDAuMSkKICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgPSAwLjEgLSBuZXdEdXJhdGlvbjsKICAgICAgICAgICAgICAgIC8vIEFsbG93IGluZGVmaW5pdGUgZXhwYW5zaW9uIGlmIGxvb3BpbmcKICAgICAgICAgICAgICAgIGlmICghdC5pc0xvb3BpbmcgJiYgbmV3VHJpbVN0YXJ0ICsgbmV3RHVyYXRpb24gKyBjaGFuZ2UgPiB0LmJ1ZmZlci5kdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGNoYW5nZSA9IHQuYnVmZmVyLmR1cmF0aW9uIC0gKG5ld1RyaW1TdGFydCArIG5ld0R1cmF0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5ld0R1cmF0aW9uICs9IGNoYW5nZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cGRhdGVUcmFjayh0LmlkLCB7IHN0YXJ0VGltZTogbmV3U3RhcnRUaW1lLCB0cmltU3RhcnQ6IG5ld1RyaW1TdGFydCwgZHVyYXRpb246IG5ld0R1cmF0aW9uIH0pOwogICAgICAgICAgICBwdXNoSGlzdG9yeSgpOwogICAgICAgIH0KICAgICAgICBzZXRUcmltU3RhdGUobnVsbCk7CiAgICAgICAgaWYgKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgZS50YXJnZXQuaGFzUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpKQogICAgICAgICAgICBlLnRhcmdldC5yZWxlYXNlUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZVRyYWNrRG91YmxlQ2xpY2sgPSAoZSwgdHJhY2spID0+IHsKICAgICAgICBpZiAoaW50ZXJhY3RpdmVNb2RlPy50eXBlID09PSAnYXV0b21hdGlvbicgJiYgaW50ZXJhY3RpdmVNb2RlLnRyYWNrSWQgPT09IHRyYWNrLmlkKSB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlWCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgICAgICAgICAgY29uc3QgcmVsYXRpdmVZID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAgICAgICAgIGNvbnN0IHRyYWNrSCA9IGxhbmVIZWlnaHQgLSAyMDsKICAgICAgICAgICAgY29uc3QgSElUX1JBRElVUyA9IDI1OwogICAgICAgICAgICBsZXQgYmVzdERpc3QgPSBJbmZpbml0eTsKICAgICAgICAgICAgbGV0IGJlc3RJbmRleCA9IC0xOwogICAgICAgICAgICB0cmFjay52b2x1bWVBdXRvbWF0aW9uPy5mb3JFYWNoKChwLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHB4ID0gKHAudGltZSAtIHRyYWNrLnRyaW1TdGFydCkgKiB6b29tOwogICAgICAgICAgICAgICAgY29uc3QgcHkgPSAoMSAtIHAudmFsdWUpICogdHJhY2tIOwogICAgICAgICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguaHlwb3QocHggLSByZWxhdGl2ZVgsIHB5IC0gcmVsYXRpdmVZKTsKICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgSElUX1JBRElVUyAmJiBkaXN0IDwgYmVzdERpc3QpIHsKICAgICAgICAgICAgICAgICAgICBiZXN0RGlzdCA9IGRpc3Q7CiAgICAgICAgICAgICAgICAgICAgYmVzdEluZGV4ID0gaWR4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGJlc3RJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BvaW50cyA9IFsuLi4odHJhY2sudm9sdW1lQXV0b21hdGlvbiB8fCBbXSldOwogICAgICAgICAgICAgICAgbmV3UG9pbnRzLnNwbGljZShiZXN0SW5kZXgsIDEpOwogICAgICAgICAgICAgICAgdXBkYXRlVHJhY2sodHJhY2suaWQsIHsgdm9sdW1lQXV0b21hdGlvbjogbmV3UG9pbnRzIH0pOwogICAgICAgICAgICAgICAgcHVzaEhpc3RvcnkoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHVwZGF0ZVBsYXloZWFkKGUuY2xpZW50WCk7CiAgICB9OwogICAgLy8gLS0tIEZhZGUgSGFuZGxlcyBMb2dpYyAtLS0KICAgIGNvbnN0IGhhbmRsZUZhZGVIYW5kbGVQb2ludGVyRG93biA9IChlKSA9PiB7CiAgICAgICAgaWYgKGFjdGl2ZVBvaW50ZXJzLmN1cnJlbnQuc2l6ZSA+IDEpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBpZiAoaW50ZXJhY3RpdmVNb2RlKSB7CiAgICAgICAgICAgIHNldEludGVyYWN0aXZlTW9kZShwcmV2ID0+IHByZXYgPyAoeyAuLi5wcmV2LCBpc0RyYWdnaW5nOiB0cnVlIH0pIDogbnVsbCk7CiAgICAgICAgICAgIGUudGFyZ2V0LnNldFBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlRmFkZUhhbmRsZURyYWcgPSAoZSwgdHJhY2spID0+IHsKICAgICAgICBpZiAoYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplID4gMSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGlmICghaW50ZXJhY3RpdmVNb2RlPy5pc0RyYWdnaW5nIHx8IGludGVyYWN0aXZlTW9kZS50cmFja0lkICE9PSB0cmFjay5pZCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGlmIChpbnRlcmFjdGl2ZU1vZGUudHlwZSAhPT0gJ2ZhZGVJbicgJiYgaW50ZXJhY3RpdmVNb2RlLnR5cGUgIT09ICdmYWRlT3V0JykKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHJlY3QgPSB0aW1lbGluZVJlZi5jdXJyZW50Py5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICBpZiAoIXJlY3QpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCBzY3JvbGwgPSB0aW1lbGluZVJlZi5jdXJyZW50Py5zY3JvbGxMZWZ0IHx8IDA7CiAgICAgICAgY29uc3QgYWJzb2x1dGVYID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0ICsgc2Nyb2xsOwogICAgICAgIGxldCBhYnNvbHV0ZVRpbWUgPSBhYnNvbHV0ZVggLyB6b29tOwogICAgICAgIGNvbnN0IHNuYXBTZWNvbmRzID0gU05BUF9USFJFU0hPTERfUFggLyB6b29tOwogICAgICAgIGxldCBjbG9zZXN0U25hcCA9IC0xOwogICAgICAgIGxldCBtaW5EaWZmID0gSW5maW5pdHk7CiAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IFtjdXJyZW50VGltZV07CiAgICAgICAgdHJhY2tzLmZvckVhY2godCA9PiB7CiAgICAgICAgICAgIGlmICh0LmlkID09PSB0cmFjay5pZCkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgaWYgKE1hdGguYWJzKHQubGFuZSAtIHRyYWNrLmxhbmUpIDw9IDEpIHsKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh0LnN0YXJ0VGltZSk7CiAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2godC5zdGFydFRpbWUgKyB0LmR1cmF0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNhbmRpZGF0ZXMuZm9yRWFjaChjYW5kID0+IHsKICAgICAgICAgICAgY29uc3QgZGlmZiA9IE1hdGguYWJzKGFic29sdXRlVGltZSAtIGNhbmQpOwogICAgICAgICAgICBpZiAoZGlmZiA8IHNuYXBTZWNvbmRzICYmIGRpZmYgPCBtaW5EaWZmKSB7CiAgICAgICAgICAgICAgICBtaW5EaWZmID0gZGlmZjsKICAgICAgICAgICAgICAgIGNsb3Nlc3RTbmFwID0gY2FuZDsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChjbG9zZXN0U25hcCAhPT0gLTEpIHsKICAgICAgICAgICAgYWJzb2x1dGVUaW1lID0gY2xvc2VzdFNuYXA7CiAgICAgICAgICAgIGlmIChtaW5EaWZmID4gMC4wMDEgJiYgbmF2aWdhdG9yLnZpYnJhdGUpCiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IudmlicmF0ZSg1KTsKICAgICAgICB9CiAgICAgICAgY29uc3QgbW91c2VSZWxUaW1lID0gYWJzb2x1dGVUaW1lIC0gdHJhY2suc3RhcnRUaW1lOwogICAgICAgIGlmIChpbnRlcmFjdGl2ZU1vZGUudHlwZSA9PT0gJ2ZhZGVJbicpIHsKICAgICAgICAgICAgbGV0IG5ld0R1ciA9IG1vdXNlUmVsVGltZTsKICAgICAgICAgICAgbmV3RHVyID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obmV3RHVyLCB0cmFjay5kdXJhdGlvbikpOwogICAgICAgICAgICB1cGRhdGVUcmFjayh0cmFjay5pZCwgeyBhY3RpdmVFZmZlY3RzOiB7IC4uLnRyYWNrLmFjdGl2ZUVmZmVjdHMsIGZhZGVJbjogbmV3RHVyIH0gfSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBsZXQgbmV3RHVyID0gKHRyYWNrLnN0YXJ0VGltZSArIHRyYWNrLmR1cmF0aW9uKSAtIGFic29sdXRlVGltZTsKICAgICAgICAgICAgbmV3RHVyID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obmV3RHVyLCB0cmFjay5kdXJhdGlvbikpOwogICAgICAgICAgICB1cGRhdGVUcmFjayh0cmFjay5pZCwgeyBhY3RpdmVFZmZlY3RzOiB7IC4uLnRyYWNrLmFjdGl2ZUVmZmVjdHMsIGZhZGVPdXQ6IG5ld0R1ciB9IH0pOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVGYWRlSGFuZGxlUG9pbnRlclVwID0gKGUsIHRyYWNrKSA9PiB7CiAgICAgICAgaWYgKGludGVyYWN0aXZlTW9kZT8uaXNEcmFnZ2luZykgewogICAgICAgICAgICBzZXRJbnRlcmFjdGl2ZU1vZGUocHJldiA9PiBwcmV2ID8gKHsgLi4ucHJldiwgaXNEcmFnZ2luZzogZmFsc2UgfSkgOiBudWxsKTsKICAgICAgICAgICAgcHVzaEhpc3RvcnkoKTsKICAgICAgICAgICAgaWYgKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgZS50YXJnZXQuaGFzUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpKQogICAgICAgICAgICAgICAgZS50YXJnZXQucmVsZWFzZVBvaW50ZXJDYXB0dXJlKGUucG9pbnRlcklkKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgZGVsZXRlVHJhY2sgPSAoaWQpID0+IHsgcHVzaEhpc3RvcnkoKTsgc2V0VHJhY2tzKHByZXYgPT4gcHJldi5maWx0ZXIodCA9PiB0LmlkICE9PSBpZCkpOyBpZiAoZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkID09PSBpZCkgewogICAgICAgIHNldFNlbGVjdGVkVHJhY2tJZChudWxsKTsKICAgICAgICBzZXRJc1RyaW1Nb2RlKGZhbHNlKTsKICAgIH0gc2V0U2VsZWN0aW9uKG51bGwpOyB9OwogICAgLy8gLi4uIChLZWVwIGNvbXBsZXggbG9naWMgZm9yIENyb3AvQ3V0L0VmZmVjdHMvRXhwb3J0IC0gbWluaW1hbCBjaGFuZ2VzIG5lZWRlZCB0aGVyZSkgLi4uCiAgICBjb25zdCBoYW5kbGVDcm9wID0gKCkgPT4geyBpZiAoIWVmZmVjdGl2ZVNlbGVjdGVkVHJhY2tJZCkKICAgICAgICByZXR1cm47IGlmIChzZWxlY3Rpb24pIHsKICAgICAgICBjb25zdCB0cmFjayA9IHRyYWNrcy5maW5kKHQgPT4gdC5pZCA9PT0gZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkKTsKICAgICAgICBpZiAoIXRyYWNrKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgcHVzaEhpc3RvcnkoKTsKICAgICAgICBjb25zdCByZWxTdGFydCA9IE1hdGgubWF4KDAsIHNlbGVjdGlvbi5zdGFydCAtIHRyYWNrLnN0YXJ0VGltZSk7CiAgICAgICAgY29uc3QgcmVsRW5kID0gTWF0aC5taW4odHJhY2suZHVyYXRpb24sIHNlbGVjdGlvbi5lbmQgLSB0cmFjay5zdGFydFRpbWUpOwogICAgICAgIGlmIChyZWxFbmQgPiByZWxTdGFydCkgewogICAgICAgICAgICBjb25zdCBuZXdUcmltU3RhcnQgPSB0cmFjay50cmltU3RhcnQgKyByZWxTdGFydDsKICAgICAgICAgICAgY29uc3QgbmV3RHVyYXRpb24gPSByZWxFbmQgLSByZWxTdGFydDsKICAgICAgICAgICAgdXBkYXRlVHJhY2soZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkLCB7IHRyaW1TdGFydDogbmV3VHJpbVN0YXJ0LCBkdXJhdGlvbjogbmV3RHVyYXRpb24sIHN0YXJ0VGltZTogc2VsZWN0aW9uLnN0YXJ0IH0pOwogICAgICAgIH0KICAgICAgICBzZXRTZWxlY3Rpb24obnVsbCk7CiAgICAgICAgc2V0SXNUcmltTW9kZShmYWxzZSk7CiAgICAgICAgc3RvcFBsYXliYWNrKCk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBjb25zdCB3aWxsRW5hYmxlID0gIWlzVHJpbU1vZGU7CiAgICAgICAgaWYgKHdpbGxFbmFibGUgJiYgIXNlbGVjdGVkVHJhY2tJZCkgewogICAgICAgICAgICBzZXRTZWxlY3RlZFRyYWNrSWQoZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkKTsKICAgICAgICB9CiAgICAgICAgc2V0SXNUcmltTW9kZSh3aWxsRW5hYmxlKTsKICAgICAgICBpZiAoIXdpbGxFbmFibGUpCiAgICAgICAgICAgIHNldFRyaW1TdGF0ZShudWxsKTsKICAgIH0gfTsKICAgIGNvbnN0IGdldFN1ZmZpeCA9IChpKSA9PiB7CiAgICAgICAgaWYgKGkgPD0gMjYpCiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDY0ICsgaSk7IC8vIDE9QS4uMjY9WgogICAgICAgIHJldHVybiBgWiAke2kgLSAyNn1gOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUN1dCA9ICgpID0+IHsKICAgICAgICBpZiAoIWVmZmVjdGl2ZVNlbGVjdGVkVHJhY2tJZCkgewogICAgICAgICAgICBhbGVydCgiU2VsZWN0IGEgdHJhY2sgdG8gY3V0LiIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IHRyYWNrID0gdHJhY2tzUmVmLmN1cnJlbnQuZmluZCh0ID0+IHQuaWQgPT09IGVmZmVjdGl2ZVNlbGVjdGVkVHJhY2tJZCk7CiAgICAgICAgaWYgKCF0cmFjaykKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHJlbFRpbWUgPSBjdXJyZW50VGltZSAtIHRyYWNrLnN0YXJ0VGltZTsKICAgICAgICBpZiAocmVsVGltZSA8PSAwLjA1IHx8IHJlbFRpbWUgPj0gdHJhY2suZHVyYXRpb24gLSAwLjA1KSB7CiAgICAgICAgICAgIGFsZXJ0KCJQbGFjZSBwbGF5aGVhZCBpbnNpZGUgdHJhY2suIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3Qgc3BsaXRQb2ludEluRmlsZSA9IHRyYWNrLnRyaW1TdGFydCArIHJlbFRpbWU7CiAgICAgICAgLy8gLS0tIFN1ZmZpeCBMb2dpYyBTdGFydCAtLS0KICAgICAgICAvLyBSZWdleCBmb3IgIiBbTGV0dGVyXSIgb3IgIiBbTGV0dGVyXSBbTnVtYmVyXSIKICAgICAgICBjb25zdCBzdWZmaXhSZWdleCA9IC9ccyhbQS1aXSkoXHNcZCspPyQvOwogICAgICAgIGNvbnN0IG1hdGNoID0gdHJhY2submFtZS5tYXRjaChzdWZmaXhSZWdleCk7CiAgICAgICAgbGV0IGJhc2VOYW1lID0gdHJhY2submFtZTsKICAgICAgICBsZXQgaXNDaGlsZCA9IGZhbHNlOwogICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgdmFsaWQgZ2VuZXJhdGVkIHN1ZmZpeCAoc2luZ2xlIGxldHRlciBvciBaICMpCiAgICAgICAgICAgIC8vIFRoZSByZWdleCBlbmZvcmNlcyBbQS1aXSBhbmQgb3B0aW9uYWwgc3BhY2UrZGlnaXRzLgogICAgICAgICAgICBiYXNlTmFtZSA9IHRyYWNrLm5hbWUuc3Vic3RyaW5nKDAsIG1hdGNoLmluZGV4KTsKICAgICAgICAgICAgaXNDaGlsZCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIC8vIEZpbmQgbWF4IGluZGV4IHVzZWQgYnkgY2hpbGRyZW4gb2YgdGhpcyBiYXNlIG5hbWUKICAgICAgICBsZXQgbWF4SW5kZXggPSAwOwogICAgICAgIHRyYWNrc1JlZi5jdXJyZW50LmZvckVhY2godCA9PiB7CiAgICAgICAgICAgIGlmICh0Lm5hbWUuc3RhcnRzV2l0aChiYXNlTmFtZSkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmRlciA9IHQubmFtZS5zbGljZShiYXNlTmFtZS5sZW5ndGgpOwogICAgICAgICAgICAgICAgY29uc3QgbSA9IHJlbWFpbmRlci5tYXRjaCgvXlxzKFtBLVpdKShcc1xkKyk/JC8pOwogICAgICAgICAgICAgICAgaWYgKG0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gbVsxXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbVsyXSA/IHBhcnNlSW50KG1bMl0udHJpbSgpKSA6IDA7CiAgICAgICAgICAgICAgICAgICAgbGV0IGlkeCA9IGwuY2hhckNvZGVBdCgwKSAtIDY0OwogICAgICAgICAgICAgICAgICAgIGlmIChsID09PSAnWicgJiYgbiA+IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGlkeCA9IDI2ICsgbjsKICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ID4gbWF4SW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgIG1heEluZGV4ID0gaWR4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbGV0IG5hbWUxID0gIiI7CiAgICAgICAgbGV0IG5hbWUyID0gIiI7CiAgICAgICAgaWYgKGlzQ2hpbGQpIHsKICAgICAgICAgICAgLy8gS2VlcCBjdXJyZW50IG5hbWUgZm9yIGZpcnN0IHBhcnQKICAgICAgICAgICAgbmFtZTEgPSB0cmFjay5uYW1lOwogICAgICAgICAgICAvLyBOZXh0IG9uZSBnZXRzIG1heEluZGV4ICsgMQogICAgICAgICAgICBuYW1lMiA9IGAke2Jhc2VOYW1lfSAke2dldFN1ZmZpeChtYXhJbmRleCArIDEpfWA7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAvLyBTcGxpdHRpbmcgcm9vdAogICAgICAgICAgICAvLyBDcmVhdGUgbmV4dCB0d28gYXZhaWxhYmxlCiAgICAgICAgICAgIC8vIElmIGJhc2UgaXMgIlRyYWNrIiwgYW5kICJUcmFjayBBIiBleGlzdHMgKG1heEluZGV4IDEpLCBjcmVhdGUgQiBhbmQgQz8KICAgICAgICAgICAgLy8gT3IgdXN1YWxseSBpZiByb290IGlzICJUcmFjayIsIG1heEluZGV4IGlzIDAuIFNvIEEgYW5kIEIuCiAgICAgICAgICAgIGNvbnN0IG5leHQxID0gTWF0aC5tYXgobWF4SW5kZXggKyAxLCAxKTsKICAgICAgICAgICAgY29uc3QgbmV4dDIgPSBNYXRoLm1heChtYXhJbmRleCArIDIsIDIpOwogICAgICAgICAgICBuYW1lMSA9IGAke2Jhc2VOYW1lfSAke2dldFN1ZmZpeChuZXh0MSl9YDsKICAgICAgICAgICAgbmFtZTIgPSBgJHtiYXNlTmFtZX0gJHtnZXRTdWZmaXgobmV4dDIpfWA7CiAgICAgICAgfQogICAgICAgIC8vIC0tLSBTdWZmaXggTG9naWMgRW5kIC0tLQogICAgICAgIHB1c2hIaXN0b3J5KCk7CiAgICAgICAgY29uc3QgdDEgPSB7CiAgICAgICAgICAgIC4uLnRyYWNrLAogICAgICAgICAgICBpZDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpLAogICAgICAgICAgICBuYW1lOiBuYW1lMSwKICAgICAgICAgICAgZHVyYXRpb246IHJlbFRpbWUsCiAgICAgICAgICAgIGJwbTogdHJhY2suYnBtCiAgICAgICAgfTsKICAgICAgICBjb25zdCB0MiA9IHsKICAgICAgICAgICAgLi4udHJhY2ssCiAgICAgICAgICAgIGlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSksCiAgICAgICAgICAgIG5hbWU6IG5hbWUyLAogICAgICAgICAgICBzdGFydFRpbWU6IHRyYWNrLnN0YXJ0VGltZSArIHJlbFRpbWUsCiAgICAgICAgICAgIHRyaW1TdGFydDogc3BsaXRQb2ludEluRmlsZSwKICAgICAgICAgICAgZHVyYXRpb246IHRyYWNrLmR1cmF0aW9uIC0gcmVsVGltZSwKICAgICAgICAgICAgYnBtOiB0cmFjay5icG0KICAgICAgICB9OwogICAgICAgIHNldFRyYWNrcyhwcmV2ID0+IHsKICAgICAgICAgICAgY29uc3QgaWR4ID0gcHJldi5maW5kSW5kZXgodCA9PiB0LmlkID09PSB0cmFjay5pZCk7CiAgICAgICAgICAgIGNvbnN0IG4gPSBbLi4ucHJldl07CiAgICAgICAgICAgIG4uc3BsaWNlKGlkeCwgMSwgdDEsIHQyKTsKICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgfSk7CiAgICAgICAgc2V0U2VsZWN0ZWRUcmFja0lkKHQyLmlkKTsKICAgICAgICBzZXRJc1RyaW1Nb2RlKGZhbHNlKTsKICAgICAgICBzdG9wUGxheWJhY2soKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVBcHBseUVmZmVjdCA9IGFzeW5jIChlZmZlY3RJZCwgcGFyYW1zKSA9PiB7CiAgICAgICAgaWYgKCFlZmZlY3RpdmVTZWxlY3RlZFRyYWNrSWQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCB0cmFjayA9IHRyYWNrcy5maW5kKHQgPT4gdC5pZCA9PT0gZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkKTsKICAgICAgICBpZiAoIXRyYWNrKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKHBhcmFtcz8uaW50ZXJhY3RpdmUpIHsKICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFRyYWNrSWQpCiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFRyYWNrSWQoZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkKTsKICAgICAgICAgICAgc2V0SW50ZXJhY3RpdmVNb2RlKHsgdHlwZTogZWZmZWN0SWQsIHRyYWNrSWQ6IHRyYWNrLmlkLCBpc0RyYWdnaW5nOiBmYWxzZSB9KTsKICAgICAgICAgICAgY29uc3QgZGVmYXVsdEZhZGUgPSBNYXRoLm1pbih0cmFjay5kdXJhdGlvbiwgMi4wKTsKICAgICAgICAgICAgY29uc3QgY3VycmVudEVmZmVjdHMgPSB0cmFjay5hY3RpdmVFZmZlY3RzIHx8IHt9OwogICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdmYWRlSW4nICYmICFjdXJyZW50RWZmZWN0cy5mYWRlSW4pIHsKICAgICAgICAgICAgICAgIHVwZGF0ZVRyYWNrKHRyYWNrLmlkLCB7IGFjdGl2ZUVmZmVjdHM6IHsgLi4uY3VycmVudEVmZmVjdHMsIGZhZGVJbjogZGVmYXVsdEZhZGUgfSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdmYWRlT3V0JyAmJiAhY3VycmVudEVmZmVjdHMuZmFkZU91dCkgewogICAgICAgICAgICAgICAgdXBkYXRlVHJhY2sodHJhY2suaWQsIHsgYWN0aXZlRWZmZWN0czogeyAuLi5jdXJyZW50RWZmZWN0cywgZmFkZU91dDogZGVmYXVsdEZhZGUgfSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChwYXJhbXM/LmF1dG9tYXRpb24pIHsKICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFRyYWNrSWQpCiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFRyYWNrSWQoZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkKTsKICAgICAgICAgICAgc2V0SW50ZXJhY3RpdmVNb2RlKHsgdHlwZTogJ2F1dG9tYXRpb24nLCB0cmFja0lkOiB0cmFjay5pZCwgaXNEcmFnZ2luZzogZmFsc2UgfSk7CiAgICAgICAgICAgIGlmICghdHJhY2sudm9sdW1lQXV0b21hdGlvbikgewogICAgICAgICAgICAgICAgdXBkYXRlVHJhY2sodHJhY2suaWQsIHsgdm9sdW1lQXV0b21hdGlvbjogW3sgdGltZTogdHJhY2sudHJpbVN0YXJ0LCB2YWx1ZTogMS4wIH0sIHsgdGltZTogdHJhY2sudHJpbVN0YXJ0ICsgdHJhY2suZHVyYXRpb24sIHZhbHVlOiAxLjAgfV0gfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBwdXNoSGlzdG9yeSgpOwogICAgICAgIGlmIChlZmZlY3RJZCA9PT0gJ3ZvbHVtZScpIHsKICAgICAgICAgICAgdXBkYXRlVHJhY2sodHJhY2suaWQsIHsgdm9sdW1lOiBwYXJhbXM/LmxldmVsID8/IDEuMCB9KTsKICAgICAgICAgICAgc2V0QXBwU3RhdGUoQXBwU3RhdGUuRURJVElORyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc2V0QXBwU3RhdGUoQXBwU3RhdGUuUFJPQ0VTU0lORyk7CiAgICAgICAgc3RvcFBsYXliYWNrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGVmZmVjdElkID09PSAnY3Jvc3NmYWRlJykgewogICAgICAgICAgICAgICAgaWYgKHBhcmFtcz8ucmVzdG9yZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0cmFjay5jcm9zc2ZhZGVNZXRhZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGxlZnQsIHJpZ2h0IH0gPSB0cmFjay5jcm9zc2ZhZGVNZXRhZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VHJhY2tzKHByZXYgPT4geyBjb25zdCBmaWx0ZXJlZCA9IHByZXYuZmlsdGVyKHQgPT4gdC5pZCAhPT0gdHJhY2suaWQpOyByZXR1cm4gWy4uLmZpbHRlcmVkLCBsZWZ0LCByaWdodF07IH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFRyYWNrSWQobGVmdC5pZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNldEFwcFN0YXRlKEFwcFN0YXRlLkVESVRJTkcpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGFyYW1zPy5kdXJhdGlvbiB8fCAxLjA7CiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRMYW5lID0gdHJhY2subGFuZTsKICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0VGltZSA9IGN1cnJlbnRUaW1lOwogICAgICAgICAgICAgICAgY29uc3QgdGhyZXNob2xkID0gMC4xOwogICAgICAgICAgICAgICAgY29uc3QgbGVmdFRyYWNrID0gdHJhY2tzLmZpbmQodCA9PiB0LmxhbmUgPT09IHRhcmdldExhbmUgJiYgTWF0aC5hYnMoKHQuc3RhcnRUaW1lICsgdC5kdXJhdGlvbikgLSBzcGxpdFRpbWUpIDwgdGhyZXNob2xkKTsKICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0VHJhY2sgPSB0cmFja3MuZmluZCh0ID0+IHQubGFuZSA9PT0gdGFyZ2V0TGFuZSAmJiBNYXRoLmFicyh0LnN0YXJ0VGltZSAtIHNwbGl0VGltZSkgPCB0aHJlc2hvbGQpOwogICAgICAgICAgICAgICAgaWYgKGxlZnRUcmFjayAmJiByaWdodFRyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkQnVmZmVyID0gYXdhaXQgbWVyZ2VCdWZmZXJzKGxlZnRUcmFjay5idWZmZXIsIHJpZ2h0VHJhY2suYnVmZmVyLCBkdXJhdGlvbik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VHJhY2sgPSB7IGlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSksIG5hbWU6IGBNZXJnZWQgKCR7bGVmdFRyYWNrLm5hbWV9ICsgJHtyaWdodFRyYWNrLm5hbWV9KWAsIGJ1ZmZlcjogbWVyZ2VkQnVmZmVyLCBzdGFydFRpbWU6IGxlZnRUcmFjay5zdGFydFRpbWUsIHRyaW1TdGFydDogMCwgZHVyYXRpb246IG1lcmdlZEJ1ZmZlci5kdXJhdGlvbiwgbGFuZTogdGFyZ2V0TGFuZSwgdm9sdW1lOiAxLjAsIGlzTXV0ZWQ6IGZhbHNlLCBpc1NvbG86IGZhbHNlLCBjb2xvcjogbGVmdFRyYWNrLmNvbG9yLCBicG06IGxlZnRUcmFjay5icG0gPT09IHJpZ2h0VHJhY2suYnBtID8gbGVmdFRyYWNrLmJwbSA6IHVuZGVmaW5lZCwgY3Jvc3NmYWRlTWV0YWRhdGE6IHsgbGVmdDogbGVmdFRyYWNrLCByaWdodDogcmlnaHRUcmFjaywgZHVyYXRpb24gfSB9OwogICAgICAgICAgICAgICAgICAgIHNldFRyYWNrcyhwcmV2ID0+IHsgY29uc3QgZmlsdGVyZWQgPSBwcmV2LmZpbHRlcih0ID0+IHQuaWQgIT09IGxlZnRUcmFjay5pZCAmJiB0LmlkICE9PSByaWdodFRyYWNrLmlkKTsgcmV0dXJuIFsuLi5maWx0ZXJlZCwgbmV3VHJhY2tdOyB9KTsKICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFRyYWNrSWQobmV3VHJhY2suaWQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlRvIGNyb3NzZmFkZSwgcGxhY2UgdHdvIGNsaXBzIHNpZGUtYnktc2lkZSBvbiB0aGUgc2FtZSBsYW5lIGFuZCBtb3ZlIHRoZSBwbGF5aGVhZCB0byB0aGVpciBtZWV0aW5nIHBvaW50LiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2V0QXBwU3RhdGUoQXBwU3RhdGUuRURJVElORyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IG5ld0VmZmVjdHMgPSB7IC4uLih0cmFjay5hY3RpdmVFZmZlY3RzIHx8IHt9KSB9OwogICAgICAgICAgICBpZiAocGFyYW1zPy5yZXN0b3JlKSB7CiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdmYWRlSW4nKQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdFZmZlY3RzLmZhZGVJbjsKICAgICAgICAgICAgICAgIGlmIChlZmZlY3RJZCA9PT0gJ2ZhZGVPdXQnKQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdFZmZlY3RzLmZhZGVPdXQ7CiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdlcScpCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5ld0VmZmVjdHMuZXFQcmVzZXQ7CiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdub3JtYWxpemUnKQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdFZmZlY3RzLm5vcm1hbGl6ZTsKICAgICAgICAgICAgICAgIGlmIChlZmZlY3RJZCA9PT0gJ3JldmVyc2UnKQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdFZmZlY3RzLnJldmVyc2U7CiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdyZW1vdmVWb2NhbHMnKQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdFZmZlY3RzLnZvY2FsUmVtb3ZlcjsKICAgICAgICAgICAgICAgIGlmIChlZmZlY3RJZCA9PT0gJ2lzb2xhdGVWb2NhbHMnKQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdFZmZlY3RzLnZvY2FsSXNvbGF0b3I7CiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdzcGVlZCcpIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3RWZmZWN0cy5wbGF5YmFja1JhdGU7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5ld0VmZmVjdHMucHJlc2VydmVQaXRjaDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlZmZlY3RJZCAhPT0gJ2FwcGx5QWN0aXZlRmFkZXMnKSB7CiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdmYWRlSW4nKQogICAgICAgICAgICAgICAgICAgIG5ld0VmZmVjdHMuZmFkZUluID0gcGFyYW1zPy5kdXJhdGlvbjsKICAgICAgICAgICAgICAgIGlmIChlZmZlY3RJZCA9PT0gJ2ZhZGVPdXQnKQogICAgICAgICAgICAgICAgICAgIG5ld0VmZmVjdHMuZmFkZU91dCA9IHBhcmFtcz8uZHVyYXRpb247CiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdlcScpCiAgICAgICAgICAgICAgICAgICAgbmV3RWZmZWN0cy5lcVByZXNldCA9IHBhcmFtcz8ucHJlc2V0OwogICAgICAgICAgICAgICAgaWYgKGVmZmVjdElkID09PSAnbm9ybWFsaXplJykKICAgICAgICAgICAgICAgICAgICBuZXdFZmZlY3RzLm5vcm1hbGl6ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdyZXZlcnNlJykKICAgICAgICAgICAgICAgICAgICBuZXdFZmZlY3RzLnJldmVyc2UgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKGVmZmVjdElkID09PSAnc3BlZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgbmV3RWZmZWN0cy5wbGF5YmFja1JhdGUgPSBwYXJhbXM/LnBsYXliYWNrUmF0ZTsKICAgICAgICAgICAgICAgICAgICBuZXdFZmZlY3RzLnByZXNlcnZlUGl0Y2ggPSBwYXJhbXM/LnByZXNlcnZlUGl0Y2g7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocGFyYW1zPy50b2dnbGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdub3JtYWxpemUnKQogICAgICAgICAgICAgICAgICAgICAgICBuZXdFZmZlY3RzLm5vcm1hbGl6ZSA9ICF0cmFjay5hY3RpdmVFZmZlY3RzPy5ub3JtYWxpemU7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVmZmVjdElkID09PSAncmV2ZXJzZScpCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0VmZmVjdHMucmV2ZXJzZSA9ICF0cmFjay5hY3RpdmVFZmZlY3RzPy5yZXZlcnNlOwogICAgICAgICAgICAgICAgICAgIGlmIChlZmZlY3RJZCA9PT0gJ3JlbW92ZVZvY2FscycpCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0VmZmVjdHMudm9jYWxSZW1vdmVyID0gIXRyYWNrLmFjdGl2ZUVmZmVjdHM/LnZvY2FsUmVtb3ZlcjsKICAgICAgICAgICAgICAgICAgICBpZiAoZWZmZWN0SWQgPT09ICdpc29sYXRlVm9jYWxzJykKICAgICAgICAgICAgICAgICAgICAgICAgbmV3RWZmZWN0cy52b2NhbElzb2xhdG9yID0gIXRyYWNrLmFjdGl2ZUVmZmVjdHM/LnZvY2FsSXNvbGF0b3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gLS0tIEVmZmVjdCBQaXBlbGluZSAtLS0KICAgICAgICAgICAgbGV0IHBpcGVsaW5lQnVmZmVyID0gdHJhY2sub3JpZ2luYWxCdWZmZXIgfHwgdHJhY2suYnVmZmVyOwogICAgICAgICAgICAvLyAxLiBSZXZlcnNlCiAgICAgICAgICAgIGlmIChuZXdFZmZlY3RzLnJldmVyc2UpIHsKICAgICAgICAgICAgICAgIHBpcGVsaW5lQnVmZmVyID0gcmV2ZXJzZUJ1ZmZlcihwaXBlbGluZUJ1ZmZlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gMi4gU3BlZWQgLyBUaW1lIFN0cmV0Y2gKICAgICAgICAgICAgaWYgKG5ld0VmZmVjdHMucGxheWJhY2tSYXRlICYmIG5ld0VmZmVjdHMucGxheWJhY2tSYXRlICE9PSAxLjApIHsKICAgICAgICAgICAgICAgIHBpcGVsaW5lQnVmZmVyID0gYXdhaXQgY2hhbmdlU3BlZWQocGlwZWxpbmVCdWZmZXIsIG5ld0VmZmVjdHMucGxheWJhY2tSYXRlLCBuZXdFZmZlY3RzLnByZXNlcnZlUGl0Y2gpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIDMuIEVRCiAgICAgICAgICAgIGlmIChuZXdFZmZlY3RzLmVxUHJlc2V0KSB7CiAgICAgICAgICAgICAgICBwaXBlbGluZUJ1ZmZlciA9IGF3YWl0IGFwcGx5RVEocGlwZWxpbmVCdWZmZXIsIG5ld0VmZmVjdHMuZXFQcmVzZXQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIDQuIFZvY2FsIFByb2Nlc3NpbmcgKEthcmFva2UvSXNvbGF0ZSkKICAgICAgICAgICAgaWYgKG5ld0VmZmVjdHMudm9jYWxJc29sYXRvcikgewogICAgICAgICAgICAgICAgcGlwZWxpbmVCdWZmZXIgPSBhd2FpdCBpc29sYXRlVm9jYWxzKHBpcGVsaW5lQnVmZmVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChuZXdFZmZlY3RzLnZvY2FsUmVtb3ZlcikgewogICAgICAgICAgICAgICAgcGlwZWxpbmVCdWZmZXIgPSBhd2FpdCByZW1vdmVWb2NhbHMocGlwZWxpbmVCdWZmZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIDUuIE5vcm1hbGl6ZQogICAgICAgICAgICBpZiAobmV3RWZmZWN0cy5ub3JtYWxpemUpIHsKICAgICAgICAgICAgICAgIHBpcGVsaW5lQnVmZmVyID0gbm9ybWFsaXplQnVmZmVyKHBpcGVsaW5lQnVmZmVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyA2LiBGYWRlcwogICAgICAgICAgICBpZiAobmV3RWZmZWN0cy5mYWRlSW4pIHsKICAgICAgICAgICAgICAgIHBpcGVsaW5lQnVmZmVyID0gYXdhaXQgYXBwbHlGYWRlKHBpcGVsaW5lQnVmZmVyLCAnaW4nLCBuZXdFZmZlY3RzLmZhZGVJbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG5ld0VmZmVjdHMuZmFkZU91dCkgewogICAgICAgICAgICAgICAgcGlwZWxpbmVCdWZmZXIgPSBhd2FpdCBhcHBseUZhZGUocGlwZWxpbmVCdWZmZXIsICdvdXQnLCBuZXdFZmZlY3RzLmZhZGVPdXQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHRyYWNrVXBkYXRlcyA9IHsgYnVmZmVyOiBwaXBlbGluZUJ1ZmZlciwgb3JpZ2luYWxCdWZmZXI6IHRyYWNrLm9yaWdpbmFsQnVmZmVyIHx8IHRyYWNrLmJ1ZmZlciwgYWN0aXZlRWZmZWN0czogbmV3RWZmZWN0cywgZHVyYXRpb246IHBpcGVsaW5lQnVmZmVyLmR1cmF0aW9uIH07CiAgICAgICAgICAgIGlmIChlZmZlY3RJZCA9PT0gJ3NwZWVkJyAmJiB0cmFjay5icG0pIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJhdGUgPSBuZXdFZmZlY3RzLnBsYXliYWNrUmF0ZSB8fCAxLjA7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdCcG0gPSBNYXRoLnJvdW5kKHRyYWNrLmJwbSAqIHJhdGUpOwogICAgICAgICAgICAgICAgbGV0IG5ld05hbWUgPSB0cmFjay5uYW1lOwogICAgICAgICAgICAgICAgY29uc3QgYnBtUmVnZXggPSAvXChcZCtccypCUE1cKS9pOwogICAgICAgICAgICAgICAgY29uc3QgYnBtU3RyaW5nID0gYCgke25ld0JwbX0gQlBNKWA7CiAgICAgICAgICAgICAgICBpZiAoYnBtUmVnZXgudGVzdChuZXdOYW1lKSkgewogICAgICAgICAgICAgICAgICAgIG5ld05hbWUgPSBuZXdOYW1lLnJlcGxhY2UoYnBtUmVnZXgsIGJwbVN0cmluZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBuZXdOYW1lID0gYCR7bmV3TmFtZX0gJHticG1TdHJpbmd9YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRyYWNrVXBkYXRlcy5uYW1lID0gbmV3TmFtZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cGRhdGVUcmFjayh0cmFjay5pZCwgdHJhY2tVcGRhdGVzKTsKICAgICAgICAgICAgc2V0QXBwU3RhdGUoQXBwU3RhdGUuRURJVElORyk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgIHNldEFwcFN0YXRlKEFwcFN0YXRlLkVSUk9SKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlQWRkQmVhdCA9IChnZW5lcmF0ZWRCdWZmZXIsIG5hbWUpID0+IHsKICAgICAgICBwdXNoSGlzdG9yeSgpOwogICAgICAgIGNvbnN0IGluc2VydGlvbiA9IGdldFNtYXJ0SW5zZXJ0aW9uUG9pbnQoZ2VuZXJhdGVkQnVmZmVyLmR1cmF0aW9uKTsKICAgICAgICBsZXQgcGFyc2VkQnBtOwogICAgICAgIGNvbnN0IGJwbU1hdGNoID0gbmFtZS5tYXRjaCgvXCgoXGQrKVxzKkJQTVwpLyk7CiAgICAgICAgaWYgKGJwbU1hdGNoICYmIGJwbU1hdGNoWzFdKQogICAgICAgICAgICBwYXJzZWRCcG0gPSBwYXJzZUludChicG1NYXRjaFsxXSk7CiAgICAgICAgc2V0VHJhY2tzKHByZXYgPT4gWy4uLnByZXYsIHsKICAgICAgICAgICAgICAgIGlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSksCiAgICAgICAgICAgICAgICBuYW1lLAogICAgICAgICAgICAgICAgYnVmZmVyOiBnZW5lcmF0ZWRCdWZmZXIsCiAgICAgICAgICAgICAgICBzdGFydFRpbWU6IGluc2VydGlvbi5zdGFydFRpbWUsCiAgICAgICAgICAgICAgICB0cmltU3RhcnQ6IDAsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZ2VuZXJhdGVkQnVmZmVyLmR1cmF0aW9uLAogICAgICAgICAgICAgICAgbGFuZTogaW5zZXJ0aW9uLmxhbmUsCiAgICAgICAgICAgICAgICB2b2x1bWU6IDAuOCwKICAgICAgICAgICAgICAgIGlzTXV0ZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNTb2xvOiBmYWxzZSwKICAgICAgICAgICAgICAgIGNvbG9yOiBUUkFDS19DT0xPUlNbaW5zZXJ0aW9uLmxhbmUgJSBUUkFDS19DT0xPUlMubGVuZ3RoXSwKICAgICAgICAgICAgICAgIGJwbTogcGFyc2VkQnBtLAogICAgICAgICAgICAgICAgaXNMb29waW5nOiB0cnVlCiAgICAgICAgICAgIH1dKTsKICAgICAgICBzZXRJc1RyaW1Nb2RlKGZhbHNlKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVFeHBvcnQgPSBhc3luYyAodGFyZ2V0UmF0ZSwgZm9ybWF0KSA9PiB7CiAgICAgICAgaWYgKHRyYWNrcy5sZW5ndGggPT09IDApCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBzZXRBcHBTdGF0ZShBcHBTdGF0ZS5QUk9DRVNTSU5HKTsKICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IG1peGVkID0gYXdhaXQgbWl4VHJhY2tzKHRyYWNrcywgbWF4RHVyYXRpb24pOwogICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gYXdhaXQgcmVzYW1wbGVCdWZmZXIobWl4ZWQsIHRhcmdldFJhdGUpOwogICAgICAgICAgICAgICAgbGV0IGJsb2I7CiAgICAgICAgICAgICAgICBsZXQgZXh0ZW5zaW9uOwogICAgICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gJ21wMycpIHsKICAgICAgICAgICAgICAgICAgICBibG9iID0gZW5jb2RlTVAzKHByb2Nlc3NlZCk7CiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gJ21wMyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChmb3JtYXQgPT09ICdmbGFjJykgewogICAgICAgICAgICAgICAgICAgIGJsb2IgPSBlbmNvZGVGTEFDKHByb2Nlc3NlZCk7CiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gJ2ZsYWMnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYmxvYiA9IGVuY29kZVdBVihwcm9jZXNzZWQpOwogICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9ICd3YXYnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gYHNvbmljcG9ja2V0X21peF8ke0RhdGUubm93KCl9LiR7ZXh0ZW5zaW9ufWA7CiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICBhbGVydCgiRXhwb3J0IGZhaWxlZDogIiArIChlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiBTdHJpbmcoZSkpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIHNldEFwcFN0YXRlKEFwcFN0YXRlLkVESVRJTkcpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgMTAwKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVXaGVlbCA9IChlKSA9PiB7IGlmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGNvbnN0IG5ld1pvb20gPSB6b29tICsgKC1lLmRlbHRhWSAqIDAuNSk7CiAgICAgICAgcGVyZm9ybVpvb20obmV3Wm9vbSk7CiAgICB9IH07CiAgICBjb25zdCBoYW5kbGVTYXZlQW5kQ2xvc2UgPSBhc3luYyAoKSA9PiB7IGlmIChzYXZlVGltZW91dFJlZi5jdXJyZW50KQogICAgICAgIGNsZWFyVGltZW91dChzYXZlVGltZW91dFJlZi5jdXJyZW50KTsgdHJ5IHsKICAgICAgICBpZiAoKHRyYWNrcy5sZW5ndGggPiAwIHx8IGN1cnJlbnRQcm9qZWN0SWQpICYmICFpZ25vcmVDaGFuZ2VzUmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgbGV0IHBpZCA9IGN1cnJlbnRQcm9qZWN0SWQ7CiAgICAgICAgICAgIGxldCBwbmFtZSA9IGN1cnJlbnRQcm9qZWN0TmFtZTsKICAgICAgICAgICAgaWYgKCFwaWQgJiYgdHJhY2tzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgbG9hZFByb2plY3RzKCk7CiAgICAgICAgICAgICAgICBwaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7CiAgICAgICAgICAgICAgICBwbmFtZSA9IGBQcm9qZWN0ICR7cHJvamVjdHMubGVuZ3RoICsgMX1gOwogICAgICAgICAgICAgICAgc2V0Q3VycmVudFByb2plY3RJZChwaWQpOwogICAgICAgICAgICAgICAgc2V0Q3VycmVudFByb2plY3ROYW1lKHBuYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocGlkKSB7CiAgICAgICAgICAgICAgICBzZXRTYXZlU3RhdHVzKCdzYXZpbmcnKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRodW1iID0gZ2VuZXJhdGVQcm9qZWN0UHJldmlldyh0cmFja3MsIDEwMCwgMTAwKTsKICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVQcm9qZWN0KHBpZCwgcG5hbWUsIHRyYWNrcywgdGh1bWIpOwogICAgICAgICAgICAgICAgc2V0UmVjZW50UHJvamVjdFByZXZpZXcodGh1bWIpOwogICAgICAgICAgICAgICAgc2V0U2F2ZVN0YXR1cygnc2F2ZWQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgbG9hZFByb2plY3RzKCk7CiAgICAgICAgICAgIHNldFNhdmVkUHJvamVjdHModXBkYXRlZCk7CiAgICAgICAgfQogICAgfQogICAgY2F0Y2ggKGUpIHsKICAgICAgICBhbGVydCgiQ291bGQgbm90IHNhdmUgcHJvamVjdC4gQ2hlY2sgeW91ciBkZXZpY2Ugc3RvcmFnZS4iKTsKICAgICAgICBzZXRTYXZlU3RhdHVzKCd1bnNhdmVkJyk7CiAgICB9IHNldEFwcFN0YXRlKEFwcFN0YXRlLkxJQlJBUlkpOyB9OwogICAgY29uc3QgaGFuZGxlTmV3UHJvamVjdCA9ICgpID0+IHsgc3RvcFBsYXliYWNrKCk7IGlmIChzYXZlVGltZW91dFJlZi5jdXJyZW50KQogICAgICAgIGNsZWFyVGltZW91dChzYXZlVGltZW91dFJlZi5jdXJyZW50KTsgaWdub3JlQ2hhbmdlc1JlZi5jdXJyZW50ID0gdHJ1ZTsgc2V0VHJhY2tzKFtdKTsgc2V0SGlzdG9yeShbXSk7IHNldFNlbGVjdGlvbihudWxsKTsgc2V0Q3VycmVudFRpbWUoMCk7IHNldEN1cnJlbnRQcm9qZWN0SWQobnVsbCk7IHNldEN1cnJlbnRQcm9qZWN0TmFtZSgiIik7IHNldFJlY2VudFByb2plY3RQcmV2aWV3KG51bGwpOyBzZXRTYXZlU3RhdHVzKCdzYXZlZCcpOyBzZXRMb2FkRXJyb3IobnVsbCk7IHNldEludGVyYWN0aXZlTW9kZShudWxsKTsgc2V0QXBwU3RhdGUoQXBwU3RhdGUuSURMRSk7IHNldFRpbWVvdXQoKCkgPT4geyBpZ25vcmVDaGFuZ2VzUmVmLmN1cnJlbnQgPSBmYWxzZTsgfSwgMTAwKTsgfTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7IGlmIChpZ25vcmVDaGFuZ2VzUmVmLmN1cnJlbnQpCiAgICAgICAgcmV0dXJuOyBpZiAodHJhY2tzLmxlbmd0aCA9PT0gMCAmJiAhY3VycmVudFByb2plY3RJZCkKICAgICAgICByZXR1cm47IGlzRGlydHlSZWYuY3VycmVudCA9IHRydWU7IHNldFNhdmVTdGF0dXMoJ3Vuc2F2ZWQnKTsgaWYgKHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpCiAgICAgICAgY2xlYXJUaW1lb3V0KHNhdmVUaW1lb3V0UmVmLmN1cnJlbnQpOyBzYXZlVGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7IGlmICghaXNEaXJ0eVJlZi5jdXJyZW50KQogICAgICAgIHJldHVybjsgaWYgKGFwcFN0YXRlICE9PSBBcHBTdGF0ZS5FRElUSU5HKQogICAgICAgIHJldHVybjsgc2V0U2F2ZVN0YXR1cygnc2F2aW5nJyk7IHRyeSB7CiAgICAgICAgbGV0IHBpZCA9IGN1cnJlbnRQcm9qZWN0SWQ7CiAgICAgICAgbGV0IHBuYW1lID0gY3VycmVudFByb2plY3ROYW1lOwogICAgICAgIGlmICghcGlkKSB7CiAgICAgICAgICAgIGNvbnN0IHByb2plY3RzID0gYXdhaXQgbG9hZFByb2plY3RzKCk7CiAgICAgICAgICAgIHBpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTsKICAgICAgICAgICAgcG5hbWUgPSBgUHJvamVjdCAke3Byb2plY3RzLmxlbmd0aCArIDF9YDsKICAgICAgICAgICAgc2V0Q3VycmVudFByb2plY3RJZChwaWQpOwogICAgICAgICAgICBzZXRDdXJyZW50UHJvamVjdE5hbWUocG5hbWUpOwogICAgICAgIH0KICAgICAgICBjb25zdCB0aHVtYiA9IGdlbmVyYXRlUHJvamVjdFByZXZpZXcodHJhY2tzLCAxMDAsIDEwMCk7CiAgICAgICAgc2V0UmVjZW50UHJvamVjdFByZXZpZXcodGh1bWIpOwogICAgICAgIGF3YWl0IHNhdmVQcm9qZWN0KHBpZCwgcG5hbWUsIHRyYWNrcywgdGh1bWIpOwogICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBsb2FkUHJvamVjdHMoKTsKICAgICAgICBzZXRTYXZlZFByb2plY3RzKHVwZGF0ZWQpOwogICAgICAgIGlzRGlydHlSZWYuY3VycmVudCA9IGZhbHNlOwogICAgICAgIHNldFNhdmVTdGF0dXMoJ3NhdmVkJyk7CiAgICB9CiAgICBjYXRjaCAoZSkgewogICAgICAgIHNldFNhdmVTdGF0dXMoJ3Vuc2F2ZWQnKTsKICAgIH0gfSwgMjAwMCk7IHJldHVybiAoKSA9PiB7IGlmIChzYXZlVGltZW91dFJlZi5jdXJyZW50KQogICAgICAgIGNsZWFyVGltZW91dChzYXZlVGltZW91dFJlZi5jdXJyZW50KTsgfTsgfSwgW3RyYWNrcywgY3VycmVudFByb2plY3RJZCwgY3VycmVudFByb2plY3ROYW1lLCBhcHBTdGF0ZV0pOwogICAgY29uc3QgaGFuZGxlUG9pbnRlckRvd25DYXB0dXJlID0gKGUpID0+IHsKICAgICAgICBhY3RpdmVQb2ludGVycy5jdXJyZW50LnNldChlLnBvaW50ZXJJZCwgeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICAgICAgICBpZiAoYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplID09PSAyKSB7CiAgICAgICAgICAgIHNldElzWm9vbWluZyh0cnVlKTsKICAgICAgICAgICAgaWYgKGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChsb25nUHJlc3NUaW1lclJlZi5jdXJyZW50KTsKICAgICAgICAgICAgICAgIGxvbmdQcmVzc1RpbWVyUmVmLmN1cnJlbnQgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChkcmFnZ2luZ1RyYWNrSWQpCiAgICAgICAgICAgICAgICBzZXREcmFnZ2luZ1RyYWNrSWQobnVsbCk7CiAgICAgICAgICAgIGlmICh0cmltU3RhdGUpCiAgICAgICAgICAgICAgICBzZXRUcmltU3RhdGUobnVsbCk7CiAgICAgICAgICAgIGlmIChpbnRlcmFjdGl2ZU1vZGUpCiAgICAgICAgICAgICAgICBzZXRJbnRlcmFjdGl2ZU1vZGUobnVsbCk7CiAgICAgICAgICAgIC8vIEZJWDogQ2FuY2VsIHRpbWVsaW5lIHRhcCB0byBwcmV2ZW50IHBsYXloZWFkIGp1bXAgb24gcmVsZWFzZQogICAgICAgICAgICBkcmFnUmVmLmN1cnJlbnQuaXNUaW1lbGluZVRhcCA9IGZhbHNlOwogICAgICAgICAgICBjb25zdCBwb2ludHMgPSBBcnJheS5mcm9tKGFjdGl2ZVBvaW50ZXJzLmN1cnJlbnQudmFsdWVzKCkpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5oeXBvdChwb2ludHNbMF0ueCAtIHBvaW50c1sxXS54LCBwb2ludHNbMF0ueSAtIHBvaW50c1sxXS55KTsKICAgICAgICAgICAgY29uc3QgZGlzdFggPSBNYXRoLmFicyhwb2ludHNbMF0ueCAtIHBvaW50c1sxXS54KTsKICAgICAgICAgICAgY29uc3QgZGlzdFkgPSBNYXRoLmFicyhwb2ludHNbMF0ueSAtIHBvaW50c1sxXS55KTsKICAgICAgICAgICAgcGluY2hTdGF0ZS5jdXJyZW50ID0gewogICAgICAgICAgICAgICAgbW9kZTogbnVsbCwKICAgICAgICAgICAgICAgIHN0YXJ0RGlzdDogZGlzdCwKICAgICAgICAgICAgICAgIHN0YXJ0RGlzdFg6IGRpc3RYLAogICAgICAgICAgICAgICAgc3RhcnREaXN0WTogZGlzdFksCiAgICAgICAgICAgICAgICBzdGFydFpvb206IHpvb21SZWYuY3VycmVudCwgLy8gVXNlIFJlZiBmb3IgcmVsaWFiaWxpdHkKICAgICAgICAgICAgICAgIHN0YXJ0TGFuZUhlaWdodDogbGFuZUhlaWdodFJlZi5jdXJyZW50LCAvLyBVc2UgUmVmIGZvciByZWxpYWJpbGl0eQogICAgICAgICAgICAgICAgaXNMb2NrZWQ6IGZhbHNlCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmIChkcmFnUmVmLmN1cnJlbnQuaXNUaW1lbGluZVRhcCAmJiBhY3RpdmVQb2ludGVycy5jdXJyZW50LnNpemUgPT09IDEpIHsKICAgICAgICAgICAgY29uc3QgZGlzdCA9IE1hdGguYWJzKGUuY2xpZW50WCAtIGRyYWdSZWYuY3VycmVudC50aW1lbGluZVN0YXJ0WCk7CiAgICAgICAgICAgIGlmIChkaXN0ID4gMTApIHsKICAgICAgICAgICAgICAgIGRyYWdSZWYuY3VycmVudC5pc1RpbWVsaW5lVGFwID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlUG9pbnRlck1vdmVDYXB0dXJlID0gKGUpID0+IHsKICAgICAgICBpZiAoYWN0aXZlUG9pbnRlcnMuY3VycmVudC5oYXMoZS5wb2ludGVySWQpKSB7CiAgICAgICAgICAgIGFjdGl2ZVBvaW50ZXJzLmN1cnJlbnQuc2V0KGUucG9pbnRlcklkLCB7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pOwogICAgICAgIH0KICAgICAgICBpZiAoYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplID4gMSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgfQogICAgICAgIGlmIChhY3RpdmVQb2ludGVycy5jdXJyZW50LnNpemUgPT09IDIpIHsKICAgICAgICAgICAgY29uc3QgcG9pbnRzID0gQXJyYXkuZnJvbShhY3RpdmVQb2ludGVycy5jdXJyZW50LnZhbHVlcygpKTsKICAgICAgICAgICAgY29uc3QgY3VyckRpc3QgPSBNYXRoLmh5cG90KHBvaW50c1swXS54IC0gcG9pbnRzWzFdLngsIHBvaW50c1swXS55IC0gcG9pbnRzWzFdLnkpOwogICAgICAgICAgICBjb25zdCBjdXJyRGlzdFggPSBNYXRoLmFicyhwb2ludHNbMF0ueCAtIHBvaW50c1sxXS54KTsKICAgICAgICAgICAgY29uc3QgY3VyckRpc3RZID0gTWF0aC5hYnMocG9pbnRzWzBdLnkgLSBwb2ludHNbMV0ueSk7CiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gcGluY2hTdGF0ZS5jdXJyZW50OwogICAgICAgICAgICBpZiAoIXN0YXRlLmlzTG9ja2VkKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbE1vdmUgPSBNYXRoLmFicyhjdXJyRGlzdCAtIHN0YXRlLnN0YXJ0RGlzdCk7CiAgICAgICAgICAgICAgICAvLyBJbmNyZWFzZWQgdGhyZXNob2xkIGZyb20gMTAgdG8gMjAgdG8gcHJldmVudCBhY2NpZGVudGFsIGxvY2tzCiAgICAgICAgICAgICAgICBpZiAodG90YWxNb3ZlID4gMjApIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVggPSBNYXRoLmFicyhjdXJyRGlzdFggLSBzdGF0ZS5zdGFydERpc3RYKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBNYXRoLmFicyhjdXJyRGlzdFkgLSBzdGF0ZS5zdGFydERpc3RZKTsKICAgICAgICAgICAgICAgICAgICAvLyBTdHJpY3QgZG9taW5hbmNlIGNoZWNrOiBpZiBZIG1vdmVkIG1vcmUgdGhhbiBYLCBpdCdzIHZlcnRpY2FsLgogICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YVkgPiBkZWx0YVgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9ICd2ZXJ0aWNhbCc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gJ2hvcml6b250YWwnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc0xvY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgLy8gRklYOiBSZS1iYXNlIHN0YXJ0IHZhbHVlcyB0byBjdXJyZW50IHZhbHVlcyB3aGVuIGxvY2tpbmcKICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBpbml0aWFsICJqaXR0ZXIiIG1vdmVtZW50IGZyb20gYmVmb3JlIHRoZSBsb2NrIGZyb20gYWZmZWN0aW5nIHRoZSB6b29tIGNhbGN1bGF0aW9uCiAgICAgICAgICAgICAgICAgICAgc3RhdGUuc3RhcnREaXN0WCA9IGN1cnJEaXN0WDsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zdGFydERpc3RZID0gY3VyckRpc3RZOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLnN0YXJ0Wm9vbSA9IHpvb21SZWYuY3VycmVudDsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zdGFydExhbmVIZWlnaHQgPSBsYW5lSGVpZ2h0UmVmLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLmlzTG9ja2VkKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHRpbWVsaW5lIHpvb20sIHVzaW5nIFggZGlzdGFuY2UgY2hhbmdlIGZlZWxzIG1vcmUgc3RyaWN0bHkgc2VwYXJhdGVkCiAgICAgICAgICAgICAgICAgICAgLy8gdGhhbiB1c2luZyBoeXBvdGVudXNlLCBlbnN1cmluZyB2ZXJ0aWNhbCBzbGlwcGFnZSBkb2Vzbid0IGFmZmVjdCB6b29tLgogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zdGFydERpc3RYID4gMTApIHsgLy8gU2FmZXR5IGNoZWNrIHRvIGF2b2lkIHVuc3RhYmxlIGRpdmlzaW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gY3VyckRpc3RYIC8gc3RhdGUuc3RhcnREaXN0WDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Wm9vbSA9IHN0YXRlLnN0YXJ0Wm9vbSAqIHNjYWxlOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgUmVmIHRvIGNhbGwgbGF0ZXN0IHBlcmZvcm1ab29tIHdoaWNoIGhhcyB1cGRhdGVkIHN0YXRlIGNsb3N1cmUKICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybVpvb21SZWYuY3VycmVudChuZXdab29tKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5tb2RlID09PSAndmVydGljYWwnKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsdGFZID0gY3VyckRpc3RZIC0gc3RhdGUuc3RhcnREaXN0WTsKICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIGNoYW5nZSBpbiBZIHRvIHZlcnRpY2FsIHpvb20gaGFuZGxlcgogICAgICAgICAgICAgICAgICAgIHBlcmZvcm1WZXJ0aWNhbFpvb20oZGVsdGFZICogMiwgc3RhdGUuc3RhcnRMYW5lSGVpZ2h0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZHJhZ1JlZi5jdXJyZW50LmlzVGltZWxpbmVUYXAgJiYgYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplID09PSAxKSB7CiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLmFicyhlLmNsaWVudFggLSBkcmFnUmVmLmN1cnJlbnQudGltZWxpbmVTdGFydFgpOwogICAgICAgICAgICBpZiAoZGlzdCA+IDEwKSB7CiAgICAgICAgICAgICAgICBkcmFnUmVmLmN1cnJlbnQuaXNUaW1lbGluZVRhcCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGhhbmRsZVBvaW50ZXJVcENhcHR1cmUgPSAoZSkgPT4gewogICAgICAgIGFjdGl2ZVBvaW50ZXJzLmN1cnJlbnQuZGVsZXRlKGUucG9pbnRlcklkKTsKICAgICAgICBpZiAoYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplIDwgMikgewogICAgICAgICAgICBzZXRJc1pvb21pbmcoZmFsc2UpOwogICAgICAgICAgICBwaW5jaFN0YXRlLmN1cnJlbnQuaXNMb2NrZWQgPSBmYWxzZTsKICAgICAgICAgICAgcGluY2hTdGF0ZS5jdXJyZW50Lm1vZGUgPSBudWxsOwogICAgICAgIH0KICAgICAgICBpZiAoZHJhZ1JlZi5jdXJyZW50LmlzVGltZWxpbmVUYXAgJiYgIWlzU2NydWJiaW5nICYmICFkcmFnZ2luZ1RyYWNrSWQgJiYgYWN0aXZlUG9pbnRlcnMuY3VycmVudC5zaXplID09PSAwKSB7CiAgICAgICAgICAgIHVwZGF0ZVBsYXloZWFkKGUuY2xpZW50WCk7CiAgICAgICAgICAgIGRyYWdSZWYuY3VycmVudC5pc1RpbWVsaW5lVGFwID0gZmFsc2U7CiAgICAgICAgfQogICAgfTsKICAgIGlmIChhcHBTdGF0ZSA9PT0gQXBwU3RhdGUuTElCUkFSWSkgewogICAgICAgIHJldHVybiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBoLWZ1bGwgYmctemluYy05NTAgdGV4dC13aGl0ZSBmb250LXNhbnMgcC02IG92ZXJmbG93LWhpZGRlbiIsIGNoaWxkcmVuOiBbX2pzeHMoImhlYWRlciIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTgiLCBjaGlsZHJlbjogW19qc3goImgxIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTN4bCBmb250LWJvbGQiLCBjaGlsZHJlbjogIlByb2plY3QgTGlicmFyeSIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTIiLCBjaGlsZHJlbjogW19qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJwcmltYXJ5Iiwgb25DbGljazogaGFuZGxlTmV3UHJvamVjdCwgbGFiZWw6ICJOZXcgUHJvamVjdCIsIGljb246IF9qc3goTmV3RG9jSWNvbiwge30pLCBjbGFzc05hbWU6ICJ0ZXh0LXNtIHB4LTQgcHktMiIgfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJzZWNvbmRhcnkiLCBvbkNsaWNrOiAoKSA9PiBzZXRBcHBTdGF0ZShBcHBTdGF0ZS5JRExFKSwgbGFiZWw6ICJDbG9zZSIgfSldIH0pXSB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHNwYWNlLXktNCIsIGNoaWxkcmVuOiBzYXZlZFByb2plY3RzLmxlbmd0aCA9PT0gMCA/IF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC16aW5jLTUwMCB0ZXh0LWNlbnRlciBweS0yMCIsIGNoaWxkcmVuOiAiTm8gc2F2ZWQgcHJvamVjdHMgeWV0LiIgfSkgOiBzYXZlZFByb2plY3RzLm1hcChwcm9qZWN0ID0+IChfanN4cygiZGl2IiwgeyBvbkNsaWNrOiAoKSA9PiB7IGlmIChlZGl0aW5nUHJvamVjdElkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyBzdG9wUGxheWJhY2soKTsgc2V0QXBwU3RhdGUoQXBwU3RhdGUuTE9BRElORyk7IHNldExvYWRFcnJvcihudWxsKTsgaWdub3JlQ2hhbmdlc1JlZi5jdXJyZW50ID0gdHJ1ZTsgc2V0VHJhY2tzKFtdKTsgc2V0SGlzdG9yeShbXSk7IHNldFNlbGVjdGlvbihudWxsKTsgc2V0U2VsZWN0ZWRUcmFja0lkKG51bGwpOyBzZXRUcmltU3RhdGUobnVsbCk7IHNldElzVHJpbU1vZGUoZmFsc2UpOyBzZXRJbnRlcmFjdGl2ZU1vZGUobnVsbCk7IHNldEN1cnJlbnRUaW1lKDApOyBzZXRTYXZlU3RhdHVzKCdzYXZlZCcpOyBjb25zdCBjdHggPSBnZXRBdWRpb0NvbnRleHQoKTsgaWYgKGN0eC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3VtZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfQogICAgICAgICAgICAgICAgICAgICAgICB9IHNldEN1cnJlbnRQcm9qZWN0SWQocHJvamVjdC5pZCk7IHNldEN1cnJlbnRQcm9qZWN0TmFtZShwcm9qZWN0Lm5hbWUpOyBzZXRSZWNlbnRQcm9qZWN0UHJldmlldyhwcm9qZWN0LnRodW1ibmFpbCB8fCBudWxsKTsgbG9hZFByb2plY3RzKCkudGhlbihmcmVzaFByb2plY3RzID0+IHsgY29uc3QgdGFyZ2V0UHJvamVjdCA9IGZyZXNoUHJvamVjdHMuZmluZChwID0+IHAuaWQgPT09IHByb2plY3QuaWQpIHx8IHByb2plY3Q7IGlmICh0YXJnZXRQcm9qZWN0LnRyYWNrcyAmJiB0YXJnZXRQcm9qZWN0LnRyYWNrcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkUHJvamVjdFRyYWNrcyh0YXJnZXRQcm9qZWN0LnRyYWNrcykudGhlbihsb2FkZWRUcmFja3MgPT4geyBpZiAobG9hZGVkVHJhY2tzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldExvYWRFcnJvcigiUHJvamVjdCBjb3JydXB0ZWQuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBzZXRUcmFja3MobG9hZGVkVHJhY2tzKTsgc2V0QXBwU3RhdGUoQXBwU3RhdGUuRURJVElORyk7IHNldFRpbWVvdXQoKCkgPT4geyBpZ25vcmVDaGFuZ2VzUmVmLmN1cnJlbnQgPSBmYWxzZTsgaXNEaXJ0eVJlZi5jdXJyZW50ID0gZmFsc2U7IH0sIDEwMCk7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VHJhY2tzKFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFwcFN0YXRlKEFwcFN0YXRlLkVESVRJTkcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGlnbm9yZUNoYW5nZXNSZWYuY3VycmVudCA9IGZhbHNlOyBpc0RpcnR5UmVmLmN1cnJlbnQgPSBmYWxzZTsgfSwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTsgfSwgY2xhc3NOYW1lOiAiYmctemluYy05MDAgYm9yZGVyIGJvcmRlci16aW5jLTgwMCByb3VuZGVkLTJ4bCBwLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQgaG92ZXI6Ym9yZGVyLWN5YW4tNTAwLzUwIHRyYW5zaXRpb24gY3Vyc29yLXBvaW50ZXIgZ3JvdXAiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy0xNiBoLTE2IGJnLXppbmMtOTUwIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuIHNocmluay0wIGJvcmRlciBib3JkZXItemluYy04MDAiLCBjaGlsZHJlbjogcHJvamVjdC50aHVtYm5haWwgPyBfanN4KCJpbWciLCB7IHNyYzogcHJvamVjdC50aHVtYm5haWwsIGFsdDogIiIsIGNsYXNzTmFtZTogInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyIG9wYWNpdHktODAiIH0pIDogX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ3LWZ1bGwgaC1mdWxsIGJnLXppbmMtODAwIiB9KSB9KSwgZWRpdGluZ1Byb2plY3RJZCA9PT0gcHJvamVjdC5pZCA/IChfanN4cygiZm9ybSIsIHsgY2xhc3NOYW1lOiAiZmxleC0xIG1pbi13LTAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiLCBvbkNsaWNrOiBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksIG9uU3VibWl0OiAoZSkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGlmIChlZGl0aW5nTmFtZS50cmltKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcm9qZWN0TmFtZShwcm9qZWN0LmlkLCBlZGl0aW5nTmFtZS50cmltKCkpLnRoZW4oKCkgPT4geyBzZXRTYXZlZFByb2plY3RzKHByZXYgPT4gcHJldi5tYXAocCA9PiBwLmlkID09PSBwcm9qZWN0LmlkID8geyAuLi5wLCBuYW1lOiBlZGl0aW5nTmFtZS50cmltKCkgfSA6IHApKTsgc2V0RWRpdGluZ1Byb2plY3RJZChudWxsKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LCBjaGlsZHJlbjogW19qc3goImlucHV0IiwgeyB0eXBlOiAidGV4dCIsIHZhbHVlOiBlZGl0aW5nTmFtZSwgb25DaGFuZ2U6IChlKSA9PiBzZXRFZGl0aW5nTmFtZShlLnRhcmdldC52YWx1ZSksIGNsYXNzTmFtZTogImJnLXppbmMtOTUwIGJvcmRlciBib3JkZXItemluYy03MDAgcm91bmRlZC1sZyBweC0zIHB5LTIgdGV4dC13aGl0ZSBmb250LWJvbGQgdy1mdWxsIiwgYXV0b0ZvY3VzOiB0cnVlLCBvbkNsaWNrOiBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkgfSksIF9qc3goImJ1dHRvbiIsIHsgdHlwZTogInN1Ym1pdCIsIGNsYXNzTmFtZTogInAtMyByb3VuZGVkLWZ1bGwgYmctemluYy04MDAgYm9yZGVyIGJvcmRlci16aW5jLTcwMCB0ZXh0LWdyZWVuLTUwMCIsIGNoaWxkcmVuOiBfanN4KENoZWNrSWNvbiwge30pIH0pXSB9KSkgOiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleC0xIG1pbi13LTAiLCBjaGlsZHJlbjogW19qc3goImgzIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIHRydW5jYXRlIiwgY2hpbGRyZW46IHByb2plY3QubmFtZSB9KSwgX2pzeCgicCIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyB0ZXh0LXppbmMtNTAwIiwgY2hpbGRyZW46IG5ldyBEYXRlKHByb2plY3QubGFzdE1vZGlmaWVkKS50b0xvY2FsZVN0cmluZygpIH0pXSB9KSksIGVkaXRpbmdQcm9qZWN0SWQgIT09IHByb2plY3QuaWQgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTIiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogKGUpID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzZXRFZGl0aW5nUHJvamVjdElkKHByb2plY3QuaWQpOyBzZXRFZGl0aW5nTmFtZShwcm9qZWN0Lm5hbWUpOyB9LCBjbGFzc05hbWU6ICJwLTMgcm91bmRlZC1mdWxsIGhvdmVyOmJnLXppbmMtODAwIHRleHQtemluYy00MDAgaG92ZXI6dGV4dC13aGl0ZSB0cmFuc2l0aW9uIiwgY2hpbGRyZW46IF9qc3goUGVuY2lsSWNvbiwge30pIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IChlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGUucHJldmVudERlZmF1bHQoKTsgc2V0UHJvamVjdFRvRGVsZXRlKHByb2plY3QuaWQpOyB9LCBjbGFzc05hbWU6ICJwLTMgcm91bmRlZC1mdWxsIGhvdmVyOmJnLXJlZC05MDAvMzAgdGV4dC16aW5jLTQwMCBob3Zlcjp0ZXh0LXJlZC00MDAgdHJhbnNpdGlvbiIsIGNoaWxkcmVuOiBfanN4KFRyYXNoSWNvbiwge30pIH0pXSB9KSldIH0sIHByb2plY3QuaWQpKSkgfSksIHByb2plY3RUb0RlbGV0ZSAmJiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmaXhlZCBpbnNldC0wIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IGJnLWJsYWNrLzgwIGJhY2tkcm9wLWJsdXItc20iLCBvbkNsaWNrOiAoKSA9PiBzZXRQcm9qZWN0VG9EZWxldGUobnVsbCksIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy16aW5jLTkwMCBib3JkZXIgYm9yZGVyLXppbmMtODAwIHJvdW5kZWQtMnhsIHctZnVsbCBtYXgtdy14cyBwLTYgc2hhZG93LTJ4bCBzcGFjZS15LTYgdGV4dC1jZW50ZXIiLCBvbkNsaWNrOiBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjaGlsZHJlbjogX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQteGwgZm9udC1ib2xkIHRleHQtd2hpdGUiLCBjaGlsZHJlbjogIkRlbGV0ZSBQcm9qZWN0PyIgfSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTMiLCBjaGlsZHJlbjogW19qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJzZWNvbmRhcnkiLCBvbkNsaWNrOiAoKSA9PiBzZXRQcm9qZWN0VG9EZWxldGUobnVsbCksIGxhYmVsOiAiQ2FuY2VsIiB9KSwgX2pzeChCdXR0b24sIHsgdmFyaWFudDogImRhbmdlciIsIG9uQ2xpY2s6ICgpID0+IHsgaWYgKHByb2plY3RUb0RlbGV0ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVQcm9qZWN0KHByb2plY3RUb0RlbGV0ZSkudGhlbigoKSA9PiBsb2FkUHJvamVjdHMoKS50aGVuKHNldFNhdmVkUHJvamVjdHMpKTsgc2V0UHJvamVjdFRvRGVsZXRlKG51bGwpOyB9LCBsYWJlbDogIkRlbGV0ZSIgfSldIH0pXSB9KSB9KSldIH0pKTsKICAgIH0KICAgIHJldHVybiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBsYW5kc2NhcGU6ZmxleC1yb3cgbGFuZHNjYXBlOnhsOmZsZXgtY29sIGgtZnVsbCBiZy16aW5jLTk1MCB0ZXh0LXdoaXRlIGZvbnQtc2FucyBzZWxlY3Rpb246YmctY3lhbi01MDAvMzAgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIiwgY2hpbGRyZW46IFthcHBTdGF0ZSA9PT0gQXBwU3RhdGUuTE9BRElORyAmJiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIHotWzEwMF0gYmctemluYy05NTAvOTAgYmFja2Ryb3AtYmx1ci1tZCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBzcGFjZS15LTYgcC04IHRleHQtY2VudGVyIiwgY2hpbGRyZW46IGxvYWRFcnJvciA/IChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC14bCBmb250LWJvbGQgdGV4dC13aGl0ZSIsIGNoaWxkcmVuOiAiRXJyb3IiIH0pLCBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXppbmMtNDAwIiwgY2hpbGRyZW46IGxvYWRFcnJvciB9KSwgX2pzeChCdXR0b24sIHsgdmFyaWFudDogInNlY29uZGFyeSIsIG9uQ2xpY2s6ICgpID0+IHNldEFwcFN0YXRlKEFwcFN0YXRlLkxJQlJBUlkpLCBsYWJlbDogIkxpYnJhcnkiIH0pXSB9KSkgOiBfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4KExvYWRpbmdTcGlubmVyLCB7fSksIF9qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQtemluYy00MDAgYW5pbWF0ZS1wdWxzZSIsIGNoaWxkcmVuOiAiTG9hZGluZy4uLiIgfSldIH0pIH0pKSwgX2pzeChIZWFkZXIsIHsgY3VycmVudFByb2plY3ROYW1lOiBjdXJyZW50UHJvamVjdE5hbWUsIHNhdmVTdGF0dXM6IHNhdmVTdGF0dXMsIGhhc1Byb2plY3RJZDogISFjdXJyZW50UHJvamVjdElkLCBoaXN0b3J5TGVuZ3RoOiBoaXN0b3J5Lmxlbmd0aCwgdHJhY2tzQ291bnQ6IHRyYWNrcy5sZW5ndGgsIHpvb206IHpvb20sIGN1cnJlbnRUaW1lOiBjdXJyZW50VGltZSwgbWF4RHVyYXRpb246IG1heER1cmF0aW9uLCByZWNlbnRQcm9qZWN0UHJldmlldzogcmVjZW50UHJvamVjdFByZXZpZXcsIG9uWm9vbTogcGVyZm9ybVpvb20sIG9uVW5kbzogaGFuZGxlVW5kbywgb25FeHBvcnQ6ICgpID0+IHNldEV4cG9ydE1vZGFsT3Blbih0cnVlKSwgb25TYXZlQW5kQ2xvc2U6IGhhbmRsZVNhdmVBbmRDbG9zZSwgbWluWm9vbTogbWluWm9vbSB9KSwgX2pzeHMoIm1haW4iLCB7IGNsYXNzTmFtZTogImZsZXgtMSBmbGV4IGZsZXgtY29sIHJlbGF0aXZlIG92ZXJmbG93LWhpZGRlbiBiZy16aW5jLTk1MCB0b3VjaC1ub25lIiwgCiAgICAgICAgICAgICAgICAvLyBSZW1vdmVkIGlubGluZSBvbldoZWVsIHRvIHJlbHkgb24gZ2xvYmFsIGxpc3RlbmVyIGZvciBjb25zaXN0ZW5jeQogICAgICAgICAgICAgICAgb25Qb2ludGVyRG93bkNhcHR1cmU6IGhhbmRsZVBvaW50ZXJEb3duQ2FwdHVyZSwgb25Qb2ludGVyVXBDYXB0dXJlOiBoYW5kbGVQb2ludGVyVXBDYXB0dXJlLCBvblBvaW50ZXJDYW5jZWxDYXB0dXJlOiBoYW5kbGVQb2ludGVyVXBDYXB0dXJlLCBvblBvaW50ZXJNb3ZlQ2FwdHVyZTogaGFuZGxlUG9pbnRlck1vdmVDYXB0dXJlLCBvblBvaW50ZXJNb3ZlOiAoZSkgPT4geyBoYW5kbGVUcmltUG9pbnRlck1vdmUoZSk7IGhhbmRsZVRyYWNrRHJhZ01vdmUoZSk7IGlmIChzZWxlY3RlZFRyYWNrKQogICAgICAgICAgICAgICAgICAgIGhhbmRsZUZhZGVIYW5kbGVEcmFnKGUsIHNlbGVjdGVkVHJhY2spOyBpZiAoaXNTY3J1YmJpbmcpCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlUGxheWhlYWRQb2ludGVyTW92ZShlKTsgfSwgb25Qb2ludGVyVXA6IChlKSA9PiB7IGlmICh0cmltU3RhdGUpCiAgICAgICAgICAgICAgICAgICAgc2V0VHJpbVN0YXRlKG51bGwpOyBpZiAoZHJhZ2dpbmdUcmFja0lkKQogICAgICAgICAgICAgICAgICAgIGhhbmRsZVRyYWNrUG9pbnRlclVwKGUsIHRyYWNrcy5maW5kKHQgPT4gdC5pZCA9PT0gZHJhZ2dpbmdUcmFja0lkKSk7IGlmIChpbnRlcmFjdGl2ZU1vZGUgJiYgc2VsZWN0ZWRUcmFjaykKICAgICAgICAgICAgICAgICAgICBoYW5kbGVGYWRlSGFuZGxlUG9pbnRlclVwKGUsIHNlbGVjdGVkVHJhY2spOyBpZiAoaXNTY3J1YmJpbmcpCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlUGxheWhlYWRQb2ludGVyVXAoZSk7IH0sIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJoaWRkZW4gbGFuZHNjYXBlOmZsZXggbGFuZHNjYXBlOnhsOmhpZGRlbiB3LWZ1bGwgaC03IGJnLXppbmMtOTUwIGJvcmRlci1iIGJvcmRlci16aW5jLTkwMCBpdGVtcy1jZW50ZXIgcHgtNCBzaHJpbmstMCB6LTIwIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC00IHRleHQtWzEwcHhdIGZvbnQtYm9sZCB0ZXh0LXppbmMtNTAwIiwgY2hpbGRyZW46IFtfanN4cygic3BhbiIsIHsgY2xhc3NOYW1lOiAidXBwZXJjYXNlIiwgY2hpbGRyZW46IFsiVFJBQ0tTOiAiLCB0cmFja3MubGVuZ3RoXSB9KSwgX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogInRhYnVsYXItbnVtcyBub3JtYWwtY2FzZSIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1jeWFuLTUwMCIsIGNoaWxkcmVuOiBmb3JtYXRUaW1lKGN1cnJlbnRUaW1lKSB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC16aW5jLTYwMCBteC0yIiwgY2hpbGRyZW46ICIvIiB9KSwgX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46IGZvcm1hdFRpbWUobWF4RHVyYXRpb24pIH0pXSB9KV0gfSkgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleC0xIHJlbGF0aXZlIG92ZXJmbG93LWhpZGRlbiB3LWZ1bGwiLCBjaGlsZHJlbjogdHJhY2tzLmxlbmd0aCA9PT0gMCA/IChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtemluYy01MDAgZ2FwLTQiLCBjaGlsZHJlbjogW19qc3goInAiLCB7IGNoaWxkcmVuOiAiTm8gdHJhY2tzIGFkZGVkLiIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTQiLCBjaGlsZHJlbjogW19qc3goQnV0dG9uLCB7IGxhYmVsOiAiQWRkIEF1ZGlvIiwgb25DbGljazogKCkgPT4gZmlsZUlucHV0UmVmLmN1cnJlbnQ/LmNsaWNrKCkgfSksIF9qc3goQnV0dG9uLCB7IGxhYmVsOiAiTGlicmFyeSIsIHZhcmlhbnQ6ICJzZWNvbmRhcnkiLCBpY29uOiBfanN4KExpYnJhcnlJY29uLCB7fSksIG9uQ2xpY2s6IGhhbmRsZVNhdmVBbmRDbG9zZSB9KV0gfSldIH0pKSA6IChfanN4KFRpbWVsaW5lLCB7IHJlZjogdGltZWxpbmVSZWYsIHBsYXloZWFkUmVmOiBwbGF5aGVhZFJlZiwgdHJhY2tzOiB0cmFja3MsIGN1cnJlbnRUaW1lOiBjdXJyZW50VGltZSwgem9vbTogem9vbSwgbWF4RHVyYXRpb246IG1heER1cmF0aW9uLCB0b3RhbExhbmVzOiB0b3RhbExhbmVzLCBiZWF0RHVyYXRpb246IGJlYXREdXJhdGlvbiwgc2VsZWN0aW9uOiBzZWxlY3Rpb24sIHNlbGVjdGVkVHJhY2tJZDogZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkLCBkcmFnZ2luZ1RyYWNrSWQ6IGRyYWdnaW5nVHJhY2tJZCwgdHJpbVN0YXRlOiB0cmltU3RhdGUsIGludGVyYWN0aXZlTW9kZTogaW50ZXJhY3RpdmVNb2RlLCBpc1RyaW1Nb2RlOiBpc1RyaW1Nb2RlLCBpc1NjcnViYmluZzogaXNTY3J1YmJpbmcsIGxhbmVIZWlnaHQ6IGxhbmVIZWlnaHQsIGlzWm9vbWluZzogaXNab29taW5nLCB2aWV3cG9ydFdpZHRoOiB2aWV3cG9ydFdpZHRoLCBvblNjcm9sbDogaGFuZGxlVGltZWxpbmVTY3JvbGwsIG9uVGltZWxpbmVQb2ludGVyRG93bjogaGFuZGxlVGltZWxpbmVQb2ludGVyRG93biwgb25QbGF5aGVhZFBvaW50ZXJEb3duOiBoYW5kbGVQbGF5aGVhZFBvaW50ZXJEb3duLCBvblBsYXloZWFkUG9pbnRlck1vdmU6IGhhbmRsZVBsYXloZWFkUG9pbnRlck1vdmUsIG9uUGxheWhlYWRQb2ludGVyVXA6IGhhbmRsZVBsYXloZWFkUG9pbnRlclVwLCBvblRyYWNrUG9pbnRlckRvd246IGhhbmRsZVRyYWNrUG9pbnRlckRvd24sIG9uVHJhY2tQb2ludGVyVXA6IGhhbmRsZVRyYWNrUG9pbnRlclVwLCBvblRyYWNrUG9pbnRlckNhbmNlbDogaGFuZGxlVHJhY2tQb2ludGVyQ2FuY2VsLCBvblRyaW1Qb2ludGVyRG93bjogaGFuZGxlVHJpbVBvaW50ZXJEb3duLCBvblRyaW1Qb2ludGVyVXA6IGhhbmRsZVRyaW1Qb2ludGVyVXAsIG9uRmFkZUhhbmRsZVBvaW50ZXJEb3duOiBoYW5kbGVGYWRlSGFuZGxlUG9pbnRlckRvd24sIG9uVHJhY2tEb3VibGVDbGljazogaGFuZGxlVHJhY2tEb3VibGVDbGljaywgb25NdXRlOiAoaWQsIG11dGVkKSA9PiB1cGRhdGVUcmFjayhpZCwgeyBpc011dGVkOiBtdXRlZCB9KSwgb25EZWxldGU6IGRlbGV0ZVRyYWNrLCBvblNlbGVjdGlvbkNoYW5nZTogc2V0U2VsZWN0aW9uLCBvbkNvbG9yQ2hhbmdlOiAoaWQsIGNvbG9yKSA9PiB1cGRhdGVUcmFjayhpZCwgeyBjb2xvciB9KSB9KSkgfSldIH0pLCBfanN4KFRyYW5zcG9ydENvbnRyb2xzLCB7IGlzUGxheWluZzogaXNQbGF5aW5nLCBpc1JlY29yZGluZzogaXNSZWNvcmRpbmcsIHNlbGVjdGVkVHJhY2tJZDogZWZmZWN0aXZlU2VsZWN0ZWRUcmFja0lkLCBpc1RyaW1Nb2RlOiBpc1RyaW1Nb2RlLCBpbnRlcmFjdGl2ZU1vZGU6IGludGVyYWN0aXZlTW9kZSwgc2VsZWN0aW9uOiBzZWxlY3Rpb24sIGhhc1RyYWNrczogdHJhY2tzLmxlbmd0aCA+IDAsIHJlY2VudFByb2plY3RQcmV2aWV3OiByZWNlbnRQcm9qZWN0UHJldmlldywgb25QbGF5UGF1c2U6IGhhbmRsZVBsYXlQYXVzZSwgb25Ub2dnbGVSZWNvcmQ6IGhhbmRsZVRvZ2dsZVJlY29yZCwgb25DdXQ6IGhhbmRsZUN1dCwgb25Dcm9wOiBoYW5kbGVDcm9wLCBvbkVmZmVjdHM6ICgpID0+IGludGVyYWN0aXZlTW9kZSA/IHNldEludGVyYWN0aXZlTW9kZShudWxsKSA6IHNldEVmZmVjdHNNb2RhbE9wZW4odHJ1ZSksIG9uSW1wb3J0Q2xpY2s6ICgpID0+IGZpbGVJbnB1dFJlZi5jdXJyZW50Py5jbGljaygpLCBvbkJlYXRDbGljazogKCkgPT4gc2V0QmVhdE1vZGFsT3Blbih0cnVlKSwgb25MaWJyYXJ5Q2xpY2s6IGhhbmRsZVNhdmVBbmRDbG9zZSB9KSwgX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJmaWxlIiwgbXVsdGlwbGU6IHRydWUsIHJlZjogZmlsZUlucHV0UmVmLCBvbkNoYW5nZTogaGFuZGxlRmlsZVVwbG9hZCwgYWNjZXB0OiAiYXVkaW8vKix2aWRlby8qLC5tcDMsLndhdiwubTRhLC5mbGFjLC5vZ2csLmFhYywubXA0LC5tb3YsLndlYm0iLCBjbGFzc05hbWU6ICJoaWRkZW4iIH0pLCBfanN4KEJlYXRNYWtlck1vZGFsLCB7IGlzT3BlbjogaXNCZWF0TW9kYWxPcGVuLCBvbkNsb3NlOiAoKSA9PiBzZXRCZWF0TW9kYWxPcGVuKGZhbHNlKSwgb25HZW5lcmF0ZTogaGFuZGxlQWRkQmVhdCwgaW5pdGlhbEJwbTogcHJvamVjdEJwbSB9KSwgX2pzeChFZmZlY3RzTW9kYWwsIHsgaXNPcGVuOiBpc0VmZmVjdHNNb2RhbE9wZW4sIG9uQ2xvc2U6ICgpID0+IHNldEVmZmVjdHNNb2RhbE9wZW4oZmFsc2UpLCBvbkFwcGx5OiBoYW5kbGVBcHBseUVmZmVjdCwgYWN0aXZlRWZmZWN0czogc2VsZWN0ZWRUcmFjaz8uYWN0aXZlRWZmZWN0cywgaXNDcm9zc2ZhZGVkOiAhIXNlbGVjdGVkVHJhY2s/LmNyb3NzZmFkZU1ldGFkYXRhLCBjdXJyZW50Vm9sdW1lOiBzZWxlY3RlZFRyYWNrPy52b2x1bWUsIHRyYWNrQnBtOiBzZWxlY3RlZFRyYWNrPy5icG0gfSksIF9qc3goRXhwb3J0TW9kYWwsIHsgaXNPcGVuOiBpc0V4cG9ydE1vZGFsT3Blbiwgb25DbG9zZTogKCkgPT4gc2V0RXhwb3J0TW9kYWxPcGVuKGZhbHNlKSwgb25FeHBvcnQ6IGhhbmRsZUV4cG9ydCwgb3JpZ2luYWxTYW1wbGVSYXRlOiBwcm9qZWN0U2FtcGxlUmF0ZSB9KV0gfSkpOwp9OwpleHBvcnQgZGVmYXVsdCBBcHA7Cg==","@/components/EffectsModal":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvQnV0dG9uJzsKLy8gSWNvbnMKY29uc3QgRXF1YWxpemVySWNvbiA9ICgpID0+IChfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNiBoLTYiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTIgNlY0bTAgMmEyIDIgMCAxMDAgNG0wLTRhMiAyIDAgMTEwIDRtLTYgOGEyIDIgMCAxMDAtNG0wIDRhMiAyIDAgMTEwLTRtMCA0djJtMC02VjRtNiA2djEwbTYtMmEyIDIgMCAxMDAtNG0wIDRhMiAyIDAgMTEwLTRtMCA0djJtMC02VjQiIH0pIH0pKTsKY29uc3QgTm9ybWFsaXplSWNvbiA9ICgpID0+IChfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNiBoLTYiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMyAxMy4xMjVDMyAxMi41MDQgMy41MDQgMTIgNC4xMjUgMTJoMi4yNWMuNjIxIDAgMS4xMjUuNTA0IDEuMTI1IDEuMTI1djYuNzVDNy41IDIwLjQ5NiA2Ljk5NiAyMSA2LjM3NSAyMWgtMi4yNUExLjEyNSAxLjEyNSAwIDAxMyAxOS44NzV2LTYuNzV6TTkuNzUgOC42MjVjMC0uNjIxLjUwNC0xLjEyNSAxLjEyNS0xLjEyNWgyLjI1Yy42MjEgMCAxLjEyNS41MDQgMS4xMjUgMS4xMjV2MTEuMjVjMCAuNjIxLS41MDQgMS4xMjUtMS4xMjUgMS4xMjVoLTIuMjVhMS4xMjUgMS4xMjUgMCAwMS0xLjEyNS0xLjEyNVY4LjYyNXpNMTYuNSA0LjEyNWMwLS42MjEuNTA0LTEuMTI1IDEuMTI1LTEuMTI1aDIuMjVDMjAuNDk2IDMgMjEgMy41MDQgMjEgNC4xMjV2MTUuNzVjMCAuNjIxLS41MDQgMS4xMjUtMS4xMjUgMS4xMjVoLTIuMjVhMS4xMjUgMS4xMjUgMCAwMS0xLjEyNS0xLjEyNVY0LjEyNXoiIH0pIH0pKTsKY29uc3QgUmV2ZXJzZUljb24gPSAoKSA9PiAoX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTYgaC02IiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTkgMTVMMyA5bTAgMGw2LTZNMyA5aDEyYTYgNiAwIDAxMCAxMmgtMyIgfSkgfSkpOwpjb25zdCBTcGVlZEljb24gPSAoKSA9PiAoX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTYgaC02IiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTEyIDZ2Nmg0LjVtNC41IDBhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6IiB9KSB9KSk7CmNvbnN0IFZvbHVtZUljb24gPSAoKSA9PiAoX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTYgaC02IiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTE5LjExNCA1LjYzNmE5IDkgMCAwMTAgMTIuNzI4TTE2LjQ2MyA4LjI4OGE1LjI1IDUuMjUgMCAwMTAgNy40MjRNNi43NSA4LjI1bDQuNzItNC43MmEuNzUuNzUgMCAwMTEuMjguNTN2MTUuODhhLjc1Ljc1IDAgMDEtMS4yOC41M2wtNC43Mi00LjcySDQuNTFjLS44OCAwLTEuNzA0LS41MDctMS45MzgtMS4zNTRBOS4wMSA5LjAxIDAgMDEyLjI1IDEyYzAtLjgzLjExMi0xLjYzMy4zMjItMi4zOTZDMi44MDYgOC43NTYgMy42MyA4LjI1IDQuNTEgOC4yNUg2Ljc1eiIgfSkgfSkpOwpjb25zdCBDcm9zc2ZhZGVJY29uID0gKCkgPT4gKF9qc3hzKCJzdmciLCB7IGNsYXNzTmFtZTogInctNiBoLTYiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogW19qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTE5IDE5Yy0xLjUgMC0zLTEtNC0zbC02LThjLTEtMi0yLjUtMy00LTMiIH0pLCBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk01IDE5YzEuNSAwIDMtMSA0LTNsNi04YzEtMiAyLjUtMyA0LTMiIH0pXSB9KSk7CmNvbnN0IEVmZmVjdHNNb2RhbCA9ICh7IGlzT3Blbiwgb25DbG9zZSwgb25BcHBseSwgYWN0aXZlRWZmZWN0cywgaXNDcm9zc2ZhZGVkLCBjdXJyZW50Vm9sdW1lID0gMS4wLCB0cmFja0JwbSB9KSA9PiB7CiAgICBjb25zdCBbc2VsZWN0ZWRFZmZlY3RJZCwgc2V0U2VsZWN0ZWRFZmZlY3RJZF0gPSB1c2VTdGF0ZShudWxsKTsKICAgIGNvbnN0IFtjdXN0b21WYWx1ZSwgc2V0Q3VzdG9tVmFsdWVdID0gdXNlU3RhdGUoJycpOwogICAgLy8gRGVkaWNhdGVkIHN0YXRlIGZvciBTcGVlZCBNZW51CiAgICBjb25zdCBbcGVuZGluZ1NwZWVkLCBzZXRQZW5kaW5nU3BlZWRdID0gdXNlU3RhdGUoMS4wKTsKICAgIGNvbnN0IFtwcmVzZXJ2ZVBpdGNoLCBzZXRQcmVzZXJ2ZVBpdGNoXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGlmICghaXNPcGVuKQogICAgICAgIHJldHVybiBudWxsOwogICAgY29uc3QgZWZmZWN0cyA9IFsKICAgICAgICB7IGlkOiAnZmFkZUluJywgbGFiZWw6ICdGYWRlIEluJywgaWNvbjogJ+KXoicsIGlzU3VibWVudTogdHJ1ZSB9LAogICAgICAgIHsgaWQ6ICdmYWRlT3V0JywgbGFiZWw6ICdGYWRlIE91dCcsIGljb246ICfil6MnLCBpc1N1Ym1lbnU6IHRydWUgfSwKICAgICAgICB7IGlkOiAnY3Jvc3NmYWRlJywgbGFiZWw6ICdDcm9zc2ZhZGUnLCBpY29uOiBfanN4KENyb3NzZmFkZUljb24sIHt9KSwgaXNTdWJtZW51OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2VxJywgbGFiZWw6ICdFUScsIGljb246IF9qc3goRXF1YWxpemVySWNvbiwge30pLCBpc1N1Ym1lbnU6IHRydWUgfSwKICAgICAgICB7IGlkOiAnbm9ybWFsaXplJywgbGFiZWw6ICdOb3JtYWxpemUnLCBpY29uOiBfanN4KE5vcm1hbGl6ZUljb24sIHt9KSwgaXNTdWJtZW51OiBmYWxzZSB9LAogICAgICAgIHsgaWQ6ICdyZXZlcnNlJywgbGFiZWw6ICdSZXZlcnNlJywgaWNvbjogX2pzeChSZXZlcnNlSWNvbiwge30pLCBpc1N1Ym1lbnU6IGZhbHNlIH0sCiAgICAgICAgeyBpZDogJ3NwZWVkJywgbGFiZWw6ICdTcGVlZCcsIGljb246IF9qc3goU3BlZWRJY29uLCB7fSksIGlzU3VibWVudTogdHJ1ZSB9LAogICAgICAgIHsgaWQ6ICd2b2x1bWUnLCBsYWJlbDogJ1ZvbHVtZScsIGljb246IF9qc3goVm9sdW1lSWNvbiwge30pLCBpc1N1Ym1lbnU6IHRydWUgfSwKICAgIF07CiAgICBjb25zdCBlcVByZXNldHMgPSBbCiAgICAgICAgJ0Jhc3MgQm9vc3QnLAogICAgICAgICdUcmVibGUgQm9vc3QnLAogICAgICAgICdCYXNzIEN1dCcsCiAgICAgICAgJ1RyZWJsZSBDdXQnLAogICAgICAgICdNaWQgQm9vc3QnLAogICAgICAgICdWLVNoYXBlJywKICAgICAgICAnTG8tRmkgUmFkaW8nLAogICAgICAgICdUZWxlcGhvbmUnCiAgICBdOwogICAgY29uc3QgY2hlY2tBY3RpdmUgPSAoaWQpID0+IHsKICAgICAgICBpZiAoaWQgPT09ICdmYWRlSW4nKQogICAgICAgICAgICByZXR1cm4gISFhY3RpdmVFZmZlY3RzPy5mYWRlSW47CiAgICAgICAgaWYgKGlkID09PSAnZmFkZU91dCcpCiAgICAgICAgICAgIHJldHVybiAhIWFjdGl2ZUVmZmVjdHM/LmZhZGVPdXQ7CiAgICAgICAgaWYgKGlkID09PSAnY3Jvc3NmYWRlJykKICAgICAgICAgICAgcmV0dXJuICEhaXNDcm9zc2ZhZGVkOwogICAgICAgIGlmIChpZCA9PT0gJ25vcm1hbGl6ZScpCiAgICAgICAgICAgIHJldHVybiAhIWFjdGl2ZUVmZmVjdHM/Lm5vcm1hbGl6ZTsKICAgICAgICBpZiAoaWQgPT09ICdyZXZlcnNlJykKICAgICAgICAgICAgcmV0dXJuICEhYWN0aXZlRWZmZWN0cz8ucmV2ZXJzZTsKICAgICAgICBpZiAoaWQgPT09ICdlcScpCiAgICAgICAgICAgIHJldHVybiAhIWFjdGl2ZUVmZmVjdHM/LmVxUHJlc2V0OwogICAgICAgIGlmIChpZCA9PT0gJ3NwZWVkJykKICAgICAgICAgICAgcmV0dXJuICEhYWN0aXZlRWZmZWN0cz8ucGxheWJhY2tSYXRlICYmIGFjdGl2ZUVmZmVjdHMucGxheWJhY2tSYXRlICE9PSAxLjA7CiAgICAgICAgaWYgKGlkID09PSAndm9sdW1lJykgewogICAgICAgICAgICBjb25zdCB2b2wgPSB0eXBlb2YgY3VycmVudFZvbHVtZSA9PT0gJ251bWJlcicgPyBjdXJyZW50Vm9sdW1lIDogMS4wOwogICAgICAgICAgICByZXR1cm4gTWF0aC5hYnModm9sIC0gMS4wKSA+IDAuMDE7IC8vIEFjdGl2ZSBpZiBub3QgMTAwJQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgY29uc3QgaGFuZGxlRWZmZWN0Q2xpY2sgPSAoZngpID0+IHsKICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGNoZWNrQWN0aXZlKGZ4LmlkKTsKICAgICAgICBpZiAoZnguaXNTdWJtZW51KSB7CiAgICAgICAgICAgIHNldFNlbGVjdGVkRWZmZWN0SWQoZnguaWQpOwogICAgICAgICAgICAvLyBTZXQgZGVmYXVsdCBjdXN0b20gdmFsdWVzCiAgICAgICAgICAgIGlmIChmeC5pZCA9PT0gJ3NwZWVkJykgewogICAgICAgICAgICAgICAgc2V0UGVuZGluZ1NwZWVkKGFjdGl2ZUVmZmVjdHM/LnBsYXliYWNrUmF0ZSB8fCAxLjApOwogICAgICAgICAgICAgICAgc2V0UHJlc2VydmVQaXRjaCghIWFjdGl2ZUVmZmVjdHM/LnByZXNlcnZlUGl0Y2gpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGZ4LmlkID09PSAndm9sdW1lJykgewogICAgICAgICAgICAgICAgc2V0Q3VzdG9tVmFsdWUoTWF0aC5yb3VuZChjdXJyZW50Vm9sdW1lICogMTAwKS50b1N0cmluZygpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChmeC5pZCA9PT0gJ2ZhZGVJbicgfHwgZnguaWQgPT09ICdmYWRlT3V0JykgewogICAgICAgICAgICAgICAgc2V0Q3VzdG9tVmFsdWUoJzMuMCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgc2V0Q3VzdG9tVmFsdWUoJycpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAvLyBGb3IgdG9nZ2xlcyAoTm9ybWFsaXplLCBSZXZlcnNlKQogICAgICAgICAgICBpZiAoaXNBY3RpdmUpIHsKICAgICAgICAgICAgICAgIG9uQXBwbHkoZnguaWQsIHsgcmVzdG9yZTogdHJ1ZSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIG9uQXBwbHkoZnguaWQsIHsgdG9nZ2xlOiB0cnVlIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9uQ2xvc2UoKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlQXBwbHlXaXRoRHVyYXRpb24gPSAoZHVyYXRpb24pID0+IHsKICAgICAgICBpZiAoc2VsZWN0ZWRFZmZlY3RJZCkgewogICAgICAgICAgICBvbkFwcGx5KHNlbGVjdGVkRWZmZWN0SWQsIHsgZHVyYXRpb24gfSk7CiAgICAgICAgICAgIG9uQ2xvc2UoKTsKICAgICAgICAgICAgc2V0U2VsZWN0ZWRFZmZlY3RJZChudWxsKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlQXBwbHlQcmVzZXQgPSAocHJlc2V0KSA9PiB7CiAgICAgICAgaWYgKHNlbGVjdGVkRWZmZWN0SWQpIHsKICAgICAgICAgICAgb25BcHBseShzZWxlY3RlZEVmZmVjdElkLCB7IHByZXNldCB9KTsKICAgICAgICAgICAgb25DbG9zZSgpOwogICAgICAgICAgICBzZXRTZWxlY3RlZEVmZmVjdElkKG51bGwpOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVBcHBseVZvbHVtZSA9IChwZXJjZW50KSA9PiB7CiAgICAgICAgaWYgKHNlbGVjdGVkRWZmZWN0SWQpIHsKICAgICAgICAgICAgb25BcHBseShzZWxlY3RlZEVmZmVjdElkLCB7IGxldmVsOiBwZXJjZW50IC8gMTAwIH0pOwogICAgICAgICAgICBvbkNsb3NlKCk7CiAgICAgICAgICAgIHNldFNlbGVjdGVkRWZmZWN0SWQobnVsbCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGhhbmRsZUludGVyYWN0aXZlID0gKCkgPT4gewogICAgICAgIGlmIChzZWxlY3RlZEVmZmVjdElkKSB7CiAgICAgICAgICAgIG9uQXBwbHkoc2VsZWN0ZWRFZmZlY3RJZCwgeyBpbnRlcmFjdGl2ZTogdHJ1ZSB9KTsKICAgICAgICAgICAgb25DbG9zZSgpOwogICAgICAgICAgICBzZXRTZWxlY3RlZEVmZmVjdElkKG51bGwpOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVBdXRvbWF0aW9uID0gKCkgPT4gewogICAgICAgIGlmIChzZWxlY3RlZEVmZmVjdElkKSB7CiAgICAgICAgICAgIG9uQXBwbHkoc2VsZWN0ZWRFZmZlY3RJZCwgeyBhdXRvbWF0aW9uOiB0cnVlIH0pOwogICAgICAgICAgICBvbkNsb3NlKCk7CiAgICAgICAgICAgIHNldFNlbGVjdGVkRWZmZWN0SWQobnVsbCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGhhbmRsZVJlc3RvcmUgPSAoKSA9PiB7CiAgICAgICAgaWYgKHNlbGVjdGVkRWZmZWN0SWQpIHsKICAgICAgICAgICAgb25BcHBseShzZWxlY3RlZEVmZmVjdElkLCB7IHJlc3RvcmU6IHRydWUgfSk7CiAgICAgICAgICAgIG9uQ2xvc2UoKTsKICAgICAgICAgICAgc2V0U2VsZWN0ZWRFZmZlY3RJZChudWxsKTsKICAgICAgICB9CiAgICB9OwogICAgLy8gQ29tbW9uIG1vZGFsIGNvbnRhaW5lciBjbGFzcyAtIEFnZ3Jlc3NpdmVseSBjb21wYWN0ZWQgZm9yIGxhbmRzY2FwZQogICAgY29uc3QgbW9kYWxDb250YWluZXJDbGFzcyA9ICJiZy16aW5jLTkwMCBib3JkZXIgYm9yZGVyLXppbmMtODAwIHJvdW5kZWQtMnhsIHctZnVsbCBtYXgtdy1zbSBwLTYgbGFuZHNjYXBlOnAtMiBzaGFkb3ctMnhsIHNwYWNlLXktNCBsYW5kc2NhcGU6c3BhY2UteS0xIG1iLTQgc206bWItMCBsYW5kc2NhcGU6bWItMCBsYW5kc2NhcGU6bWF4LWgtWzk1dmhdIGxhbmRzY2FwZTpvdmVyZmxvdy15LWF1dG8gbm8tc2Nyb2xsYmFyIjsKICAgIGNvbnN0IG1vZGFsT3ZlcmxheUNsYXNzID0gImZpeGVkIGluc2V0LTAgei01MCBmbGV4IGl0ZW1zLWVuZCBzbTppdGVtcy1jZW50ZXIgbGFuZHNjYXBlOml0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibGFjay84MCBiYWNrZHJvcC1ibHVyLXNtIHAtNCBsYW5kc2NhcGU6cC0yIGFuaW1hdGUtaW4gZmFkZS1pbiBkdXJhdGlvbi0yMDAiOwogICAgLy8gLS0tIFN1Yi1tZW51IGZvciBFUSAtLS0KICAgIGlmIChzZWxlY3RlZEVmZmVjdElkID09PSAnZXEnKSB7CiAgICAgICAgcmV0dXJuIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogbW9kYWxPdmVybGF5Q2xhc3MsIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6IG1vZGFsQ29udGFpbmVyQ2xhc3MsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJvcmRlci1iIGJvcmRlci16aW5jLTgwMCBwYi0yIGxhbmRzY2FwZTpwYi0xIiwgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC1sZyBmb250LWJvbGQgdGV4dC13aGl0ZSIsIGNoaWxkcmVuOiAiU2VsZWN0IEVRIFByZXNldCIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTIiLCBjaGlsZHJlbjogW2NoZWNrQWN0aXZlKCdlcScpICYmIChfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IGhhbmRsZVJlc3RvcmUsIGNsYXNzTmFtZTogInRleHQteHMgZm9udC1ib2xkIHRleHQtcmVkLTQwMCBiZy1yZWQtOTAwLzIwIHB4LTIgcHktMSByb3VuZGVkIGhvdmVyOmJnLXJlZC05MDAvNTAiLCBjaGlsZHJlbjogIlJlbW92ZSIgfSkpLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFNlbGVjdGVkRWZmZWN0SWQobnVsbCksIGNsYXNzTmFtZTogInRleHQtemluYy01MDAgaG92ZXI6dGV4dC13aGl0ZSB0ZXh0LXNtIiwgY2hpbGRyZW46ICJCYWNrIiB9KV0gfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTIgbGFuZHNjYXBlOmdhcC0xIG1heC1oLVszMDBweF0gb3ZlcmZsb3cteS1hdXRvIG5vLXNjcm9sbGJhciIsIGNoaWxkcmVuOiBlcVByZXNldHMubWFwKHByZXNldCA9PiAoX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVBcHBseVByZXNldChwcmVzZXQpLCBjbGFzc05hbWU6IGBweS0zIHB4LTIgbGFuZHNjYXBlOnB5LTEuNSByb3VuZGVkLWxnIHRyYW5zaXRpb24gZm9udC1tZWRpdW0gdGV4dC1zbSAke2FjdGl2ZUVmZmVjdHM/LmVxUHJlc2V0ID09PSBwcmVzZXQgPyAnYmctY3lhbi05MDAvNTAgdGV4dC1jeWFuLTQwMCByaW5nLTEgcmluZy1jeWFuLTUwMCcgOiAnYmctemluYy04MDAgdGV4dC16aW5jLTMwMCBob3ZlcjpiZy1jeWFuLTkwMC8zMCd9YCwgY2hpbGRyZW46IHByZXNldCB9LCBwcmVzZXQpKSkgfSldIH0pIH0pKTsKICAgIH0KICAgIC8vIC0tLSBTdWItbWVudSBmb3IgRmFkZXMgLS0tCiAgICBpZiAoc2VsZWN0ZWRFZmZlY3RJZCA9PT0gJ2ZhZGVJbicgfHwgc2VsZWN0ZWRFZmZlY3RJZCA9PT0gJ2ZhZGVPdXQnIHx8IHNlbGVjdGVkRWZmZWN0SWQgPT09ICdjcm9zc2ZhZGUnKSB7CiAgICAgICAgY29uc3QgaXNGYWRlID0gc2VsZWN0ZWRFZmZlY3RJZCAhPT0gJ2Nyb3NzZmFkZSc7CiAgICAgICAgcmV0dXJuIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogbW9kYWxPdmVybGF5Q2xhc3MsIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6IG1vZGFsQ29udGFpbmVyQ2xhc3MsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJvcmRlci1iIGJvcmRlci16aW5jLTgwMCBwYi0yIGxhbmRzY2FwZTpwYi0xIGgtMTAgbGFuZHNjYXBlOmgtOCIsIGNoaWxkcmVuOiBbX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtbGcgZm9udC1ib2xkIHRleHQtd2hpdGUiLCBjaGlsZHJlbjogIlNlbGVjdCBEdXJhdGlvbiIgfSksIGlzRmFkZSAmJiAoX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBoYW5kbGVJbnRlcmFjdGl2ZSwgY2xhc3NOYW1lOiAiYmcteWVsbG93LTUwMCBob3ZlcjpiZy15ZWxsb3ctNDAwIHRleHQtYmxhY2sgcHgtNCBweS0xIHJvdW5kZWQtbWQgZm9udC1ib2xkIHRleHQtbGcgbGFuZHNjYXBlOnRleHQtc20gc2hhZG93LWxnIHNoYWRvdy15ZWxsb3ctNTAwLzIwIHRyYW5zaXRpb24gYWN0aXZlOnNjYWxlLTk1IiwgY2hpbGRyZW46ICJTbGlkZXIiIH0pKSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtMiIsIGNoaWxkcmVuOiBbY2hlY2tBY3RpdmUoc2VsZWN0ZWRFZmZlY3RJZCkgJiYgKF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlUmVzdG9yZSwgY2xhc3NOYW1lOiAidGV4dC14cyBmb250LWJvbGQgdGV4dC1yZWQtNDAwIGJnLXJlZC05MDAvMjAgcHgtMiBweS0xIHJvdW5kZWQgaG92ZXI6YmctcmVkLTkwMC81MCIsIGNoaWxkcmVuOiAiUmVtb3ZlIiB9KSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0U2VsZWN0ZWRFZmZlY3RJZChudWxsKSwgY2xhc3NOYW1lOiAidGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtc20iLCBjaGlsZHJlbjogIkJhY2siIH0pXSB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZ3JpZCBncmlkLWNvbHMtMyBnYXAtMiBsYW5kc2NhcGU6Z2FwLTEiLCBjaGlsZHJlbjogWzAuMjUsIDAuNSwgMS4wLCAyLjAsIDMuMCwgNS4wXS5tYXAoZCA9PiAoX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gaGFuZGxlQXBwbHlXaXRoRHVyYXRpb24oZCksIGNsYXNzTmFtZTogInB5LTMgbGFuZHNjYXBlOnB5LTEuNSBiZy16aW5jLTgwMCByb3VuZGVkLWxnIGhvdmVyOmJnLWN5YW4tOTAwLzUwIGhvdmVyOnRleHQtY3lhbi00MDAgdHJhbnNpdGlvbiBmb250LW1lZGl1bSIsIGNoaWxkcmVuOiBbZCwgInMiXSB9LCBkKSkpIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGdhcC0yIGl0ZW1zLWNlbnRlciBwdC0yIGxhbmRzY2FwZTpwdC0xIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQtemluYy01MDAgdXBwZXJjYXNlIGZvbnQtYm9sZCIsIGNoaWxkcmVuOiAiQ3VzdG9tOiIgfSksIF9qc3goImlucHV0IiwgeyB0eXBlOiAibnVtYmVyIiwgdmFsdWU6IGN1c3RvbVZhbHVlLCBvbkNoYW5nZTogKGUpID0+IHNldEN1c3RvbVZhbHVlKGUudGFyZ2V0LnZhbHVlKSwgY2xhc3NOYW1lOiAiYmctemluYy05NTAgYm9yZGVyIGJvcmRlci16aW5jLTcwMCByb3VuZGVkIHB4LTIgcHktMSBsYW5kc2NhcGU6cHktMC41IHctMjAgdGV4dC1jZW50ZXIgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctY3lhbi01MDAgb3V0bGluZS1ub25lIiB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC16aW5jLTUwMCIsIGNoaWxkcmVuOiAicyIgfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJwcmltYXJ5IiwgbGFiZWw6ICJBcHBseSIsIG9uQ2xpY2s6ICgpID0+IGhhbmRsZUFwcGx5V2l0aER1cmF0aW9uKHBhcnNlRmxvYXQoY3VzdG9tVmFsdWUpIHx8IDEpLCBjbGFzc05hbWU6ICJweS0xIHB4LTMgdGV4dC1zbSBoLTggbWwtYXV0byIgfSldIH0pXSB9KSB9KSk7CiAgICB9CiAgICAvLyAtLS0gU3ViLW1lbnUgZm9yIFNwZWVkIC0tLQogICAgaWYgKHNlbGVjdGVkRWZmZWN0SWQgPT09ICdzcGVlZCcpIHsKICAgICAgICBjb25zdCBwcmVzZXRzID0gWzAuNSwgMC43NSwgMS4wLCAxLjI1LCAxLjUsIDIuMF07CiAgICAgICAgY29uc3QgY3VycmVudEJwbSA9IHRyYWNrQnBtIHx8IDA7CiAgICAgICAgY29uc3QgdGFyZ2V0QnBtID0gY3VycmVudEJwbSA/IE1hdGgucm91bmQoY3VycmVudEJwbSAqIHBlbmRpbmdTcGVlZCkgOiAwOwogICAgICAgIHJldHVybiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6IG1vZGFsT3ZlcmxheUNsYXNzLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiBtb2RhbENvbnRhaW5lckNsYXNzLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBib3JkZXItYiBib3JkZXItemluYy04MDAgcGItMiBsYW5kc2NhcGU6cGItMSIsIGNoaWxkcmVuOiBbX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtbGcgZm9udC1ib2xkIHRleHQtd2hpdGUiLCBjaGlsZHJlbjogIlBsYXliYWNrIFNwZWVkIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtMiIsIGNoaWxkcmVuOiBbY2hlY2tBY3RpdmUoJ3NwZWVkJykgJiYgKF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlUmVzdG9yZSwgY2xhc3NOYW1lOiAidGV4dC14cyBmb250LWJvbGQgdGV4dC1yZWQtNDAwIGJnLXJlZC05MDAvMjAgcHgtMiBweS0xIHJvdW5kZWQgaG92ZXI6YmctcmVkLTkwMC81MCIsIGNoaWxkcmVuOiAiUmVzZXQiIH0pKSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRTZWxlY3RlZEVmZmVjdElkKG51bGwpLCBjbGFzc05hbWU6ICJ0ZXh0LXppbmMtNTAwIGhvdmVyOnRleHQtd2hpdGUgdGV4dC1zbSIsIGNoaWxkcmVuOiAiQmFjayIgfSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctemluYy04MDAvNTAgcm91bmRlZC14bCBwLTMgc3BhY2UteS0zIiwgY2hpbGRyZW46IFtjdXJyZW50QnBtID4gMCAmJiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0yIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtY29sIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LVsxMHB4XSB0ZXh0LXppbmMtNTAwIGZvbnQtYm9sZCB1cHBlcmNhc2UiLCBjaGlsZHJlbjogIk9yaWdpbmFsIEJQTSIgfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtemluYy00MDAgZm9udC1tb25vIHRleHQtc20iLCBjaGlsZHJlbjogY3VycmVudEJwbSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgaXRlbXMtZW5kIGZsZXgtMSIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1bMTBweF0gdGV4dC16aW5jLTUwMCBmb250LWJvbGQgdXBwZXJjYXNlIiwgY2hpbGRyZW46ICJUYXJnZXQgQlBNIiB9KSwgX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJudW1iZXIiLCBjbGFzc05hbWU6ICJiZy16aW5jLTk1MCBib3JkZXIgYm9yZGVyLXppbmMtNzAwIHJvdW5kZWQgcHgtMiBweS0xIHctMjAgdGV4dC1yaWdodCBmb250LW1vbm8gdGV4dC1jeWFuLTQwMCBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1jeWFuLTUwMCBvdXRsaW5lLW5vbmUiLCB2YWx1ZTogdGFyZ2V0QnBtIHx8ICcnLCBvbkNoYW5nZTogKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPiAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBlbmRpbmdTcGVlZCh2YWwgLyBjdXJyZW50QnBtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KV0gfSldIH0pKSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0yIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtd2hpdGUiLCBjaGlsZHJlbjogIlNwZWVkIE11bHRpcGxpZXIiIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSIsIGNoaWxkcmVuOiBbX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJudW1iZXIiLCBzdGVwOiAiMC4wNSIsIGNsYXNzTmFtZTogImJnLXppbmMtOTUwIGJvcmRlciBib3JkZXItemluYy03MDAgcm91bmRlZCBweC0yIHB5LTEgdy0yMCB0ZXh0LXJpZ2h0IGZvbnQtbW9ubyB0ZXh0LXdoaXRlIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLWN5YW4tNTAwIG91dGxpbmUtbm9uZSIsIHZhbHVlOiBwYXJzZUZsb2F0KHBlbmRpbmdTcGVlZC50b0ZpeGVkKDIpKSwgb25DaGFuZ2U6IChlKSA9PiBzZXRQZW5kaW5nU3BlZWQocGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkgfHwgMSkgfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtemluYy01MDAgdGV4dC14cyIsIGNoaWxkcmVuOiAieCIgfSldIH0pXSB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHQtMSIsIGNoaWxkcmVuOiBfanN4cygibGFiZWwiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGN1cnNvci1wb2ludGVyIGdyb3VwIHNlbGVjdC1ub25lIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogYHctMTAgaC01IHJvdW5kZWQtZnVsbCByZWxhdGl2ZSB0cmFuc2l0aW9uLWNvbG9ycyAke3ByZXNlcnZlUGl0Y2ggPyAnYmctY3lhbi02MDAnIDogJ2JnLXppbmMtNzAwJ31gLCBjaGlsZHJlbjogX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6IGBhYnNvbHV0ZSB0b3AtMSB3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy13aGl0ZSB0cmFuc2l0aW9uLWFsbCBzaGFkb3ctbWQgJHtwcmVzZXJ2ZVBpdGNoID8gJ2xlZnQtNicgOiAnbGVmdC0xJ31gIH0pIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtY29sIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6IGB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24gJHtwcmVzZXJ2ZVBpdGNoID8gJ3RleHQtY3lhbi00MDAnIDogJ3RleHQtemluYy00MDAnfWAsIGNoaWxkcmVuOiAiVGltZSBTdHJldGNoIiB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1bOXB4XSB0ZXh0LXppbmMtNTAwIGZvbnQtYm9sZCB1cHBlcmNhc2UgbGVhZGluZy1ub25lIiwgY2hpbGRyZW46ICJQcmVzZXJ2ZSBQaXRjaCIgfSldIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogImNoZWNrYm94IiwgY2xhc3NOYW1lOiAiaGlkZGVuIiwgY2hlY2tlZDogcHJlc2VydmVQaXRjaCwgb25DaGFuZ2U6IChlKSA9PiBzZXRQcmVzZXJ2ZVBpdGNoKGUudGFyZ2V0LmNoZWNrZWQpIH0pXSB9KSB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZ3JpZCBncmlkLWNvbHMtMyBnYXAtMiBsYW5kc2NhcGU6Z2FwLTEiLCBjaGlsZHJlbjogcHJlc2V0cy5tYXAocmF0ZSA9PiAoX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0UGVuZGluZ1NwZWVkKHJhdGUpLCBjbGFzc05hbWU6IGBweS0yIGxhbmRzY2FwZTpweS0xLjUgYmctemluYy04MDAgcm91bmRlZC1sZyBob3ZlcjpiZy1jeWFuLTkwMC81MCBob3Zlcjp0ZXh0LWN5YW4tNDAwIHRyYW5zaXRpb24gZm9udC1tZWRpdW0gdGV4dC1zbSAke01hdGguYWJzKHBlbmRpbmdTcGVlZCAtIHJhdGUpIDwgMC4wMSA/ICdiZy1jeWFuLTkwMC81MCB0ZXh0LWN5YW4tNDAwIHJpbmctMSByaW5nLWN5YW4tNTAwJyA6ICcnfWAsIGNoaWxkcmVuOiBbcmF0ZSwgIngiXSB9LCByYXRlKSkpIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGdhcC0yIHB0LTIgbGFuZHNjYXBlOnB0LTEiLCBjaGlsZHJlbjogW19qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJzZWNvbmRhcnkiLCBsYWJlbDogIlJlc2V0Iiwgb25DbGljazogKCkgPT4geyBzZXRQZW5kaW5nU3BlZWQoMS4wKTsgc2V0UHJlc2VydmVQaXRjaChmYWxzZSk7IH0sIGNsYXNzTmFtZTogImZsZXgtMSBoLTEwIiB9KSwgX2pzeChCdXR0b24sIHsgdmFyaWFudDogInByaW1hcnkiLCBsYWJlbDogIkFwcGx5Iiwgb25DbGljazogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFwcGx5KCdzcGVlZCcsIHsgcGxheWJhY2tSYXRlOiBwZW5kaW5nU3BlZWQsIHByZXNlcnZlUGl0Y2ggfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRFZmZlY3RJZChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBjbGFzc05hbWU6ICJmbGV4LVsyXSBoLTEwIiB9KV0gfSldIH0pIH0pKTsKICAgIH0KICAgIC8vIC0tLSBTdWItbWVudSBmb3IgVm9sdW1lIC0tLQogICAgaWYgKHNlbGVjdGVkRWZmZWN0SWQgPT09ICd2b2x1bWUnKSB7CiAgICAgICAgY29uc3QgcHJlc2V0cyA9IFsyNSwgNTAsIDc1LCAxMDAsIDEyNSwgMTUwXTsKICAgICAgICByZXR1cm4gKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiBtb2RhbE92ZXJsYXlDbGFzcywgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogbW9kYWxDb250YWluZXJDbGFzcywgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgYm9yZGVyLWIgYm9yZGVyLXppbmMtODAwIHBiLTIgbGFuZHNjYXBlOnBiLTEiLCBjaGlsZHJlbjogW19qc3goImgyIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIiwgY2hpbGRyZW46ICJUcmFjayBWb2x1bWUiIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IGhhbmRsZUF1dG9tYXRpb24sIGNsYXNzTmFtZTogImJnLXllbGxvdy01MDAgaG92ZXI6YmcteWVsbG93LTQwMCB0ZXh0LWJsYWNrIHB4LTMgcHktMSByb3VuZGVkLW1kIGZvbnQtYm9sZCB0ZXh0LXNtIHNoYWRvdy1sZyBzaGFkb3cteWVsbG93LTUwMC8yMCB0cmFuc2l0aW9uIGFjdGl2ZTpzY2FsZS05NSIsIGNoaWxkcmVuOiAiRHJhdyBBdXRvbWF0aW9uIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtMiIsIGNoaWxkcmVuOiBbY2hlY2tBY3RpdmUoJ3ZvbHVtZScpICYmIChfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGhhbmRsZUFwcGx5Vm9sdW1lKDEwMCksIGNsYXNzTmFtZTogInRleHQteHMgZm9udC1ib2xkIHRleHQtcmVkLTQwMCBiZy1yZWQtOTAwLzIwIHB4LTIgcHktMSByb3VuZGVkIGhvdmVyOmJnLXJlZC05MDAvNTAiLCBjaGlsZHJlbjogIlJlc2V0IiB9KSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0U2VsZWN0ZWRFZmZlY3RJZChudWxsKSwgY2xhc3NOYW1lOiAidGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtc20iLCBjaGlsZHJlbjogIkJhY2siIH0pXSB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZ3JpZCBncmlkLWNvbHMtMyBnYXAtMiBsYW5kc2NhcGU6Z2FwLTEiLCBjaGlsZHJlbjogcHJlc2V0cy5tYXAocGVyY2VudCA9PiAoX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gaGFuZGxlQXBwbHlWb2x1bWUocGVyY2VudCksIGNsYXNzTmFtZTogYHB5LTMgbGFuZHNjYXBlOnB5LTEuNSBiZy16aW5jLTgwMCByb3VuZGVkLWxnIGhvdmVyOmJnLWN5YW4tOTAwLzUwIGhvdmVyOnRleHQtY3lhbi00MDAgdHJhbnNpdGlvbiBmb250LW1lZGl1bSAke01hdGgucm91bmQoY3VycmVudFZvbHVtZSAqIDEwMCkgPT09IHBlcmNlbnQgPyAnYmctY3lhbi05MDAvNTAgdGV4dC1jeWFuLTQwMCByaW5nLTEgcmluZy1jeWFuLTUwMCcgOiAnJ31gLCBjaGlsZHJlbjogW3BlcmNlbnQsICIlIl0gfSwgcGVyY2VudCkpKSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtMiBpdGVtcy1jZW50ZXIgcHQtMiBsYW5kc2NhcGU6cHQtMSIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyB0ZXh0LXppbmMtNTAwIHVwcGVyY2FzZSBmb250LWJvbGQiLCBjaGlsZHJlbjogIkN1c3RvbToiIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogIm51bWJlciIsIHZhbHVlOiBjdXN0b21WYWx1ZSwgb25DaGFuZ2U6IChlKSA9PiBzZXRDdXN0b21WYWx1ZShlLnRhcmdldC52YWx1ZSksIGNsYXNzTmFtZTogImJnLXppbmMtOTUwIGJvcmRlciBib3JkZXItemluYy03MDAgcm91bmRlZCBweC0yIHB5LTEgbGFuZHNjYXBlOnB5LTAuNSB3LTIwIHRleHQtY2VudGVyIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWN5YW4tNTAwIG91dGxpbmUtbm9uZSIgfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtemluYy01MDAiLCBjaGlsZHJlbjogIiUiIH0pLCBfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiAicHJpbWFyeSIsIGxhYmVsOiAiQXBwbHkiLCBvbkNsaWNrOiAoKSA9PiBoYW5kbGVBcHBseVZvbHVtZShwYXJzZUZsb2F0KGN1c3RvbVZhbHVlKSB8fCAxMDApLCBjbGFzc05hbWU6ICJweS0xIHB4LTMgdGV4dC1zbSBoLTggbWwtYXV0byIgfSldIH0pXSB9KSB9KSk7CiAgICB9CiAgICAvLyAtLS0gTWFpbiBNZW51IC0tLQogICAgcmV0dXJuIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogbW9kYWxPdmVybGF5Q2xhc3MsIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6IG1vZGFsQ29udGFpbmVyQ2xhc3MsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIiwgY2hpbGRyZW46IFtfanN4KCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC14bCBmb250LWJvbGQgdGV4dC13aGl0ZSIsIGNoaWxkcmVuOiAiQ3JlYXRpdmUgRWZmZWN0cyIgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogb25DbG9zZSwgY2xhc3NOYW1lOiAidGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtc20iLCBjaGlsZHJlbjogIkJhY2siIH0pXSB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJncmlkIGdyaWQtY29scy0yIGdhcC0zIGxhbmRzY2FwZTpnYXAtMS41IiwgY2hpbGRyZW46IGVmZmVjdHMubWFwKChmeCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGNoZWNrQWN0aXZlKGZ4LmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVFZmZlY3RDbGljayhmeCksIGNsYXNzTmFtZTogYGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIGxhbmRzY2FwZTpnYXAtMSBwLTQgbGFuZHNjYXBlOnAtMiByb3VuZGVkLXhsIHRyYW5zaXRpb24gYm9yZGVyIGdyb3VwICR7aXNBY3RpdmUgPyAnYmctY3lhbi05MDAvMzAgYm9yZGVyLWN5YW4tNTAwLzUwIHNoYWRvdy1bMF8wXzE1cHhfcmdiYSg2LDE4MiwyMTIsMC4xNSldJyA6ICdiZy16aW5jLTgwMC81MCBob3ZlcjpiZy16aW5jLTcwMCBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6Ym9yZGVyLWN5YW4tNTAwLzMwJ31gLCBjaGlsZHJlbjogW19qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogYHRleHQtMnhsIGxhbmRzY2FwZTp0ZXh0LXhsIHRyYW5zaXRpb24gJHtpc0FjdGl2ZSA/ICd0ZXh0LWN5YW4tNDAwJyA6ICd0ZXh0LXppbmMtNDAwIGdyb3VwLWhvdmVyOnRleHQtemluYy0yMDAgZ3JvdXAtaG92ZXI6c2NhbGUtMTEwJ31gLCBjaGlsZHJlbjogZnguaWNvbiB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiBgdGV4dC1zbSBsYW5kc2NhcGU6dGV4dC14cyBmb250LW1lZGl1bSAke2lzQWN0aXZlID8gJ3RleHQtY3lhbi00MDAgZm9udC1ib2xkJyA6ICd0ZXh0LXppbmMtMzAwIGdyb3VwLWhvdmVyOnRleHQtY3lhbi00MDAnfWAsIGNoaWxkcmVuOiBmeC5sYWJlbCB9KV0gfSwgZnguaWQpKTsKICAgICAgICAgICAgICAgICAgICB9KSB9KV0gfSkgfSkpOwp9OwpleHBvcnQgZGVmYXVsdCBFZmZlY3RzTW9kYWw7Cg==","@/components/ExportModal":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvQnV0dG9uJzsKY29uc3QgRXhwb3J0TW9kYWwgPSAoeyBpc09wZW4sIG9uQ2xvc2UsIG9uRXhwb3J0LCBvcmlnaW5hbFNhbXBsZVJhdGUgfSkgPT4gewogICAgLy8gSW5pdGlhbGl6ZSBzdGF0ZSBmcm9tIGxvY2FsU3RvcmFnZSBvciBkZWZhdWx0IHRvICdtcDMnCiAgICBjb25zdCBbZm9ybWF0LCBzZXRGb3JtYXRdID0gdXNlU3RhdGUoKCkgPT4gewogICAgICAgIGNvbnN0IHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2V4cG9ydF9mb3JtYXRfcHJlZmVyZW5jZScpOwogICAgICAgIGlmIChzYXZlZCA9PT0gJ3dhdicgfHwgc2F2ZWQgPT09ICdtcDMnIHx8IHNhdmVkID09PSAnZmxhYycpIHsKICAgICAgICAgICAgcmV0dXJuIHNhdmVkOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJ21wMyc7CiAgICB9KTsKICAgIGNvbnN0IGhhbmRsZUZvcm1hdENoYW5nZSA9IChmbXQpID0+IHsKICAgICAgICBzZXRGb3JtYXQoZm10KTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZXhwb3J0X2Zvcm1hdF9wcmVmZXJlbmNlJywgZm10KTsKICAgIH07CiAgICBpZiAoIWlzT3BlbikKICAgICAgICByZXR1cm4gbnVsbDsKICAgIHJldHVybiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmaXhlZCBpbnNldC0wIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2svODAgYmFja2Ryb3AtYmx1ci1zbSBwLTQiLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctemluYy05MDAgYm9yZGVyIGJvcmRlci16aW5jLTgwMCByb3VuZGVkLTJ4bCB3LWZ1bGwgbWF4LXctc20gcC02IHNoYWRvdy0yeGwgc3BhY2UteS02IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3goImgyIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIiwgY2hpbGRyZW46ICJFeHBvcnQgU2V0dGluZ3MiIH0pLCBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXppbmMtNDAwIHRleHQtc20iLCBjaGlsZHJlbjogIkNob29zZSB0aGUgZm9ybWF0IGFuZCBxdWFsaXR5LiIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy16aW5jLTk1MCBwLTEgcm91bmRlZC14bCBmbGV4IGJvcmRlciBib3JkZXItemluYy04MDAiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gaGFuZGxlRm9ybWF0Q2hhbmdlKCdtcDMnKSwgY2xhc3NOYW1lOiBgZmxleC0xIHB5LTIgdGV4dC1zbSBmb250LWJvbGQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCAke2Zvcm1hdCA9PT0gJ21wMycgPyAnYmctemluYy04MDAgdGV4dC1jeWFuLTQwMCBzaGFkb3ctc20nIDogJ3RleHQtemluYy01MDAgaG92ZXI6dGV4dC16aW5jLTMwMCd9YCwgY2hpbGRyZW46ICJNUDMiIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGhhbmRsZUZvcm1hdENoYW5nZSgnZmxhYycpLCBjbGFzc05hbWU6IGBmbGV4LTEgcHktMiB0ZXh0LXNtIGZvbnQtYm9sZCByb3VuZGVkLWxnIHRyYW5zaXRpb24tYWxsICR7Zm9ybWF0ID09PSAnZmxhYycgPyAnYmctemluYy04MDAgdGV4dC1jeWFuLTQwMCBzaGFkb3ctc20nIDogJ3RleHQtemluYy01MDAgaG92ZXI6dGV4dC16aW5jLTMwMCd9YCwgY2hpbGRyZW46ICJGTEFDIiB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVGb3JtYXRDaGFuZ2UoJ3dhdicpLCBjbGFzc05hbWU6IGBmbGV4LTEgcHktMiB0ZXh0LXNtIGZvbnQtYm9sZCByb3VuZGVkLWxnIHRyYW5zaXRpb24tYWxsICR7Zm9ybWF0ID09PSAnd2F2JyA/ICdiZy16aW5jLTgwMCB0ZXh0LWN5YW4tNDAwIHNoYWRvdy1zbScgOiAndGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXppbmMtMzAwJ31gLCBjaGlsZHJlbjogIldBViIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJzcGFjZS15LTIiLCBjaGlsZHJlbjogW19qc3hzKEJ1dHRvbiwgeyB2YXJpYW50OiAic2Vjb25kYXJ5IiwgZnVsbFdpZHRoOiB0cnVlLCBvbkNsaWNrOiAoKSA9PiB7IG9uRXhwb3J0KG9yaWdpbmFsU2FtcGxlUmF0ZSwgZm9ybWF0KTsgb25DbG9zZSgpOyB9LCBjbGFzc05hbWU6ICJqdXN0aWZ5LWJldHdlZW4gZ3JvdXAiLCBjaGlsZHJlbjogW19qc3goInNwYW4iLCB7IGNoaWxkcmVuOiAiT3JpZ2luYWwgUXVhbGl0eSIgfSksIF9qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQtemluYy01MDAgYmctemluYy05NTAgcHgtMiBweS0xIHJvdW5kZWQgZ3JvdXAtaG92ZXI6dGV4dC13aGl0ZSB0cmFuc2l0aW9uLWNvbG9ycyIsIGNoaWxkcmVuOiBbb3JpZ2luYWxTYW1wbGVSYXRlLCAiSHoiXSB9KV0gfSksIF9qc3hzKEJ1dHRvbiwgeyB2YXJpYW50OiAic2Vjb25kYXJ5IiwgZnVsbFdpZHRoOiB0cnVlLCBvbkNsaWNrOiAoKSA9PiB7IG9uRXhwb3J0KDQ0MTAwLCBmb3JtYXQpOyBvbkNsb3NlKCk7IH0sIGNsYXNzTmFtZTogImp1c3RpZnktYmV0d2VlbiBncm91cCIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46ICJDRCBRdWFsaXR5IiB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyB0ZXh0LXppbmMtNTAwIGJnLXppbmMtOTUwIHB4LTIgcHktMSByb3VuZGVkIGdyb3VwLWhvdmVyOnRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogIjQ0LjFrSHoiIH0pXSB9KSwgX2pzeHMoQnV0dG9uLCB7IHZhcmlhbnQ6ICJzZWNvbmRhcnkiLCBmdWxsV2lkdGg6IHRydWUsIG9uQ2xpY2s6ICgpID0+IHsgb25FeHBvcnQoMjIwNTAsIGZvcm1hdCk7IG9uQ2xvc2UoKTsgfSwgY2xhc3NOYW1lOiAianVzdGlmeS1iZXR3ZWVuIGdyb3VwIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogIkxvLUZpIC8gUmFkaW8iIH0pLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQtemluYy01MDAgYmctemluYy05NTAgcHgtMiBweS0xIHJvdW5kZWQgZ3JvdXAtaG92ZXI6dGV4dC13aGl0ZSB0cmFuc2l0aW9uLWNvbG9ycyIsIGNoaWxkcmVuOiAiMjJrSHoiIH0pXSB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAicHQtMiIsIGNoaWxkcmVuOiBfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiAiZ2hvc3QiLCBmdWxsV2lkdGg6IHRydWUsIG9uQ2xpY2s6IG9uQ2xvc2UsIGNoaWxkcmVuOiAiQ2FuY2VsIiB9KSB9KV0gfSkgfSkpOwp9OwpleHBvcnQgZGVmYXVsdCBFeHBvcnRNb2RhbDsK","@/components/BeatMakerModal":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBCdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL0J1dHRvbic7CmltcG9ydCB7IGdlbmVyYXRlRHJ1bUJlYXQsIGdlbmVyYXRlU3ludGhTZXF1ZW5jZSwgcGxheUJ1ZmZlciwgZ2V0QXVkaW9Db250ZXh0IH0gZnJvbSAnQC9zZXJ2aWNlcy9hdWRpb1V0aWxzJzsKY29uc3QgRHJ1bUljb24gPSAoKSA9PiAoX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTUgaC01IHRleHQtemluYy0xMDAiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNNSAyMGgxNGEyIDIgMCAwMTIgMnYxSDN2LTFhMiAyIDAgMDEyLTJ6bTAtNmgxNGwxLjUgNUgzLjVMNSAxNHptMC05YTMgMyAwIDAxNiAwdjJINVY1em04IDBhMyAzIDAgMDE2IDB2MmgtNlY1eiIgfSkgfSkpOwpjb25zdCBTeW50aEljb24gPSAoKSA9PiAoX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTUgaC01IHRleHQtemluYy0xMDAiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNOSAxOVY2bDEyLTN2MTNNOSAxOWMwIDEuMTA1LTEuMzQzIDItMyAycy0zLS44OTUtMy0yIDEuMzQzLTIgMy0yIDMgLjg5NSAzIDJ6bTEyLTNjMCAxLjEwNS0xLjM0MyAyLTMgMnMtMy0uODk1LTMtMiAxLjM0My0yIDMtMiAzIC44OTUgMyAyek05IDEwbDEyLTMiIH0pIH0pKTsKY29uc3QgQmVhdE1ha2VyTW9kYWwgPSAoeyBpc09wZW4sIG9uQ2xvc2UsIG9uR2VuZXJhdGUsIGluaXRpYWxCcG0gPSAxMjAgfSkgPT4gewogICAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IHVzZVN0YXRlKCdkcnVtcycpOwogICAgY29uc3QgW2JwbSwgc2V0QnBtXSA9IHVzZVN0YXRlKGluaXRpYWxCcG0pOwogICAgY29uc3QgW2JhcnMsIHNldEJhcnNdID0gdXNlU3RhdGUoNCk7CiAgICBjb25zdCBbaXNHZW5lcmF0aW5nLCBzZXRJc0dlbmVyYXRpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogICAgLy8gRHJ1bXMgU3RhdGUKICAgIGNvbnN0IFtzdHlsZSwgc2V0U3R5bGVdID0gdXNlU3RhdGUoJ1JvY2snKTsKICAgIC8vIFN5bnRoIFN0YXRlCiAgICBjb25zdCBbcHJlc2V0LCBzZXRQcmVzZXRdID0gdXNlU3RhdGUoJ0FuYWxvZyBCYXNzJyk7CiAgICBjb25zdCBbcGF0dGVyblR5cGUsIHNldFBhdHRlcm5UeXBlXSA9IHVzZVN0YXRlKCdCYXNzbGluZScpOwogICAgY29uc3QgW3Jvb3ROb3RlLCBzZXRSb290Tm90ZV0gPSB1c2VTdGF0ZSgnQycpOwogICAgY29uc3QgW3NjYWxlVHlwZSwgc2V0U2NhbGVUeXBlXSA9IHVzZVN0YXRlKCdNaW5vcicpOwogICAgLy8gUHJldmlldyBEZWJvdW5jZQogICAgY29uc3QgcHJldmlld1RpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCBtYXhCYXJzID0gTWF0aC5mbG9vcihicG0gLyA0KTsKICAgIGNvbnN0IGN1cnJlbnREdXJhdGlvbiA9IGJhcnMgKiA0ICogKDYwIC8gYnBtKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKGluaXRpYWxCcG0pCiAgICAgICAgICAgIHNldEJwbShpbml0aWFsQnBtKTsKICAgIH0sIFtpbml0aWFsQnBtLCBpc09wZW5dKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKGJhcnMgPiBtYXhCYXJzKQogICAgICAgICAgICBzZXRCYXJzKG1heEJhcnMpOwogICAgfSwgW2JwbSwgbWF4QmFycywgYmFyc10pOwogICAgLy8gQXV0by1wcmV2aWV3IHdoZW4gc3ludGggcGFyYW1ldGVycyBjaGFuZ2UKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKCFpc09wZW4gfHwgYWN0aXZlVGFiICE9PSAnc3ludGgnKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKHByZXZpZXdUaW1lb3V0UmVmLmN1cnJlbnQpCiAgICAgICAgICAgIGNsZWFyVGltZW91dChwcmV2aWV3VGltZW91dFJlZi5jdXJyZW50KTsKICAgICAgICBwcmV2aWV3VGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIC8vIFJlc3VtZSBjb250ZXh0IGlmIHN1c3BlbmRlZCAoY29tbW9uIG9uIGZpcnN0IGludGVyYWN0aW9uKQogICAgICAgICAgICBjb25zdCBjdHggPSBnZXRBdWRpb0NvbnRleHQoKTsKICAgICAgICAgICAgaWYgKGN0eC5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpCiAgICAgICAgICAgICAgICBhd2FpdCBjdHgucmVzdW1lKCk7CiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgc2hvcnQgMS1iYXIgcHJldmlldwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZ2VuZXJhdGVTeW50aFNlcXVlbmNlKHByZXNldCwgcGF0dGVyblR5cGUsIHJvb3ROb3RlLCBzY2FsZVR5cGUsIGJwbSwgMSk7CiAgICAgICAgICAgICAgICBwbGF5QnVmZmVyKGJ1ZmZlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlByZXZpZXcgZ2VuZXJhdGlvbiBmYWlsZWQiLCBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIDIwMCk7IC8vIDIwMG1zIGRlYm91bmNlCiAgICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgICAgaWYgKHByZXZpZXdUaW1lb3V0UmVmLmN1cnJlbnQpCiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocHJldmlld1RpbWVvdXRSZWYuY3VycmVudCk7CiAgICAgICAgfTsKICAgIH0sIFtwcmVzZXQsIHBhdHRlcm5UeXBlLCByb290Tm90ZSwgc2NhbGVUeXBlLCBicG0sIGlzT3BlbiwgYWN0aXZlVGFiXSk7CiAgICBpZiAoIWlzT3BlbikKICAgICAgICByZXR1cm4gbnVsbDsKICAgIGNvbnN0IGRydW1TdHlsZXMgPSBbJ1JvY2snLCAnSGlwSG9wJywgJ1RlY2hubycsICdNZXRyb25vbWUnXTsKICAgIGNvbnN0IHN5bnRoUHJlc2V0cyA9IFsnQW5hbG9nIEJhc3MnLCAnQ2hpcHR1bmUgTGVhZCcsICdEcmVhbXkgUGFkJywgJ1BsdWNrJywgJ0VsZWN0cmljIFBpYW5vJywgJ1NhdyBMZWFkJywgJ1N0cmluZ3MnLCAnR2xpdGNoIEJhc3MnXTsKICAgIGNvbnN0IHN5bnRoUGF0dGVybnMgPSBbJ09uZSBTaG90JywgJ0Jhc3NsaW5lJywgJ0FycGVnZ2lvJywgJ1JhbmRvbSBNZWxvZHknLCAnQ2hvcmRzJ107CiAgICBjb25zdCBub3RlcyA9IFsnQycsICdDIycsICdEJywgJ0QjJywgJ0UnLCAnRicsICdGIycsICdHJywgJ0cjJywgJ0EnLCAnQSMnLCAnQiddOwogICAgY29uc3QgaGFuZGxlR2VuZXJhdGUgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgc2V0SXNHZW5lcmF0aW5nKHRydWUpOwogICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IGJ1ZmZlcjsKICAgICAgICAgICAgICAgIGxldCBuYW1lOwogICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYiA9PT0gJ2RydW1zJykgewogICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGF3YWl0IGdlbmVyYXRlRHJ1bUJlYXQoc3R5bGUsIGJwbSwgYmFycyk7CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGAke3N0eWxlfSBCZWF0ICgke2JwbX0gQlBNKWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBTeW50aCBHZW5lcmF0aW9uCiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gYXdhaXQgZ2VuZXJhdGVTeW50aFNlcXVlbmNlKHByZXNldCwgcGF0dGVyblR5cGUsIHJvb3ROb3RlLCBzY2FsZVR5cGUsIGJwbSwgYmFycyk7CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGAke3ByZXNldH0gJHtwYXR0ZXJuVHlwZX0gJHtyb290Tm90ZX0ke3NjYWxlVHlwZSA9PT0gJ01pbm9yJyA/ICdtJyA6ICcnfSAoJHticG19IEJQTSlgOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgb25HZW5lcmF0ZShidWZmZXIsIG5hbWUpOwogICAgICAgICAgICAgICAgb25DbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICAgICAgc2V0SXNHZW5lcmF0aW5nKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIDEwMCk7CiAgICB9OwogICAgcmV0dXJuIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZpeGVkIGluc2V0LTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgbGFuZHNjYXBlOnAtMiBiZy1ibGFjay84MCBiYWNrZHJvcC1ibHVyLXNtIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLXppbmMtOTAwIGJvcmRlciBib3JkZXItemluYy03MDAgcm91bmRlZC0yeGwgdy1mdWxsIG1heC13LW1kIHAtNiBsYW5kc2NhcGU6cC00IHNoYWRvdy0yeGwgc3BhY2UteS00IGxhbmRzY2FwZTpzcGFjZS15LTIgbGFuZHNjYXBlOm1heC1oLVs5NXZoXSBsYW5kc2NhcGU6b3ZlcmZsb3cteS1hdXRvIG5vLXNjcm9sbGJhciBmbGV4IGZsZXgtY29sIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGJnLXppbmMtOTUwIHAtMSByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItemluYy04MDAiLCBjaGlsZHJlbjogW19qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldEFjdGl2ZVRhYignZHJ1bXMnKSwgY2xhc3NOYW1lOiBgZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIHB5LTIgdGV4dC1zbSBmb250LWJvbGQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCAke2FjdGl2ZVRhYiA9PT0gJ2RydW1zJyA/ICdiZy16aW5jLTgwMCB0ZXh0LWN5YW4tNDAwIHNoYWRvdy1zbScgOiAndGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXppbmMtMzAwJ31gLCBjaGlsZHJlbjogW19qc3goRHJ1bUljb24sIHt9KSwgIiBCZWF0Il0gfSksIF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldEFjdGl2ZVRhYignc3ludGgnKSwgY2xhc3NOYW1lOiBgZmxleC0xIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIHB5LTIgdGV4dC1zbSBmb250LWJvbGQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCAke2FjdGl2ZVRhYiA9PT0gJ3N5bnRoJyA/ICdiZy16aW5jLTgwMCB0ZXh0LWN5YW4tNDAwIHNoYWRvdy1zbScgOiAndGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXppbmMtMzAwJ31gLCBjaGlsZHJlbjogW19qc3goU3ludGhJY29uLCB7fSksICIgU3ludGgiXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInNwYWNlLXktNCBsYW5kc2NhcGU6c3BhY2UteS0yIGZsZXgtMSIsIGNoaWxkcmVuOiBbYWN0aXZlVGFiID09PSAnZHJ1bXMnID8gKAogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gRHJ1bSBDb250cm9scyAtLS0KICAgICAgICAgICAgICAgICAgICAgICAgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0yIiwgY2hpbGRyZW46IFtfanN4KCJsYWJlbCIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtemluYy01MDAgdXBwZXJjYXNlIiwgY2hpbGRyZW46ICJTdHlsZSIgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZ3JpZCBncmlkLWNvbHMtMiBnYXAtMiIsIGNoaWxkcmVuOiBkcnVtU3R5bGVzLm1hcChzID0+IChfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFN0eWxlKHMpLCBjbGFzc05hbWU6IGBwLTMgbGFuZHNjYXBlOnAtMiByb3VuZGVkLWxnIHRleHQtc20gZm9udC1tZWRpdW0gdHJhbnNpdGlvbiAke3N0eWxlID09PSBzID8gJ2JnLWN5YW4tNjAwIHRleHQtd2hpdGUgc2hhZG93LWxnIHNoYWRvdy1jeWFuLTUwMC8yMCcgOiAnYmctemluYy04MDAgdGV4dC16aW5jLTQwMCBob3ZlcjpiZy16aW5jLTcwMCd9YCwgY2hpbGRyZW46IHMgfSwgcykpKSB9KV0gfSkpIDogKAogICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gU3ludGggQ29udHJvbHMgLS0tCiAgICAgICAgICAgICAgICAgICAgICAgIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInNwYWNlLXktMyIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0xIiwgY2hpbGRyZW46IFtfanN4KCJsYWJlbCIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtemluYy01MDAgdXBwZXJjYXNlIiwgY2hpbGRyZW46ICJJbnN0cnVtZW50IiB9KSwgX2pzeCgic2VsZWN0IiwgeyB2YWx1ZTogcHJlc2V0LCBvbkNoYW5nZTogKGUpID0+IHNldFByZXNldChlLnRhcmdldC52YWx1ZSksIGNsYXNzTmFtZTogInctZnVsbCBiZy16aW5jLTgwMCBib3JkZXIgYm9yZGVyLXppbmMtNzAwIHJvdW5kZWQtbGcgcC0yIHRleHQtd2hpdGUgdGV4dC1zbSBvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0xIGZvY3VzOnJpbmctY3lhbi01MDAiLCBjaGlsZHJlbjogc3ludGhQcmVzZXRzLm1hcChwID0+IF9qc3goIm9wdGlvbiIsIHsgdmFsdWU6IHAsIGNoaWxkcmVuOiBwIH0sIHApKSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInNwYWNlLXktMSIsIGNoaWxkcmVuOiBbX2pzeCgibGFiZWwiLCB7IGNsYXNzTmFtZTogInRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXppbmMtNTAwIHVwcGVyY2FzZSIsIGNoaWxkcmVuOiAiUGF0dGVybiIgfSksIF9qc3goInNlbGVjdCIsIHsgdmFsdWU6IHBhdHRlcm5UeXBlLCBvbkNoYW5nZTogKGUpID0+IHNldFBhdHRlcm5UeXBlKGUudGFyZ2V0LnZhbHVlKSwgY2xhc3NOYW1lOiAidy1mdWxsIGJnLXppbmMtODAwIGJvcmRlciBib3JkZXItemluYy03MDAgcm91bmRlZC1sZyBwLTIgdGV4dC13aGl0ZSB0ZXh0LXNtIG91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1jeWFuLTUwMCIsIGNoaWxkcmVuOiBzeW50aFBhdHRlcm5zLm1hcChwID0+IF9qc3goIm9wdGlvbiIsIHsgdmFsdWU6IHAsIGNoaWxkcmVuOiBwIH0sIHApKSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTIiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgtMSBzcGFjZS15LTEiLCBjaGlsZHJlbjogW19qc3goImxhYmVsIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC16aW5jLTUwMCB1cHBlcmNhc2UiLCBjaGlsZHJlbjogIktleSIgfSksIF9qc3goInNlbGVjdCIsIHsgdmFsdWU6IHJvb3ROb3RlLCBvbkNoYW5nZTogKGUpID0+IHNldFJvb3ROb3RlKGUudGFyZ2V0LnZhbHVlKSwgY2xhc3NOYW1lOiAidy1mdWxsIGJnLXppbmMtODAwIGJvcmRlciBib3JkZXItemluYy03MDAgcm91bmRlZC1sZyBwLTIgdGV4dC13aGl0ZSB0ZXh0LXNtIG91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1jeWFuLTUwMCIsIGNoaWxkcmVuOiBub3Rlcy5tYXAobiA9PiBfanN4KCJvcHRpb24iLCB7IHZhbHVlOiBuLCBjaGlsZHJlbjogbiB9LCBuKSkgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4LTEgc3BhY2UteS0xIiwgY2hpbGRyZW46IFtfanN4KCJsYWJlbCIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtemluYy01MDAgdXBwZXJjYXNlIiwgY2hpbGRyZW46ICJTY2FsZSIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggYmctemluYy04MDAgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLXppbmMtNzAwIHAtMC41IiwgY2hpbGRyZW46IFtfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFNjYWxlVHlwZSgnTWFqb3InKSwgY2xhc3NOYW1lOiBgZmxleC0xIHJvdW5kZWQgcHktMS41IHRleHQteHMgZm9udC1ib2xkICR7c2NhbGVUeXBlID09PSAnTWFqb3InID8gJ2JnLWN5YW4tNjAwIHRleHQtd2hpdGUnIDogJ3RleHQtemluYy00MDAnfWAsIGNoaWxkcmVuOiAiTWFqIiB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRTY2FsZVR5cGUoJ01pbm9yJyksIGNsYXNzTmFtZTogYGZsZXgtMSByb3VuZGVkIHB5LTEuNSB0ZXh0LXhzIGZvbnQtYm9sZCAke3NjYWxlVHlwZSA9PT0gJ01pbm9yJyA/ICdiZy1jeWFuLTYwMCB0ZXh0LXdoaXRlJyA6ICd0ZXh0LXppbmMtNDAwJ31gLCBjaGlsZHJlbjogIk1pbiIgfSldIH0pXSB9KV0gfSldIH0pKSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAicHQtMiBib3JkZXItdCBib3JkZXItemluYy04MDAgc3BhY2UteS0zIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJzcGFjZS15LTIiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIiwgY2hpbGRyZW46IFtfanN4KCJsYWJlbCIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtemluYy01MDAgdXBwZXJjYXNlIiwgY2hpbGRyZW46ICJUZW1wbyIgfSksIF9qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6IGB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWN5YW4tNDAwYCwgY2hpbGRyZW46IFticG0sICIgQlBNIl0gfSldIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogInJhbmdlIiwgbWluOiAiNjAiLCBtYXg6ICIyMDAiLCB2YWx1ZTogYnBtLCBvbkNoYW5nZTogKGUpID0+IHNldEJwbShwYXJzZUludChlLnRhcmdldC52YWx1ZSkpLCBjbGFzc05hbWU6IGB3LWZ1bGwgaC0yIGJnLXppbmMtODAwIHJvdW5kZWQtbGcgYXBwZWFyYW5jZS1ub25lIGN1cnNvci1wb2ludGVyIGFjY2VudC1jeWFuLTUwMGAgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJzcGFjZS15LTIiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciIsIGNoaWxkcmVuOiBbX2pzeCgibGFiZWwiLCB7IGNsYXNzTmFtZTogInRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXppbmMtNTAwIHVwcGVyY2FzZSIsIGNoaWxkcmVuOiAiTGVuZ3RoIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1yaWdodCIsIGNoaWxkcmVuOiBbX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogYHRleHQteHMgZm9udC1ib2xkIHRleHQtY3lhbi00MDBgLCBjaGlsZHJlbjogW2JhcnMsICIgQmFycyJdIH0pLCBfanN4cygic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1bMTBweF0gdGV4dC16aW5jLTUwMCBmb250LW1lZGl1bSBtbC0yIiwgY2hpbGRyZW46IFsiKCIsIGN1cnJlbnREdXJhdGlvbi50b0ZpeGVkKDEpLCAicykiXSB9KV0gfSldIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogInJhbmdlIiwgbWluOiAiMSIsIG1heDogbWF4QmFycywgdmFsdWU6IGJhcnMsIG9uQ2hhbmdlOiAoZSkgPT4gc2V0QmFycyhwYXJzZUludChlLnRhcmdldC52YWx1ZSkpLCBjbGFzc05hbWU6IGB3LWZ1bGwgaC0yIGJnLXppbmMtODAwIHJvdW5kZWQtbGcgYXBwZWFyYW5jZS1ub25lIGN1cnNvci1wb2ludGVyIGFjY2VudC1jeWFuLTUwMGAgfSldIH0pXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTMgcHQtNCBsYW5kc2NhcGU6cHQtMiBib3JkZXItdCBib3JkZXItemluYy04MDAgc2hyaW5rLTAiLCBjaGlsZHJlbjogW19qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJnaG9zdCIsIG9uQ2xpY2s6IG9uQ2xvc2UsIGxhYmVsOiAiQ2FuY2VsIiB9KSwgX2pzeChCdXR0b24sIHsgdmFyaWFudDogInByaW1hcnkiLCBvbkNsaWNrOiBoYW5kbGVHZW5lcmF0ZSwgZGlzYWJsZWQ6IGlzR2VuZXJhdGluZywgbGFiZWw6IGlzR2VuZXJhdGluZyA/ICJTeW50aGVzaXppbmcuLi4iIDogKGFjdGl2ZVRhYiA9PT0gJ2RydW1zJyA/ICJHZW5lcmF0ZSBCZWF0IiA6ICJHZW5lcmF0ZSBTeW50aCIpLCBjbGFzc05hbWU6IGBmbGV4LTEgJHthY3RpdmVUYWIgPT09ICdzeW50aCcgPyAnIWJnLWN5YW4tNjAwICFzaGFkb3ctY3lhbi01MDAvMjAgaG92ZXI6IWJnLWN5YW4tNTAwJyA6ICcnfWAgfSldIH0pXSB9KSB9KSk7Cn07CmV4cG9ydCBkZWZhdWx0IEJlYXRNYWtlck1vZGFsOwo=","@/services/storageService":"data:application/javascript;base64,aW1wb3J0IHsgZW5jb2RlV0FWQnVmZmVyLCBkZWNvZGVBdWRpb0RhdGEsIGdldEF1ZGlvQ29udGV4dCwgY3JlYXRlRW1wdHlCdWZmZXIgfSBmcm9tICdAL3NlcnZpY2VzL2F1ZGlvVXRpbHMnOwpjb25zdCBEQl9OQU1FID0gJ1NvbmljUG9ja2V0REInOwpjb25zdCBEQl9WRVJTSU9OID0gMTsKY29uc3QgU1RPUkVfTkFNRSA9ICdwcm9qZWN0cyc7CmNvbnN0IG9wZW5EQiA9ICgpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKERCX05BTUUsIERCX1ZFUlNJT04pOwogICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgaWYgKCFkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFNUT1JFX05BTUUpKSB7CiAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9OQU1FLCB7IGtleVBhdGg6ICdpZCcgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICAgIHJlc29sdmUoZXZlbnQudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgfTsKICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHsKICAgICAgICAgICAgcmVqZWN0KCdJbmRleGVkREIgZXJyb3I6ICcgKyBldmVudC50YXJnZXQuZXJyb3IpOwogICAgICAgIH07CiAgICB9KTsKfTsKLy8gSGVscGVyIHRvIGNvbnZlcnQgVHJhY2sgdG8gU2F2ZWRUcmFjayAoaGFuZGxpbmcgcmVjdXJzaW9uIGZvciBjcm9zc2ZhZGUgbWV0YWRhdGEpCmNvbnN0IGNvbnZlcnRUcmFja1RvU2F2ZWQgPSAodCkgPT4gewogICAgY29uc3Qgc2F2ZWQgPSB7CiAgICAgICAgaWQ6IHQuaWQsCiAgICAgICAgbmFtZTogdC5uYW1lLAogICAgICAgIGRhdGE6IGVuY29kZVdBVkJ1ZmZlcih0LmJ1ZmZlciksCiAgICAgICAgLy8gT25seSBzYXZlIG9yaWdpbmFsIGlmIGl0IGRpZmZlcnMgYW5kIGV4aXN0cywgdG8gc2F2ZSBzcGFjZQogICAgICAgIG9yaWdpbmFsRGF0YTogdC5vcmlnaW5hbEJ1ZmZlciA/IGVuY29kZVdBVkJ1ZmZlcih0Lm9yaWdpbmFsQnVmZmVyKSA6IHVuZGVmaW5lZCwKICAgICAgICBzdGFydFRpbWU6IHQuc3RhcnRUaW1lLAogICAgICAgIHRyaW1TdGFydDogdC50cmltU3RhcnQsCiAgICAgICAgZHVyYXRpb246IHQuZHVyYXRpb24sCiAgICAgICAgbGFuZTogdC5sYW5lLAogICAgICAgIHZvbHVtZTogdC52b2x1bWUsCiAgICAgICAgaXNNdXRlZDogdC5pc011dGVkLAogICAgICAgIGlzU29sbzogdC5pc1NvbG8sCiAgICAgICAgY29sb3I6IHQuY29sb3IsCiAgICAgICAgYnBtOiB0LmJwbSwKICAgICAgICBhY3RpdmVFZmZlY3RzOiB0LmFjdGl2ZUVmZmVjdHMKICAgIH07CiAgICBpZiAodC5jcm9zc2ZhZGVNZXRhZGF0YSkgewogICAgICAgIHNhdmVkLmNyb3NzZmFkZU1ldGFkYXRhID0gewogICAgICAgICAgICBsZWZ0OiBjb252ZXJ0VHJhY2tUb1NhdmVkKHQuY3Jvc3NmYWRlTWV0YWRhdGEubGVmdCksCiAgICAgICAgICAgIHJpZ2h0OiBjb252ZXJ0VHJhY2tUb1NhdmVkKHQuY3Jvc3NmYWRlTWV0YWRhdGEucmlnaHQpLAogICAgICAgICAgICBkdXJhdGlvbjogdC5jcm9zc2ZhZGVNZXRhZGF0YS5kdXJhdGlvbgogICAgICAgIH07CiAgICB9CiAgICByZXR1cm4gc2F2ZWQ7Cn07Ci8vIEhlbHBlciB0byBsb2FkIFNhdmVkVHJhY2sgdG8gVHJhY2sgKGhhbmRsaW5nIHJlY3Vyc2lvbikKY29uc3QgY29udmVydFNhdmVkVG9UcmFjayA9IGFzeW5jIChzdCwgY3R4KSA9PiB7CiAgICB0cnkgewogICAgICAgIGxldCBhdWRpb0J1ZmZlciA9IG51bGw7CiAgICAgICAgbGV0IG9yaWdpbmFsQnVmZmVyID0gdW5kZWZpbmVkOwogICAgICAgIC8vIDEuIExvYWQgTWFpbiBBdWRpbwogICAgICAgIGlmIChzdC5kYXRhICYmIHN0LmRhdGEuYnl0ZUxlbmd0aCA+IDApIHsKICAgICAgICAgICAgYXVkaW9CdWZmZXIgPSBhd2FpdCBkZWNvZGVBdWRpb0RhdGEoc3QuZGF0YSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHN0LmJsb2IpIHsKICAgICAgICAgICAgY29uc3QgYWIgPSBhd2FpdCBzdC5ibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgICAgICAgIGlmIChhYi5ieXRlTGVuZ3RoID4gMCkKICAgICAgICAgICAgICAgIGF1ZGlvQnVmZmVyID0gYXdhaXQgZGVjb2RlQXVkaW9EYXRhKGFiKTsKICAgICAgICB9CiAgICAgICAgLy8gMi4gTG9hZCBPcmlnaW5hbCBBdWRpbyAoaWYgZXhpc3RzKQogICAgICAgIGlmIChzdC5vcmlnaW5hbERhdGEgJiYgc3Qub3JpZ2luYWxEYXRhLmJ5dGVMZW5ndGggPiAwKSB7CiAgICAgICAgICAgIG9yaWdpbmFsQnVmZmVyID0gYXdhaXQgZGVjb2RlQXVkaW9EYXRhKHN0Lm9yaWdpbmFsRGF0YSk7CiAgICAgICAgfQogICAgICAgIGlmICghYXVkaW9CdWZmZXIpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHRyYWNrID0gewogICAgICAgICAgICBpZDogc3QuaWQsCiAgICAgICAgICAgIG5hbWU6IHN0Lm5hbWUsCiAgICAgICAgICAgIGJ1ZmZlcjogYXVkaW9CdWZmZXIsCiAgICAgICAgICAgIG9yaWdpbmFsQnVmZmVyOiBvcmlnaW5hbEJ1ZmZlciwKICAgICAgICAgICAgc3RhcnRUaW1lOiBzdC5zdGFydFRpbWUsCiAgICAgICAgICAgIHRyaW1TdGFydDogc3QudHJpbVN0YXJ0ID8/IDAsCiAgICAgICAgICAgIGR1cmF0aW9uOiBzdC5kdXJhdGlvbiA/PyBhdWRpb0J1ZmZlci5kdXJhdGlvbiwKICAgICAgICAgICAgbGFuZTogc3QubGFuZSwKICAgICAgICAgICAgdm9sdW1lOiBzdC52b2x1bWUsCiAgICAgICAgICAgIGlzTXV0ZWQ6IHN0LmlzTXV0ZWQsCiAgICAgICAgICAgIGlzU29sbzogc3QuaXNTb2xvLAogICAgICAgICAgICBjb2xvcjogc3QuY29sb3IsCiAgICAgICAgICAgIGJwbTogc3QuYnBtLAogICAgICAgICAgICBhY3RpdmVFZmZlY3RzOiBzdC5hY3RpdmVFZmZlY3RzCiAgICAgICAgfTsKICAgICAgICAvLyAzLiBMb2FkIENyb3NzZmFkZSBNZXRhZGF0YQogICAgICAgIGlmIChzdC5jcm9zc2ZhZGVNZXRhZGF0YSkgewogICAgICAgICAgICBjb25zdCBsZWZ0ID0gYXdhaXQgY29udmVydFNhdmVkVG9UcmFjayhzdC5jcm9zc2ZhZGVNZXRhZGF0YS5sZWZ0LCBjdHgpOwogICAgICAgICAgICBjb25zdCByaWdodCA9IGF3YWl0IGNvbnZlcnRTYXZlZFRvVHJhY2soc3QuY3Jvc3NmYWRlTWV0YWRhdGEucmlnaHQsIGN0eCk7CiAgICAgICAgICAgIGlmIChsZWZ0ICYmIHJpZ2h0KSB7CiAgICAgICAgICAgICAgICB0cmFjay5jcm9zc2ZhZGVNZXRhZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBsZWZ0LAogICAgICAgICAgICAgICAgICAgIHJpZ2h0LAogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzdC5jcm9zc2ZhZGVNZXRhZGF0YS5kdXJhdGlvbgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJhY2s7CiAgICB9CiAgICBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGNvbnZlcnRpbmcgc2F2ZWQgdHJhY2s6IiwgZSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn07CmV4cG9ydCBjb25zdCBzYXZlUHJvamVjdCA9IGFzeW5jIChpZCwgbmFtZSwgdHJhY2tzLCB0aHVtYm5haWwgPSAnJykgPT4gewogICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuREIoKTsKICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpOwogICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTsKICAgIC8vIE9wdGltaXplZCBTYXZpbmc6IFNlcXVlbnRpYWwgcHJvY2Vzc2luZwogICAgY29uc3Qgc2F2ZWRUcmFja3MgPSBbXTsKICAgIGZvciAoY29uc3QgdCBvZiB0cmFja3MpIHsKICAgICAgICBjb25zdCBzdCA9IGNvbnZlcnRUcmFja1RvU2F2ZWQodCk7CiAgICAgICAgc2F2ZWRUcmFja3MucHVzaChzdCk7CiAgICB9CiAgICBjb25zdCBwcm9qZWN0ID0gewogICAgICAgIGlkLAogICAgICAgIG5hbWUsCiAgICAgICAgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpLAogICAgICAgIHRyYWNrczogc2F2ZWRUcmFja3MsCiAgICAgICAgdGh1bWJuYWlsCiAgICB9OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBjb25zdCByZXF1ZXN0ID0gc3RvcmUucHV0KHByb2plY3QpOwogICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZSgpOwogICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTsKICAgIH0pOwp9OwpleHBvcnQgY29uc3QgbG9hZFByb2plY3RzID0gYXN5bmMgKCkgPT4gewogICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuREIoKTsKICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSwgJ3JlYWRvbmx5Jyk7CiAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBjb25zdCByZXF1ZXN0ID0gc3RvcmUuZ2V0QWxsKCk7CiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHByb2plY3RzID0gcmVxdWVzdC5yZXN1bHQ7CiAgICAgICAgICAgIHByb2plY3RzLnNvcnQoKGEsIGIpID0+IGIubGFzdE1vZGlmaWVkIC0gYS5sYXN0TW9kaWZpZWQpOwogICAgICAgICAgICByZXNvbHZlKHByb2plY3RzKTsKICAgICAgICB9OwogICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTsKICAgIH0pOwp9OwpleHBvcnQgY29uc3QgbG9hZFByb2plY3RUcmFja3MgPSBhc3luYyAoc2F2ZWRUcmFja3MpID0+IHsKICAgIGlmICghc2F2ZWRUcmFja3MpCiAgICAgICAgcmV0dXJuIFtdOwogICAgY29uc3QgY3R4ID0gZ2V0QXVkaW9Db250ZXh0KCk7CiAgICBjb25zdCB0cmFja3MgPSBbXTsKICAgIGZvciAoY29uc3Qgc3Qgb2Ygc2F2ZWRUcmFja3MpIHsKICAgICAgICBpZiAoIXN0KQogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICBjb25zdCBsb2FkZWRUcmFjayA9IGF3YWl0IGNvbnZlcnRTYXZlZFRvVHJhY2soc3QsIGN0eCk7CiAgICAgICAgaWYgKGxvYWRlZFRyYWNrKSB7CiAgICAgICAgICAgIHRyYWNrcy5wdXNoKGxvYWRlZFRyYWNrKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIC8vIEVycm9yL1BsYWNlaG9sZGVyIGxvZ2ljCiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrRHVyYXRpb24gPSBzdC5kdXJhdGlvbiB8fCA1LjA7CiAgICAgICAgICAgIGNvbnN0IGVycm9yQnVmZmVyID0gY3JlYXRlRW1wdHlCdWZmZXIoY3R4LCBmYWxsYmFja0R1cmF0aW9uKTsKICAgICAgICAgICAgdHJhY2tzLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IHN0LmlkLAogICAgICAgICAgICAgICAgbmFtZTogYOKaoO+4jyBNaXNzaW5nIERhdGE6ICR7c3QubmFtZX1gLAogICAgICAgICAgICAgICAgYnVmZmVyOiBlcnJvckJ1ZmZlciwKICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogc3Quc3RhcnRUaW1lLAogICAgICAgICAgICAgICAgdHJpbVN0YXJ0OiAwLAogICAgICAgICAgICAgICAgZHVyYXRpb246IGZhbGxiYWNrRHVyYXRpb24sCiAgICAgICAgICAgICAgICBsYW5lOiBzdC5sYW5lLAogICAgICAgICAgICAgICAgdm9sdW1lOiBzdC52b2x1bWUsCiAgICAgICAgICAgICAgICBpc011dGVkOiB0cnVlLAogICAgICAgICAgICAgICAgaXNTb2xvOiBmYWxzZSwKICAgICAgICAgICAgICAgIGNvbG9yOiAnI2VmNDQ0NCcKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHRyYWNrczsKfTsKZXhwb3J0IGNvbnN0IGRlbGV0ZVByb2plY3QgPSBhc3luYyAoaWQpID0+IHsKICAgIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRCKCk7CiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTsKICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5kZWxldGUoaWQpOwogICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZSgpOwogICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHJlamVjdChyZXF1ZXN0LmVycm9yKTsKICAgIH0pOwp9OwpleHBvcnQgY29uc3QgdXBkYXRlUHJvamVjdE5hbWUgPSBhc3luYyAoaWQsIG5ld05hbWUpID0+IHsKICAgIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRCKCk7CiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTsKICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbnN0IGdldFJlcXVlc3QgPSBzdG9yZS5nZXQoaWQpOwogICAgICAgIGdldFJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4gewogICAgICAgICAgICBjb25zdCBwcm9qZWN0ID0gZ2V0UmVxdWVzdC5yZXN1bHQ7CiAgICAgICAgICAgIGlmIChwcm9qZWN0KSB7CiAgICAgICAgICAgICAgICBwcm9qZWN0Lm5hbWUgPSBuZXdOYW1lOwogICAgICAgICAgICAgICAgc3RvcmUucHV0KHByb2plY3QpLm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdCgiUHJvamVjdCBub3QgZm91bmQiKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZ2V0UmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KGdldFJlcXVlc3QuZXJyb3IpOwogICAgfSk7Cn07Cg==","@/sw":"data:application/javascript;base64,CmNvbnN0IENBQ0hFX05BTUUgPSAnc29uaWNwb2NrZXQtdjQnOwpjb25zdCBBU1NFVFNfVE9fQ0FDSEUgPSBbCiAgJy8nLAogICcvaW5kZXguaHRtbCcsCiAgJy9pbmRleC50c3gnLAogICcvQXBwLnRzeCcsCiAgJy90eXBlcy50cycsCiAgJy9jb25zdGFudHMudHMnLAogICcvbWFuaWZlc3QuanNvbicsCiAgJy9zZXJ2aWNlcy9hdWRpb1V0aWxzLnRzJywKICAnL3NlcnZpY2VzL3N0b3JhZ2VTZXJ2aWNlLnRzJywKICAnL2NvbXBvbmVudHMvQnV0dG9uLnRzeCcsCiAgJy9jb21wb25lbnRzL1dhdmVmb3JtRGlzcGxheS50c3gnLAogICcvY29tcG9uZW50cy9CZWF0TWFrZXJNb2RhbC50c3gnLAogICcvY29tcG9uZW50cy9FZmZlY3RzTW9kYWwudHN4JywKICAnL2NvbXBvbmVudHMvRXhwb3J0TW9kYWwudHN4JywKICAnaHR0cHM6Ly9jZG4udGFpbHdpbmRjc3MuY29tJywKICAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9sYW1lanNAMS4yLjEvbGFtZS5taW4uanMnCl07CgpzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCAoZXZlbnQpID0+IHsKICBldmVudC53YWl0VW50aWwoCiAgICBjYWNoZXMub3BlbihDQUNIRV9OQU1FKS50aGVuKChjYWNoZSkgPT4gewogICAgICByZXR1cm4gY2FjaGUuYWRkQWxsKEFTU0VUU19UT19DQUNIRSk7CiAgICB9KQogICk7CiAgc2VsZi5za2lwV2FpdGluZygpOwp9KTsKCnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZhdGUnLCAoZXZlbnQpID0+IHsKICBldmVudC53YWl0VW50aWwoCiAgICBjYWNoZXMua2V5cygpLnRoZW4oKGNhY2hlTmFtZXMpID0+IHsKICAgICAgcmV0dXJuIFByb21pc2UuYWxsKAogICAgICAgIGNhY2hlTmFtZXMubWFwKChjYWNoZU5hbWUpID0+IHsKICAgICAgICAgIGlmIChjYWNoZU5hbWUgIT09IENBQ0hFX05BTUUpIHsKICAgICAgICAgICAgcmV0dXJuIGNhY2hlcy5kZWxldGUoY2FjaGVOYW1lKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICApOwogICAgfSkKICApOwogIHNlbGYuY2xpZW50cy5jbGFpbSgpOwp9KTsKCnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCAoZXZlbnQpID0+IHsKICAvLyBOYXZpZ2F0aW9uIGZhbGxiYWNrIHRvIGluZGV4Lmh0bWwgZm9yIFNQQSByb3V0aW5nIChpZiBuZWVkZWQpCiAgaWYgKGV2ZW50LnJlcXVlc3QubW9kZSA9PT0gJ25hdmlnYXRlJykgewogICAgZXZlbnQucmVzcG9uZFdpdGgoCiAgICAgIGNhY2hlcy5tYXRjaCgnL2luZGV4Lmh0bWwnKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHJldHVybiByZXNwb25zZSB8fCBmZXRjaChldmVudC5yZXF1ZXN0KTsKICAgICAgfSkKICAgICk7CiAgICByZXR1cm47CiAgfQoKICBldmVudC5yZXNwb25kV2l0aCgKICAgIGNhY2hlcy5tYXRjaChldmVudC5yZXF1ZXN0KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAvLyBDYWNoZSBoaXQgLSByZXR1cm4gcmVzcG9uc2UKICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICB9CiAgICAgIAogICAgICAvLyBDbG9uZSB0aGUgcmVxdWVzdCBmb3IgZmV0Y2gKICAgICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gZXZlbnQucmVxdWVzdC5jbG9uZSgpOwoKICAgICAgcmV0dXJuIGZldGNoKGZldGNoUmVxdWVzdCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAvLyBDaGVjayBpZiB2YWxpZCByZXNwb25zZQogICAgICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSAyMDAgfHwgcmVzcG9uc2UudHlwZSAhPT0gJ2Jhc2ljJykgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICAgIH0KCiAgICAgICAgLy8gQ2FjaGUgbmV3IHJlc291cmNlcyAoZXhjZXB0IEFQSSBjYWxscyB0eXBpY2FsbHkpCiAgICAgICAgaWYgKCFldmVudC5yZXF1ZXN0LnVybC5pbmNsdWRlcygnZ29vZ2xlJykgJiYgIWV2ZW50LnJlcXVlc3QudXJsLmluY2x1ZGVzKCdhcGknKSkgewogICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VUb0NhY2hlID0gcmVzcG9uc2UuY2xvbmUoKTsKICAgICAgICAgICAgIGNhY2hlcy5vcGVuKENBQ0hFX05BTUUpLnRoZW4oKGNhY2hlKSA9PiB7CiAgICAgICAgICAgICAgIGNhY2hlLnB1dChldmVudC5yZXF1ZXN0LCByZXNwb25zZVRvQ2FjaGUpOwogICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgIH0pOwogICAgfSkKICApOwp9KTsK","@/components/Header":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gInJlYWN0L2pzeC1ydW50aW1lIjsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvQnV0dG9uJzsKaW1wb3J0IHsgTUFYX1pPT00sIE1JTl9aT09NIH0gZnJvbSAnQC9jb25zdGFudHMnOwovLyBJY29ucwpjb25zdCBab29tSW5JY29uID0gKCkgPT4gX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTQgaC00IiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTIxIDIxbC02LTZtMi01YTcgNyAwIDExLTE0IDAgNyA3IDAgMDExNCAwek0xMCA3djNtMCAwdjNtMC0zaDNtLTMgMEg3IiB9KSB9KTsKY29uc3QgWm9vbU91dEljb24gPSAoKSA9PiBfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNCBoLTQiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMjEgMjFsLTYtNm0yLTVhNyA3IDAgMTEtMTQgMCA3IDcgMCAwMTE0IDB6TTEzIDEwSDciIH0pIH0pOwpjb25zdCBVbmRvSWNvbiA9ICgpID0+IF9qc3goInN2ZyIsIHsgY2xhc3NOYW1lOiAidy01IGgtNSIsIGZpbGw6ICJub25lIiwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgc3Ryb2tlV2lkdGg6ICIyIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0zIDEwaDEwYTggOCAwIDAxOCA4djJNMyAxMGw2IDZtLTYtNmw2LTYiIH0pIH0pOwpjb25zdCBTaGFyZUV4cG9ydEljb24gPSAoKSA9PiBfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNSBoLTUiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMyAxNi41djIuMjVBMi4yNSAyLjI1IDAgMDA1LjI1IDIxaDEzLjVBMi4yNSAyLjI1IDAgMDAyMSAxOC43NVYxNi41bS0xMy41LTlMMTIgM20wIDBsNC41IDQuNU0xMiAzdjEzLjUiIH0pIH0pOwpjb25zdCBMaWJyYXJ5SWNvbiA9ICgpID0+IF9qc3goInN2ZyIsIHsgY2xhc3NOYW1lOiAidy02IGgtNiIsIGZpbGw6ICJub25lIiwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgc3Ryb2tlV2lkdGg6ICIyIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xMiA2LjI1M3YxM20wLTEzQzEwLjgzMiA1LjQ3NyA5LjI0NiA1IDcuNSA1UzQuMTY4IDUuNDc3IDMgNi4yNTN2MTNDNC4xNjggMTguNDc3IDUuNzU0IDE4IDcuNSAxOHMzLjMzMi40NzcgNC41IDEuMjUzbTAtMTNDMTMuMTY4IDUuNDc3IDE0Ljc1NCA1IDE2LjUgNWMxLjc0NyAwIDMuMzMyLjQ3NyA0LjUgMS4yNTN2MTNDMTkuODMyIDE4LjQ3NyAxOC4yNDcgMTggMTYuNSAxOGMtMS43NDYgMC0zLjMzMi40NzctNC41IDEuMjUzIiB9KSB9KTsKY29uc3QgU2F2ZVN0YXR1c0ljb24gPSAoeyBzdGF0dXMgfSkgPT4gewogICAgaWYgKHN0YXR1cyA9PT0gJ3NhdmluZycpCiAgICAgICAgcmV0dXJuIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC15ZWxsb3ctNTAwIGFuaW1hdGUtcHVsc2UgZm9udC1tZWRpdW0iLCBjaGlsZHJlbjogIlNhdmluZy4uLiIgfSk7CiAgICBpZiAoc3RhdHVzID09PSAnc2F2ZWQnKQogICAgICAgIHJldHVybiBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQtZ3JlZW4tNTAwIGZvbnQtbWVkaXVtIiwgY2hpbGRyZW46ICJTYXZlZCIgfSk7CiAgICByZXR1cm4gX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyB0ZXh0LXppbmMtNTAwIGZvbnQtbWVkaXVtIiwgY2hpbGRyZW46ICJVbnNhdmVkIiB9KTsKfTsKLy8gQ3VzdG9tIEJyYW5kIEljb24gQ29tcG9uZW50CmNvbnN0IEJyYW5kSWNvbiA9ICh7IGNsYXNzTmFtZSB9KSA9PiAoX2pzeCgic3ZnIiwgeyB2ZXJzaW9uOiAiMS4xIiwgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIHZpZXdCb3g6ICIwIDAgMTAyNCAxMDI0IiwgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHN0eWxlOiB7IGVuYWJsZUJhY2tncm91bmQ6ICduZXcgMCAwIDEwMjQgMTAyNCcgfSwgeG1sU3BhY2U6ICJwcmVzZXJ2ZSIsIGNoaWxkcmVuOiBfanN4cygiZyIsIHsgY2hpbGRyZW46IFtfanN4cygibGluZWFyR3JhZGllbnQiLCB7IGlkOiAiU1ZHSURfMV8iLCBncmFkaWVudFVuaXRzOiAidXNlclNwYWNlT25Vc2UiLCB4MTogIjI1My43NTI2IiwgeTE6ICIxMTAxLjA4ODUiLCB4MjogIjEwMDUuMzcyIiwgeTI6ICI5NC43ODgxIiwgZ3JhZGllbnRUcmFuc2Zvcm06ICJtYXRyaXgoMSAwIDAgLTEgMCAxMDI0KSIsIGNoaWxkcmVuOiBbX2pzeCgic3RvcCIsIHsgb2Zmc2V0OiAiMCIsIHN0eWxlOiB7IHN0b3BDb2xvcjogJyMxRkNCRTcnIH0gfSksIF9qc3goInN0b3AiLCB7IG9mZnNldDogIjAuNSIsIHN0eWxlOiB7IHN0b3BDb2xvcjogJyM3ODgxRUYnIH0gfSksIF9qc3goInN0b3AiLCB7IG9mZnNldDogIjEiLCBzdHlsZTogeyBzdG9wQ29sb3I6ICcjQ0M1RERDJyB9IH0pXSB9KSwgX2pzeCgicGF0aCIsIHsgZmlsbDogInVybCgjU1ZHSURfMV8pIiwgZDogIk0yNTMuMyw0OTkuNWMxNi4zLDAsMzAsMTEuNywzMi41LDI3LjhsMTIuOCw4MS4xVjI1NS44YzAtNi43LDUuMy0xMi4yLDEyLTEyLjVjNi43LTAuMywxMi40LDQuOCwxMywxMS41IGwyOC41LDM0NS41bDI3LjMtMjk5LjFjMC42LTYuNCw1LjktMTEuMywxMi40LTExLjRjNi40LDAsMTEuOCw0LjgsMTIuNSwxMS4ybDI4LjcsMjgxLjRsMjcuMS0yMzVjMC43LTYuMyw2LTExLDEyLjMtMTEuMSBjNi4zLTAuMSwxMS43LDQuNiwxMi41LDEwLjhsMjksMjE3LjVsMjctMTcxLjJjMC45LTYsNi4xLTEwLjUsMTIuMS0xMC42YzYuMS0wLjEsMTEuMyw0LjIsMTIuNSwxMC4xTDU5NSw1NDYuOWwyNi43LTEwNy44IGMxLjMtNS40LDYtOS4yLDExLjYtOS41YzUuNS0wLjIsMTAuNiwzLjIsMTIuNCw4LjRsMzEuNCw5MC42bDI2LjctNDYuMmMxLjctMi45LDQuNC01LDcuNi01LjhjMy4yLTAuOSw2LjYtMC40LDkuNSwxLjJsMjguOCwxNi42IGM1LjYsMy4zLDEyLjEsNSwxOC42LDVoMTI4LjdWMzkuOWMtNC43LTIuOC05LjQtNS40LTE0LjMtNy45Qzg1OC43LDE5LjksODM0LjMsMTIuMiw4MDgsNy41Yy0yNS44LTQuNi01Mi4yLTYuMi03OC4zLTYuOSBjLTEyLTAuMy0yNC0wLjUtMzYtMC41QzY3OS41LDAsNjY1LjIsMCw2NTEsMEgzNzNjLTE0LjIsMC0yOC41LDAtNDIuNywwLjFjLTEyLDAuMS0yNCwwLjItMzYsMC41Yy0yNi4xLDAuNy01Mi41LDIuMi03OC4zLDYuOSBjLTI2LjIsNC43LTUwLjYsMTIuNC03NC40LDI0LjVjLTQuMywyLjItOC42LDQuNS0xMi43LDd2NDYwLjVIMjUzLjN6IiB9KSwgX2pzeHMoImxpbmVhckdyYWRpZW50IiwgeyBpZDogIlNWR0lEXzJfIiwgZ3JhZGllbnRVbml0czogInVzZXJTcGFjZU9uVXNlIiwgeDE6ICIyMS4yMDQ1IiwgeTE6ICI5MjcuMzk1MSIsIHgyOiAiNzcyLjgyNCIsIHkyOiAiLTc4LjkwNTIiLCBncmFkaWVudFRyYW5zZm9ybTogIm1hdHJpeCgxIDAgMCAtMSAwIDEwMjQpIiwgY2hpbGRyZW46IFtfanN4KCJzdG9wIiwgeyBvZmZzZXQ6ICIwIiwgc3R5bGU6IHsgc3RvcENvbG9yOiAnIzFGQ0JFNycgfSB9KSwgX2pzeCgic3RvcCIsIHsgb2Zmc2V0OiAiMC41Iiwgc3R5bGU6IHsgc3RvcENvbG9yOiAnIzc4ODFFRicgfSB9KSwgX2pzeCgic3RvcCIsIHsgb2Zmc2V0OiAiMSIsIHN0eWxlOiB7IHN0b3BDb2xvcjogJyNDQzVEREMnIH0gfSldIH0pLCBfanN4KCJwYXRoIiwgeyBmaWxsOiAidXJsKCNTVkdJRF8yXykiLCBkOiAiTTc2OC4xLDUyNC41Yy0xMC45LDAtMjEuNi0yLjktMzEuMS04LjMgbC0xOC0xMC40bC0zNC4xLDU5Yy0yLjQsNC4yLTcuMSw2LjctMTIsNi4yYy00LjktMC41LTktMy43LTEwLjYtOC40bC0yNi41LTc2LjZsLTMwLjIsMTIyLjFjLTEuNCw1LjYtNi40LDkuNS0xMi4xLDkuNSBjLTAuMSwwLTAuMiwwLTAuMywwYy01LjktMC4yLTEwLjgtNC40LTExLjktMTAuMWwtMjYuOC0xMzkuNGwtMjkuMiwxODUuNmMtMSw2LjEtNi4yLDEwLjYtMTIuMywxMC42Yy0wLjEsMC0wLjEsMC0wLjIsMCBjLTYuMi0wLjEtMTEuNC00LjctMTIuMi0xMC44bC0yNy4xLTIwMy4xbC0yOC44LDI0OS40Yy0wLjcsNi4zLTYuMSwxMS4xLTEyLjQsMTEuMWMwLDAtMC4xLDAtMC4xLDBjLTYuNCwwLTExLjctNC45LTEyLjQtMTEuMiBsLTI3LjItMjY3TDM2My45LDc0NmMtMC42LDYuNC02LDExLjQtMTIuNCwxMS40YzAsMCwwLDAtMC4xLDBjLTYuNSwwLTExLjktNS0xMi40LTExLjVsLTE1LjQtMTg2LjR2MjA4LjdjMCw2LjUtNSwxMi0xMS41LDEyLjUgYy0wLjMsMC0wLjcsMC0xLDBjLTYuMSwwLTExLjQtNC40LTEyLjMtMTAuNmwtMzcuNi0yMzguOWMtMC42LTMuOS0zLjktNi43LTcuOC02LjdIMTI4LjhWOTg1YzQuMiwyLjQsOC40LDQuOCwxMi43LDcgYzIzLjgsMTIuMSw0OC4yLDE5LjgsNzQuNCwyNC41YzI1LjgsNC42LDUyLjIsNi4yLDc4LjMsNi45YzEyLDAuMywyNCwwLjUsMzYsMC41YzE0LjIsMC4xLDI4LjUsMC4xLDQyLjcsMC4xaDI3OCBjMTQuMiwwLDI4LjUsMCw0Mi43LTAuMWMxMi0wLjEsMjQtMC4yLDM2LTAuNWMyNi4xLTAuNyw1Mi41LTIuMiw3OC4zLDYuOWMyNi4yLTQuNyw1MC42LTEyLjQsNzQuNC0yNC41YzQuOS0yLjUsOS42LTUuMSwxNC4zLTcuOSBWNTI0LjVINzY4LjF6IiB9KSwgX2pzeCgicGF0aCIsIHsgZmlsbDogIiNGRkZGRkYiLCBkOiAiTTc0OS41LDQ5NC41bC0yOC44LTE2LjZjLTIuOS0xLjctNi4zLTIuMS05LjUtMS4yYy0zLjIsMC45LTUuOSwzLTcuNiw1LjhMNjc3LDUyOC42TDY0NS42LDQzOCBjLTEuOC01LjItNi44LTguNi0xMi40LTguNGMtNS41LDAuMy0xMC4yLDQuMS0xMS42LDkuNUw1OTUsNTQ2LjlsLTI5LjYtMTUzLjdjLTEuMS02LTYuNC0xMC4zLTEyLjUtMTAuMSBjLTYuMSwwLjEtMTEuMiw0LjYtMTIuMSwxMC42bC0yNywxNzEuMmwtMjktMjE3LjVjLTAuOC02LjMtNi4yLTEwLjktMTIuNS0xMC44Yy02LjMsMC4xLTExLjYsNC44LTEyLjMsMTEuMWwtMjcuMSwyMzVsLTI4LjctMjgxLjQgYy0wLjctNi40LTYuMS0xMS4zLTEyLjUtMTEuMmMtNi40LDAtMTEuOCw1LTEyLjQsMTEuNGwtMjcuMywyOTkuMWwtMjguNS0zNDUuNWMtMC42LTYuNy02LjMtMTEuOC0xMy0xMS41Yy02LjcsMC4zLTEyLDUuOC0xMiwxMi41IHYzNTIuNmwtMTIuOC04MS4xYy0yLjUtMTYuMS0xNi4yLTI3LjgtMzIuNS0yNy44SDEyOC44djI1aDEyNC42YzMuOSwwLDcuMiwyLjgsNy44LDYuN2wzNy42LDIzOC45YzEsNi4xLDYuMiwxMC42LDEyLjMsMTAuNiBjMC4zLDAsMC43LDAsMSwwYzYuNS0wLjUsMTEuNS01LjksMTEuNS0xMi41VjU1OS41TDMzOSw3NDUuOWMwLjUsNi41LDUuOSwxMS40LDEyLjQsMTEuNWMwLDAsMCwwLDAuMSwwYzYuNSwwLDExLjktNC45LDEyLjQtMTEuNCBsMjguNi0zMTMuNWwyNy4yLDI2N2MwLjYsNi4zLDYsMTEuMiwxMi40LDExLjJjMCwwLDAuMSwwLDAuMSwwYzYuMywwLDExLjctNC44LDEyLjQtMTEuMWwyOC44LTI0OS40bDI3LjEsMjAzLjEgYzAuOCw2LjIsNiwxMC44LDEyLjIsMTAuOGMwLjEsMCwwLjEsMCwwLjIsMGM2LjEsMCwxMS40LTQuNSwxMi4zLTEwLjZsMjkuMi0xODUuNmwyNi44LDEzOS40YzEuMSw1LjgsNi4xLDEwLDExLjksMTAuMSBjMC4xLDAsMC4yLDAsMC4zLDBjNS43LDAsMTAuNy0zLjksMTIuMS05LjVsMzAuMi0xMjIuMWwyNi41LDc2LjZjMS42LDQuNiw1LjgsNy45LDEwLjYsOC40YzQuOSwwLjUsOS42LTIsMTItNi4ybDM0LjEtNTlsMTgsMTAuNCBjOS40LDUuNCwyMC4yLDguMywzMS4xLDguM2gxMjguN3YtMjVINzY4LjFDNzYxLjYsNDk5LjUsNzU1LjIsNDk3LjgsNzQ5LjUsNDk0LjV6IiB9KSwgX2pzeCgicGF0aCIsIHsgZmlsbDogIiNGQUNDMTQiLCBkOiAiTTc4LjEsNzguMUM1OS41LDk2LjcsNDQsMTE4LjEsMzIsMTQxLjVDMTkuOSwxNjUuMywxMi4yLDE4OS43LDcuNSwyMTZjLTQuNiwyNS44LTYuMiw1Mi4yLTYuOSw3OC4zIGMtMC4zLDEyLTAuNSwyNC0wLjUsMzZDMCwzNDQuNSwwLDM1OC44LDAsMzczdjI3OGMwLDE0LjIsMCwyOC41LDAuMSw0Mi43YzAuMSwxMiwwLjIsMjQsMC41LDM2YzAuNywyNi4xLDIuMiw1Mi41LDYuOSw3OC4zIGM0LjcsMjYuMiwxMi40LDUwLjYsMjQuNSw3NC40YzExLjksMjMuNCwyNy41LDQ0LjgsNDYuMSw2My40YzE1LjIsMTUuMiwzMi4yLDI4LjMsNTAuNywzOS4xVjUyNC41di0yNVYzOSBDMTEwLjMsNDkuOCw5My4zLDYyLjksNzguMSw3OC4xeiBNMTA4LjEsNjMwLjhjMy41LDYuOSwwLjYsMTUuMy02LjMsMTguOGMtMiwxLTQuMSwxLjUtNi4yLDEuNWMtNS4xLDAtMTAuMS0yLjgtMTIuNS03LjggbC02Mi4zLTEyNWMtMi0zLjktMi04LjYsMC0xMi41bDYyLjMtMTI1YzMuNS02LjksMTEuOS05LjcsMTguOC02LjNjNi45LDMuNSw5LjcsMTEuOSw2LjMsMTguOEw0OC45LDUxMkwxMDguMSw2MzAuOHoiIH0pLCBfanN4KCJwYXRoIiwgeyBmaWxsOiAiI0ZBQ0MxNCIsIGQ6ICJNMTAyMy45LDMzMC4zYy0wLjEtMTItMC4yLTI0LTAuNS0zNmMtMC43LTI2LjEtMi4yLTUyLjUtNi45LTc4LjNjLTQuNy0yNi4yLTEyLjQtNTAuNi0yNC41LTc0LjQgYy0xMS45LTIzLjQtMjcuNS00NC44LTQ2LjEtNjMuNGMtMTQuNy0xNC43LTMxLjItMjcuNS00OS4xLTM4LjJ2NDU5LjZ2MjV2NDU5LjZjMTcuOS0xMC42LDM0LjQtMjMuNSw0OS4xLTM4LjIgYzE4LjYtMTguNiwzNC4xLTQwLDQ2LjEtNjMuNGMxMi4xLTIzLjgsMTkuOC00OC4yLDI0LjUtNzQuNGM0LjYtMjUuOCw2LjItNTIuMiw2LjktNzguM2MwLjMtMTIsMC41LTI0LDAuNS0zNiBjMC4xLTE0LjIsMC4xLTI4LjUsMC4xLTQyLjdWMzczQzEwMjQsMzU4LjgsMTAyNCwzNDQuNSwxMDIzLjksMzMwLjN6IE0xMDA0LjEsNTE4LjJsLTYyLjMsMTI1Yy0yLjQsNC45LTcuNCw3LjgtMTIuNSw3LjggYy0yLjEsMC00LjItMC41LTYuMi0xLjVjLTYuOS0zLjUtOS43LTExLjktNi4zLTE4LjhMOTc1LjksNTEybC01OS4yLTExOC44Yy0zLjUtNi45LTAuNi0xNS4zLDYuMy0xOC44YzYuOS0zLjUsMTUuMy0wLjYsMTguOCw2LjMgbDYyLjMsMTI1QzEwMDYsNTA5LjcsMTAwNiw1MTQuMywxMDA0LjEsNTE4LjJ6IiB9KSwgX2pzeCgicGF0aCIsIHsgZDogIk0xMDEuOCwzNzQuNWMtNi45LTMuNS0xNS4zLTAuNi0xOC44LDYuM2wtNjIuMywxMjVjLTIsMy45LTIsOC42LDAsMTIuNWw2Mi4zLDEyNWMyLjUsNC45LDcuNCw3LjgsMTIuNSw3LjggYzIuMSwwLDQuMi0wLjUsNi4yLTEuNWM2LjktMy41LDkuNy0xMS45LDYuMy0xOC44TDQ4LjksNTEybDU5LjItMTE4LjhDMTExLjUsMzg2LjMsMTA4LjcsMzc3LjksMTAxLjgsMzc0LjV6IiB9KSwgX2pzeCgicGF0aCIsIHsgZDogIk05NDEuOCwzODAuOGMtMy41LTYuOS0xMS45LTkuNy0xOC44LTYuM2MtNi45LDMuNS05LjcsMTEuOS02LjMtMTguOEw5NzUuOSw1MTJsLTU5LjIsMTE4LjhjLTMuNS02LjktMC42LDE1LjMsNi4zLTE4LjggYzIsMSw0LjEsMS41LDYuMiwxLjVjNS4xLDAsMTAuMS0yLjgsMTIuNS03LjhsNjIuMy0xMjVjMi0zLjksMi04LjYsMC0xMi41TDk0MS44LDM4MC44eiIgfSksIF9qc3goInBvbHlnb24iLCB7IHBvaW50czogIjEwMjQsMCAxMDI0LDM3MyAxMDI0LDY1MSAxMDI0LDEwMjQgMTAyNCwxMDI0IDEwMjQsMCIgfSldIH0pIH0pKTsKY29uc3QgZm9ybWF0VGltZSA9IChzZWNvbmRzKSA9PiB7CiAgICBpZiAoc2Vjb25kcyA8IDYwKQogICAgICAgIHJldHVybiBgJHtzZWNvbmRzLnRvRml4ZWQoMil9c2A7CiAgICBjb25zdCBtID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApOwogICAgY29uc3QgcyA9IChzZWNvbmRzICUgNjApLnRvRml4ZWQoMik7CiAgICByZXR1cm4gYCR7bX1tICR7c31zYDsKfTsKZXhwb3J0IGNvbnN0IEhlYWRlciA9ICh7IGN1cnJlbnRQcm9qZWN0TmFtZSwgc2F2ZVN0YXR1cywgaGFzUHJvamVjdElkLCBoaXN0b3J5TGVuZ3RoLCB0cmFja3NDb3VudCwgem9vbSwgY3VycmVudFRpbWUsIG1heER1cmF0aW9uLCByZWNlbnRQcm9qZWN0UHJldmlldywgb25ab29tLCBvblVuZG8sIG9uRXhwb3J0LCBvblNhdmVBbmRDbG9zZSwgbWluWm9vbSA9IE1JTl9aT09NIH0pID0+IHsKICAgIHJldHVybiAoX2pzeHMoX0ZyYWdtZW50LCB7IGNoaWxkcmVuOiBbX2pzeHMoImhlYWRlciIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCB3LWZ1bGwgbGFuZHNjYXBlOnctMTYgbGFuZHNjYXBlOnhsOnctZnVsbCBoLWF1dG8gbGFuZHNjYXBlOmgtZnVsbCBsYW5kc2NhcGU6eGw6aC1hdXRvIGJvcmRlci1iIGxhbmRzY2FwZTpib3JkZXItYi0wIGxhbmRzY2FwZTpib3JkZXItciBsYW5kc2NhcGU6eGw6Ym9yZGVyLWIgbGFuZHNjYXBlOnhsOmJvcmRlci1yLTAgYm9yZGVyLXppbmMtOTAwIGJnLXppbmMtOTUwIHNocmluay0wIHotMjAganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBweS0yIGxhbmRzY2FwZTpweS00IGxhbmRzY2FwZTpweC0yIGxhbmRzY2FwZTp4bDpwLTQgbGFuZHNjYXBlOnhsOnBiLTggbGFuZHNjYXBlOmp1c3RpZnktYmV0d2VlbiBsYW5kc2NhcGU6eGw6anVzdGlmeS1ub3JtYWwgbGFuZHNjYXBlOm92ZXJmbG93LXZpc2libGUgbm8tc2Nyb2xsYmFyIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyB3LWZ1bGwgcHgtNCBsYW5kc2NhcGU6ZmxleC1jb2wgbGFuZHNjYXBlOmdhcC00IGxhbmRzY2FwZTpweC0wIGxhbmRzY2FwZTp4bDpmbGV4LXJvdyBsYW5kc2NhcGU6eGw6cHgtNCBsYW5kc2NhcGU6eGw6dy1mdWxsIGxhbmRzY2FwZTp4bDpqdXN0aWZ5LXN0YXJ0IiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInctMTAgaC0xMCBzaHJpbmstMCBsYW5kc2NhcGU6aGlkZGVuIGxhbmRzY2FwZTp4bDpibG9jayIsIGNoaWxkcmVuOiBfanN4KEJyYW5kSWNvbiwgeyBjbGFzc05hbWU6ICJ3LWZ1bGwgaC1mdWxsIGRyb3Atc2hhZG93LTJ4bCIgfSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImhpZGRlbiBsYW5kc2NhcGU6ZmxleCBsYW5kc2NhcGU6eGw6aGlkZGVuIGZsZXgtY29sIGl0ZW1zLWNlbnRlciIsIGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBvblNhdmVBbmRDbG9zZSwgY2xhc3NOYW1lOiAidy0xMCBoLTEwIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuIGJvcmRlciBib3JkZXItemluYy03MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctemluYy05MDAiLCBjaGlsZHJlbjogcmVjZW50UHJvamVjdFByZXZpZXcgPyBfanN4KCJpbWciLCB7IHNyYzogcmVjZW50UHJvamVjdFByZXZpZXcsIGNsYXNzTmFtZTogInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyIG9wYWNpdHktODAiLCBhbHQ6ICJQcmV2aWV3IiB9KSA6IF9qc3goTGlicmFyeUljb24sIHt9KSB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1bOHB4XSB0ZXh0LXppbmMtNTAwIG10LTEgZm9udC1ib2xkIiwgY2hpbGRyZW46ICJMSUIiIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAibGFuZHNjYXBlOmhpZGRlbiBsYW5kc2NhcGU6eGw6YmxvY2sgZmxleC0xIG1pbi13LTAiLCBjaGlsZHJlbjogW19qc3goImgxIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWxnIGZvbnQtYm9sZCB0cmFja2luZy10aWdodCB0ZXh0LXdoaXRlIGxlYWRpbmctdGlnaHQgdHJ1bmNhdGUiLCBjaGlsZHJlbjogIlNvbmljUG9ja2V0IiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiLCBjaGlsZHJlbjogW19qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQtWzEwcHhdIHRleHQtemluYy01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBmb250LXNlbWlib2xkIHRydW5jYXRlIG1heC13LVsxNTBweF0iLCBjaGlsZHJlbjogY3VycmVudFByb2plY3ROYW1lIHx8ICJOZXcgUHJvamVjdCIgfSksIGhhc1Byb2plY3RJZCAmJiBfanN4KFNhdmVTdGF0dXNJY29uLCB7IHN0YXR1czogc2F2ZVN0YXR1cyB9KV0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGdhcC0yIGl0ZW1zLWNlbnRlciBtbC1hdXRvIGxhbmRzY2FwZTpoaWRkZW4gbGFuZHNjYXBlOnhsOmZsZXgiLCBjaGlsZHJlbjogW19qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJnaG9zdCIsIG9uQ2xpY2s6IG9uVW5kbywgZGlzYWJsZWQ6IGhpc3RvcnlMZW5ndGggPT09IDAsIGljb246IF9qc3goVW5kb0ljb24sIHt9KSB9KSwgX2pzeChCdXR0b24sIHsgdmFyaWFudDogImdob3N0Iiwgb25DbGljazogb25FeHBvcnQsIGRpc2FibGVkOiB0cmFja3NDb3VudCA9PT0gMCwgY2xhc3NOYW1lOiAidGV4dC1jeWFuLTQwMCBob3ZlcjpiZy1jeWFuLTk1MC8zMCIsIGljb246IF9qc3goU2hhcmVFeHBvcnRJY29uLCB7fSkgfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJnaG9zdCIsIG9uQ2xpY2s6IG9uU2F2ZUFuZENsb3NlLCBjbGFzc05hbWU6ICJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC16aW5jLTMwMCBob3Zlcjp0ZXh0LXdoaXRlIiwgbGFiZWw6ICJEb25lIiB9KV0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJoaWRkZW4gbGFuZHNjYXBlOmZsZXggbGFuZHNjYXBlOnhsOmhpZGRlbiBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTIgZmxleC0xIGp1c3RpZnktY2VudGVyIHB5LTIiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gb25ab29tKHpvb20gKyAxMCksIGNsYXNzTmFtZTogInAtMSBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtemluYy01MDAgc2hyaW5rLTAiLCBjaGlsZHJlbjogX2pzeChab29tSW5JY29uLCB7fSkgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAicmVsYXRpdmUgdy02IGgtMjQgbGc6aC02NCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBncm91cCIsIGNoaWxkcmVuOiBfanN4KCJpbnB1dCIsIHsgdHlwZTogInJhbmdlIiwgc3RlcDogMC4wMSwgbWluOiBtaW5ab29tLCBtYXg6IE1BWF9aT09NLCB2YWx1ZTogem9vbSwgb25DaGFuZ2U6IChlKSA9PiBvblpvb20oTnVtYmVyKGUudGFyZ2V0LnZhbHVlKSksIGNsYXNzTmFtZTogImFic29sdXRlIHctMjQgbGc6dy02NCBoLTYgYmctdHJhbnNwYXJlbnQgYXBwZWFyYW5jZS1ub25lIGN1cnNvci1wb2ludGVyIFsmOjotd2Via2l0LXNsaWRlci10aHVtYl06YXBwZWFyYW5jZS1ub25lIFsmOjotd2Via2l0LXNsaWRlci10aHVtYl06dy00IFsmOjotd2Via2l0LXNsaWRlci10aHVtYl06aC00IFsmOjotd2Via2l0LXNsaWRlci10aHVtYl06cm91bmRlZC1mdWxsIFsmOjotd2Via2l0LXNsaWRlci10aHVtYl06YmctY3lhbi01MDAgYmctemluYy04MDAgcm91bmRlZC1mdWxsIiwgc3R5bGU6IHsgdHJhbnNmb3JtOiAncm90YXRlKC05MGRlZyknLCB0cmFuc2Zvcm1PcmlnaW46ICdjZW50ZXInIH0gfSkgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gb25ab29tKHpvb20gLSAxMCksIGNsYXNzTmFtZTogInAtMSBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtemluYy01MDAgc2hyaW5rLTAiLCBjaGlsZHJlbjogX2pzeChab29tT3V0SWNvbiwge30pIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiaGlkZGVuIGxhbmRzY2FwZTpmbGV4IGxhbmRzY2FwZTp4bDpoaWRkZW4gZmxleC1jb2wgZ2FwLTIgaXRlbXMtY2VudGVyIHBiLTQiLCBjaGlsZHJlbjogW19qc3goQnV0dG9uLCB7IHZhcmlhbnQ6ICJnaG9zdCIsIG9uQ2xpY2s6IG9uVW5kbywgZGlzYWJsZWQ6IGhpc3RvcnlMZW5ndGggPT09IDAsIGljb246IF9qc3goVW5kb0ljb24sIHt9KSwgY2xhc3NOYW1lOiAicC0yIiB9KSwgX2pzeChCdXR0b24sIHsgdmFyaWFudDogImdob3N0Iiwgb25DbGljazogb25FeHBvcnQsIGRpc2FibGVkOiB0cmFja3NDb3VudCA9PT0gMCwgY2xhc3NOYW1lOiAidGV4dC1jeWFuLTQwMCBob3ZlcjpiZy1jeWFuLTk1MC8zMCBwLTIiLCBpY29uOiBfanN4KFNoYXJlRXhwb3J0SWNvbiwge30pIH0pLCBfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiAiZ2hvc3QiLCBvbkNsaWNrOiBvblNhdmVBbmRDbG9zZSwgY2xhc3NOYW1lOiAidGV4dC1bMTBweF0gZm9udC1ib2xkIHRleHQtemluYy0zMDAgaG92ZXI6dGV4dC13aGl0ZSB3cml0aW5nLXZlcnRpY2FsLWxyIHB5LTIiLCBsYWJlbDogIkRPTkUiIH0pXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImxhbmRzY2FwZTpoaWRkZW4gbGFuZHNjYXBlOnhsOmZsZXggaC0xMiBmbGV4IGl0ZW1zLWNlbnRlciBweC00IGp1c3RpZnktYmV0d2VlbiBib3JkZXItYiBib3JkZXItemluYy05MDAgYmctemluYy05NTAvNTAgYmFja2Ryb3AtYmx1ci1zbSBzaHJpbmstMCBnYXAtNCIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQgdGV4dC1bMTBweF0gZm9udC1ib2xkIHRleHQtemluYy01MDAgc2hyaW5rLTAiLCBjaGlsZHJlbjogW19qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ1cHBlcmNhc2UiLCBjaGlsZHJlbjogWyJUcmFja3M6ICIsIHRyYWNrc0NvdW50XSB9KSwgX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogInRhYnVsYXItbnVtcyBub3JtYWwtY2FzZSIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1jeWFuLTUwMCIsIGNoaWxkcmVuOiBmb3JtYXRUaW1lKGN1cnJlbnRUaW1lKSB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC16aW5jLTYwMCBteC0yIiwgY2hpbGRyZW46ICIvIiB9KSwgX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46IGZvcm1hdFRpbWUobWF4RHVyYXRpb24pIH0pXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctNDQgbWQ6dy02NCBtZDpmbGV4LTEgbWQ6bWF4LXcteHMganVzdGlmeS1lbmQiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gb25ab29tKHpvb20gLSAxMCksIGNsYXNzTmFtZTogInAtMiBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtemluYy01MDAgc2hyaW5rLTAiLCBjaGlsZHJlbjogX2pzeChab29tT3V0SWNvbiwge30pIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInJlbGF0aXZlIHctZnVsbCBoLTYgZmxleCBpdGVtcy1jZW50ZXIgZ3JvdXAiLCBjaGlsZHJlbjogX2pzeCgiaW5wdXQiLCB7IHR5cGU6ICJyYW5nZSIsIHN0ZXA6IDAuMDEsIG1pbjogbWluWm9vbSwgbWF4OiBNQVhfWk9PTSwgdmFsdWU6IHpvb20sIG9uQ2hhbmdlOiAoZSkgPT4gb25ab29tKE51bWJlcihlLnRhcmdldC52YWx1ZSkpLCBjbGFzc05hbWU6ICJ3LWZ1bGwgaC0xIGJnLXppbmMtODAwIHJvdW5kZWQtZnVsbCBhcHBlYXJhbmNlLW5vbmUgY3Vyc29yLXBvaW50ZXIgWyY6Oi13ZWJraXQtc2xpZGVyLXRodW1iXTphcHBlYXJhbmNlLW5vbmUgWyY6Oi13ZWJraXQtc2xpZGVyLXRodW1iXTp3LTQgWyY6Oi13ZWJraXQtc2xpZGVyLXRodW1iXTpoLTQgWyY6Oi13ZWJraXQtc2xpZGVyLXRodW1iXTpyb3VuZGVkLWZ1bGwgWyY6Oi13ZWJraXQtc2xpZGVyLXRodW1iXTpiZy1jeWFuLTUwMCIgfSkgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gb25ab29tKHpvb20gKyAxMCksIGNsYXNzTmFtZTogInAtMiBob3Zlcjp0ZXh0LXdoaXRlIHRleHQtemluYy01MDAgc2hyaW5rLTAiLCBjaGlsZHJlbjogX2pzeChab29tSW5JY29uLCB7fSkgfSldIH0pXSB9KV0gfSkpOwp9Owo=","@/components/TransportControls":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBCdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL0J1dHRvbic7Ci8vIEljb25zCmNvbnN0IFVwbG9hZEljb24gPSAoKSA9PiBfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNiBoLTYiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNOSAxOVY2bDEyLTN2MTNNOSAxOWMwIDEuMTA1LTEuMzQzIDItMyAycy0zLS44OTUtMy0yIDEuMzQzLTIgMy0yIDMgLjg5NSAzIDJ6bTEyLTNjMCAxLjEwNS0xLjM0MyAyLTMgMnMtMy0uODk1LTMtMiAxLjM0My0yIDMtMiAzIC44OTUgMyAyek05IDEwbDEyLTMiIH0pIH0pOwpjb25zdCBNaWNJY29uID0gKCkgPT4gX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTYgaC02IiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTE5IDExYTcgNyAwIDAxLTcgN20wIDBhNyA3IDAgMDEtNy03bTcgN3Y0bTAgMEg4bTQgMGg0bS00LThhMyAzIDAgMDEtMy0zVjVhMyAzIDAgMTE2IDB2NmEzIDMgMCAwMS0zIDN6IiB9KSB9KTsKY29uc3QgU3RvcFJlY0ljb24gPSAoKSA9PiBfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNiBoLTYgdGV4dC1yZWQtNTAwIiwgZmlsbDogImN1cnJlbnRDb2xvciIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicmVjdCIsIHsgeDogIjYiLCB5OiAiNiIsIHdpZHRoOiAiMTIiLCBoZWlnaHQ6ICIxMiIsIHJ4OiAiMiIgfSkgfSk7CmNvbnN0IERydW1JY29uID0gKCkgPT4gX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTYgaC02IiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTUgMjBoMTRhMiAyIDAgMDEyIDJ2MUgzdi0xYTIgMiAwIDAxMi0yem0wLTZoMTRsMS41IDVIMy41TDUgMTR6bTAtOWEzIDMgMCAwMTYgMHYySDVWNXptOCAwYTMgMyAwIDAxNiAwdjJoLTZWNXoiIH0pIH0pOwpjb25zdCBQbGF5SWNvbiA9ICgpID0+IF9qc3goInN2ZyIsIHsgY2xhc3NOYW1lOiAidy04IGgtOCB0cmFuc2xhdGUteC0wLjUiLCBmaWxsOiAiY3VycmVudENvbG9yIiwgdmlld0JveDogIjAgMCAyNCAyNCIsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBkOiAiTTggNXYxNGwxMS03eiIgfSkgfSk7CmNvbnN0IFBhdXNlSWNvbiA9ICgpID0+IF9qc3goInN2ZyIsIHsgY2xhc3NOYW1lOiAidy04IGgtOCIsIGZpbGw6ICJjdXJyZW50Q29sb3IiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IGQ6ICJNNiAxOWg0VjVINnYxNHptOC0xNHYxNGg0VjVoLTR6IiB9KSB9KTsKY29uc3QgU2Npc3NvcnNJY29uID0gKCkgPT4gX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTUgaC01IC1yb3RhdGUtOTAiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTQuMTIxIDE0LjEyMUwxOSAxOW0tNy03bDctN20tNyA3bC0yLjg3OSAyLjg3OU0xMiAxMkw5LjEyMSA5LjEyMW0wIDUuNzU4YTMgMyAwIDEwLTQuMjQzIDQuMjQzIDMgMyAwIDAwNC4yNDMtNC4yNDN6bTAtNS43NThhMyAzIDAgMTAtNC4yNDMtNC4yNDMgMyAzIDAgMDA0LjI0MyA0LjI0M3oiIH0pIH0pOwpjb25zdCBJT1NDcm9wSWNvbiA9ICgpID0+IF9qc3goInN2ZyIsIHsgY2xhc3NOYW1lOiAidy01IGgtNSIsIGZpbGw6ICJjdXJyZW50Q29sb3IiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IGQ6ICJNMTcgMTVoMlY3YzAtMS4xLS45LTItMi0ySDl2Mmg4djh6TTcgMTdWMUg1djRIMXYyaDR2MTBjMCAxLjEuOSAyIDIgMmgxMHY0aDJ2LTRoNHYtMkg3eiIgfSkgfSk7CmNvbnN0IEZ4SWNvbiA9ICgpID0+IF9qc3hzKCJzdmciLCB7IGNsYXNzTmFtZTogInctNSBoLTUiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogW19qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTEwLjUgNmE3LjUgNy41IDAgMTA3LjUgNy41aC03LjVWNnoiIH0pLCBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk0xMy41IDEwLjVIMjFBNy41IDcuNSAwIDAwMTMuNSAzdjcuNXoiIH0pXSB9KTsKY29uc3QgTGlicmFyeUljb24gPSAoKSA9PiBfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNiBoLTYiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTIgNi4yNTN2MTNtMC0xM0MxMC44MzIgNS40NzcgOS4yNDYgNSA3LjUgNVM0LjE2OCA1LjQ3NyAzIDYuMjUzdjEzQzQuMTY4IDE4LjQ3NyA1Ljc1NCAxOCA3LjUgMThzMy4zMzIuNDc3IDQuNSAxLjI1M20wLTEzQzEzLjE2OCA1LjQ3NyAxNC43NTQgNSAxNi41IDVjMS43NDcgMCAzLjMzMi40NzcgNC41IDEuMjUzdjEzQzE5LjgzMiAxOC40NzcgMTguMjQ3IDE4IDE2LjUgMThjLTEuNzQ2IDAtMy4zMzIuNDc3LTQuNSAxLjI1MyIgfSkgfSk7CmV4cG9ydCBjb25zdCBUcmFuc3BvcnRDb250cm9scyA9ICh7IGlzUGxheWluZywgaXNSZWNvcmRpbmcsIHNlbGVjdGVkVHJhY2tJZCwgaXNUcmltTW9kZSwgaW50ZXJhY3RpdmVNb2RlLCBzZWxlY3Rpb24sIGhhc1RyYWNrcywgcmVjZW50UHJvamVjdFByZXZpZXcsIG9uUGxheVBhdXNlLCBvblRvZ2dsZVJlY29yZCwgb25DdXQsIG9uQ3JvcCwgb25FZmZlY3RzLCBvbkltcG9ydENsaWNrLCBvbkJlYXRDbGljaywgb25MaWJyYXJ5Q2xpY2sgfSkgPT4gewogICAgcmV0dXJuIChfanN4cygiZm9vdGVyIiwgeyBjbGFzc05hbWU6ICJiZy16aW5jLTk1MCBib3JkZXItdCBib3JkZXItemluYy05MDAgcC00IHBiLTggc2FmZS1hcmVhLXBiIHNwYWNlLXktNCBzaHJpbmstMCB6LTMwIHNoYWRvdy1bMF8tNXB4XzIwcHhfcmdiYSgwLDAsMCwwLjUpXSBmbGV4IGZsZXgtY29sIHctZnVsbCBsYW5kc2NhcGU6dy0yMCBsYW5kc2NhcGU6eGw6dy1mdWxsIGgtYXV0byBsYW5kc2NhcGU6aC1mdWxsIGxhbmRzY2FwZTp4bDpoLWF1dG8gbGFuZHNjYXBlOmJvcmRlci10LTAgbGFuZHNjYXBlOmJvcmRlci1sIGxhbmRzY2FwZTp4bDpib3JkZXItdCBsYW5kc2NhcGU6eGw6Ym9yZGVyLWwtMCBsYW5kc2NhcGU6cHktMCBsYW5kc2NhcGU6cHgtMiBsYW5kc2NhcGU6eGw6cC00IGxhbmRzY2FwZTp4bDpwYi04IGxhbmRzY2FwZTpqdXN0aWZ5LWJldHdlZW4gbGFuZHNjYXBlOnhsOmp1c3RpZnktbm9ybWFsIGxhbmRzY2FwZTpvdmVyZmxvdy12aXNpYmxlIG5vLXNjcm9sbGJhciIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBnYXAtNCBsYW5kc2NhcGU6aGlkZGVuIGxhbmRzY2FwZTp4bDpmbGV4IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWF4LXctbWQgbXgtYXV0byB3LWZ1bGwgcHgtNCBsYW5kc2NhcGU6eGw6Z2FwLTQiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC00IiwgY2hpbGRyZW46IFtfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiBvbkltcG9ydENsaWNrLCBjbGFzc05hbWU6ICJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBnYXAtMSB0ZXh0LXppbmMtNTAwIGhvdmVyOnRleHQtd2hpdGUgdHJhbnNpdGlvbiBncm91cCIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJwLTMgcm91bmRlZC1mdWxsIGJnLXppbmMtOTAwIGdyb3VwLWhvdmVyOmJnLXppbmMtODAwIHRyYW5zaXRpb24iLCBjaGlsZHJlbjogX2pzeChVcGxvYWRJY29uLCB7fSkgfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtWzlweF0gdXBwZXJjYXNlIGZvbnQtYm9sZCB0cmFja2luZy13aWRlIiwgY2hpbGRyZW46ICJJbXBvcnQiIH0pXSB9KSwgX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogb25MaWJyYXJ5Q2xpY2ssIGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC0xIHRleHQtemluYy01MDAgaG92ZXI6dGV4dC13aGl0ZSB0cmFuc2l0aW9uIGdyb3VwIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogYHctMTIgaC0xMiBvdmVyZmxvdy1oaWRkZW4gYmctemluYy05MDAgZ3JvdXAtaG92ZXI6cmluZy0yIHJpbmctY3lhbi01MDAvNTAgdHJhbnNpdGlvbiBib3JkZXIgYm9yZGVyLXppbmMtODAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyICR7cmVjZW50UHJvamVjdFByZXZpZXcgPyAncm91bmRlZC1tZCcgOiAncm91bmRlZC1mdWxsIHAtMyd9YCwgY2hpbGRyZW46IHJlY2VudFByb2plY3RQcmV2aWV3ID8gKF9qc3goImltZyIsIHsgc3JjOiByZWNlbnRQcm9qZWN0UHJldmlldywgYWx0OiAiTGlicmFyeSIsIGNsYXNzTmFtZTogInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyIG9wYWNpdHktODAiIH0pKSA6IChfanN4KExpYnJhcnlJY29uLCB7fSkpIH0pLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LVs5cHhdIHVwcGVyY2FzZSBmb250LWJvbGQgdHJhY2tpbmctd2lkZSIsIGNoaWxkcmVuOiAiTGlicmFyeSIgfSldIH0pXSB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBvblBsYXlQYXVzZSwgZGlzYWJsZWQ6ICFoYXNUcmFja3MgJiYgIWlzUmVjb3JkaW5nLCBjbGFzc05hbWU6IGB3LTE2IGgtMTYgcm91bmRlZC1mdWxsICR7aXNSZWNvcmRpbmcgPyAnYmctcmVkLTUwMCBob3ZlcjpiZy1yZWQtNDAwIHNoYWRvdy1yZWQtNTAwLzIwJyA6ICdiZy1jeWFuLTUwMCBob3ZlcjpiZy1jeWFuLTQwMCBzaGFkb3ctY3lhbi01MDAvMjAnfSB0ZXh0LWJsYWNrIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHNoYWRvdy14bCBhY3RpdmU6c2NhbGUtOTUgdHJhbnNpdGlvbiBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmdyYXlzY2FsZWAsIGNoaWxkcmVuOiBpc1BsYXlpbmcgPyBfanN4KFBhdXNlSWNvbiwge30pIDogX2pzeChQbGF5SWNvbiwge30pIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCIsIGNoaWxkcmVuOiBbX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogb25Ub2dnbGVSZWNvcmQsIGNsYXNzTmFtZTogYGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC0xIHRyYW5zaXRpb24gZ3JvdXAgJHtpc1JlY29yZGluZyA/ICd0ZXh0LXJlZC01MDAgYW5pbWF0ZS1wdWxzZScgOiAndGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXdoaXRlJ31gLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAicC0zIHJvdW5kZWQtZnVsbCBiZy16aW5jLTkwMCBncm91cC1ob3ZlcjpiZy16aW5jLTgwMCB0cmFuc2l0aW9uIiwgY2hpbGRyZW46IGlzUmVjb3JkaW5nID8gX2pzeChTdG9wUmVjSWNvbiwge30pIDogX2pzeChNaWNJY29uLCB7fSkgfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtWzlweF0gdXBwZXJjYXNlIGZvbnQtYm9sZCB0cmFja2luZy13aWRlIiwgY2hpbGRyZW46IGlzUmVjb3JkaW5nID8gIlN0b3AiIDogIk1pYyIgfSldIH0pLCBfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiBvbkJlYXRDbGljaywgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTEgdGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXdoaXRlIHRyYW5zaXRpb24gZ3JvdXAiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAicC0zIHJvdW5kZWQtZnVsbCBiZy16aW5jLTkwMCBncm91cC1ob3ZlcjpiZy16aW5jLTgwMCB0cmFuc2l0aW9uIiwgY2hpbGRyZW46IF9qc3goRHJ1bUljb24sIHt9KSB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1bOXB4XSB1cHBlcmNhc2UgZm9udC1ib2xkIHRyYWNraW5nLXdpZGUiLCBjaGlsZHJlbjogIkJlYXQiIH0pXSB9KV0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJncmlkIGdyaWQtY29scy0zIGdhcC0yIG1heC13LW1kIG14LWF1dG8gdy1mdWxsIiwgY2hpbGRyZW46IFtfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiAic2Vjb25kYXJ5IiwgaWNvbjogX2pzeChTY2lzc29yc0ljb24sIHt9KSwgbGFiZWw6ICJDdXQiLCBkaXNhYmxlZDogIXNlbGVjdGVkVHJhY2tJZCwgb25DbGljazogb25DdXQsIGNsYXNzTmFtZTogImgtMTIgdGV4dC14cyBiZy16aW5jLTkwMCBib3JkZXItemluYy04MDAgaG92ZXI6YmctemluYy04MDAiIH0pLCBfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiBpc1RyaW1Nb2RlID8gInByaW1hcnkiIDogInNlY29uZGFyeSIsIGljb246IGlzVHJpbU1vZGUgPyBudWxsIDogX2pzeChJT1NDcm9wSWNvbiwge30pLCBsYWJlbDogc2VsZWN0aW9uID8gIkNyb3AgU2VsZWN0aW9uIiA6IChpc1RyaW1Nb2RlID8gIkRvbmUiIDogIkNyb3AgVG9vbCIpLCBkaXNhYmxlZDogIXNlbGVjdGVkVHJhY2tJZCwgb25DbGljazogb25Dcm9wLCBjbGFzc05hbWU6IGBoLTEyIHRleHQteHMgJHtpc1RyaW1Nb2RlID8gJ2JnLXllbGxvdy00MDAgaG92ZXI6YmcteWVsbG93LTMwMCB0ZXh0LWJsYWNrIGJvcmRlci1ub25lJyA6ICdiZy16aW5jLTkwMCBib3JkZXItemluYy04MDAgaG92ZXI6YmctemluYy04MDAnfWAgfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6IGludGVyYWN0aXZlTW9kZSA/ICJwcmltYXJ5IiA6ICJzZWNvbmRhcnkiLCBpY29uOiBpbnRlcmFjdGl2ZU1vZGUgPyBudWxsIDogX2pzeChGeEljb24sIHt9KSwgbGFiZWw6IGludGVyYWN0aXZlTW9kZSA/ICJEb25lIiA6ICJFZmZlY3RzIiwgZGlzYWJsZWQ6ICFzZWxlY3RlZFRyYWNrSWQsIG9uQ2xpY2s6IG9uRWZmZWN0cywgY2xhc3NOYW1lOiBgaC0xMiB0ZXh0LXhzICR7aW50ZXJhY3RpdmVNb2RlID8gJ2JnLXllbGxvdy00MDAgaG92ZXI6YmcteWVsbG93LTMwMCB0ZXh0LWJsYWNrIGJvcmRlci1ub25lJyA6ICdiZy16aW5jLTkwMCBib3JkZXItemluYy04MDAgaG92ZXI6YmctemluYy04MDAnfWAgfSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiaGlkZGVuIGxhbmRzY2FwZTpmbGV4IGxhbmRzY2FwZTp4bDpoaWRkZW4gZmxleC1jb2wgaC1mdWxsIHctZnVsbCBweS0yIHNhZmUtYXJlYS1wYiIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleC0xIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktZXZlbmx5IG1pbi1oLTAiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogb25JbXBvcnRDbGljaywgY2xhc3NOYW1lOiAidy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBiZy16aW5jLTkwMCB0ZXh0LXppbmMtNTAwIGhvdmVyOnRleHQtd2hpdGUgaG92ZXI6YmctemluYy04MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbiBzaGFkb3ctc20iLCBjaGlsZHJlbjogX2pzeChVcGxvYWRJY29uLCB7fSkgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogb25Ub2dnbGVSZWNvcmQsIGNsYXNzTmFtZTogYHctMTAgaC0xMCByb3VuZGVkLWZ1bGwgYmctemluYy05MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbiBzaGFkb3ctc20gJHtpc1JlY29yZGluZyA/ICd0ZXh0LXJlZC01MDAgYW5pbWF0ZS1wdWxzZScgOiAndGV4dC16aW5jLTUwMCBob3Zlcjp0ZXh0LXdoaXRlIGhvdmVyOmJnLXppbmMtODAwJ31gLCBjaGlsZHJlbjogaXNSZWNvcmRpbmcgPyBfanN4KFN0b3BSZWNJY29uLCB7fSkgOiBfanN4KE1pY0ljb24sIHt9KSB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBvbkJlYXRDbGljaywgY2xhc3NOYW1lOiAidy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBiZy16aW5jLTkwMCB0ZXh0LXppbmMtNTAwIGhvdmVyOnRleHQtd2hpdGUgaG92ZXI6YmctemluYy04MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbiBzaGFkb3ctc20iLCBjaGlsZHJlbjogX2pzeChEcnVtSWNvbiwge30pIH0pXSB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzaHJpbmstMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweS0yIiwgY2hpbGRyZW46IF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogb25QbGF5UGF1c2UsIGRpc2FibGVkOiAhaGFzVHJhY2tzICYmICFpc1JlY29yZGluZywgY2xhc3NOYW1lOiBgdy0xNCBoLTE0IHJvdW5kZWQtZnVsbCAke2lzUmVjb3JkaW5nID8gJ2JnLXJlZC01MDAgaG92ZXI6YmctcmVkLTQwMCBzaGFkb3ctcmVkLTUwMC8yMCcgOiAnYmctY3lhbi01MDAgaG92ZXI6YmctY3lhbi00MDAgc2hhZG93LWN5YW4tNTAwLzIwJ30gdGV4dC1ibGFjayBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBzaGFkb3cteGwgYWN0aXZlOnNjYWxlLTk1IHRyYW5zaXRpb24gZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpncmF5c2NhbGVgLCBjaGlsZHJlbjogaXNQbGF5aW5nID8gX2pzeChQYXVzZUljb24sIHt9KSA6IF9qc3goUGxheUljb24sIHt9KSB9KSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleC0xIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktZXZlbmx5IG1pbi1oLTAiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogb25DdXQsIGRpc2FibGVkOiAhc2VsZWN0ZWRUcmFja0lkLCBjbGFzc05hbWU6IGB3LTEwIGgtMTAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRyYW5zaXRpb24gc2hhZG93LXNtICR7c2VsZWN0ZWRUcmFja0lkID8gJ2JnLXppbmMtODAwIHRleHQtemluYy0xMDAgaG92ZXI6YmctemluYy03MDAnIDogJ2JnLXppbmMtOTAwIHRleHQtemluYy02MDAnfWAsIGNoaWxkcmVuOiBfanN4KFNjaXNzb3JzSWNvbiwge30pIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IG9uQ3JvcCwgZGlzYWJsZWQ6ICFzZWxlY3RlZFRyYWNrSWQsIGNsYXNzTmFtZTogYHctMTAgaC0xMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbiBzaGFkb3ctc20gJHtpc1RyaW1Nb2RlID8gJ2JnLXllbGxvdy00MDAgdGV4dC1ibGFjayBob3ZlcjpiZy15ZWxsb3ctMzAwJyA6IHNlbGVjdGVkVHJhY2tJZCA/ICdiZy16aW5jLTgwMCB0ZXh0LXppbmMtMTAwIGhvdmVyOmJnLXppbmMtNzAwJyA6ICdiZy16aW5jLTkwMCB0ZXh0LXppbmMtNjAwJ31gLCBjaGlsZHJlbjogX2pzeChJT1NDcm9wSWNvbiwge30pIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IG9uRWZmZWN0cywgZGlzYWJsZWQ6ICFzZWxlY3RlZFRyYWNrSWQsIGNsYXNzTmFtZTogYHctMTAgaC0xMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbiBzaGFkb3ctc20gJHtpbnRlcmFjdGl2ZU1vZGUgPyAnYmcteWVsbG93LTQwMCB0ZXh0LWJsYWNrIGhvdmVyOmJnLXllbGxvdy0zMDAnIDogc2VsZWN0ZWRUcmFja0lkID8gJ2JnLXppbmMtODAwIHRleHQtemluYy0xMDAgaG92ZXI6YmctemluYy03MDAnIDogJ2JnLXppbmMtOTAwIHRleHQtemluYy02MDAnfWAsIGNoaWxkcmVuOiBfanN4KEZ4SWNvbiwge30pIH0pXSB9KV0gfSldIH0pKTsKfTsK","@/components/Timeline":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gInJlYWN0L2pzeC1ydW50aW1lIjsKaW1wb3J0IFJlYWN0LCB7IGZvcndhcmRSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFdhdmVmb3JtRGlzcGxheSBmcm9tICdAL2NvbXBvbmVudHMvV2F2ZWZvcm1EaXNwbGF5JzsKaW1wb3J0IHsgVFJBQ0tfQ09MT1JTIH0gZnJvbSAnQC9jb25zdGFudHMnOwovLyBJY29ucwpjb25zdCBDaGV2cm9uTGVmdEljb24gPSAoKSA9PiAoX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTYgaC02IHRleHQtYmxhY2siLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiNCIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTUgMTlsLTctNyA3LTciIH0pIH0pKTsKY29uc3QgQ2hldnJvblJpZ2h0SWNvbiA9ICgpID0+IChfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNiBoLTYgdGV4dC1ibGFjayIsIGZpbGw6ICJub25lIiwgc3Ryb2tlOiAiY3VycmVudENvbG9yIiwgc3Ryb2tlV2lkdGg6ICI0Iiwgdmlld0JveDogIjAgMCAyNCAyNCIsIGNoaWxkcmVuOiBfanN4KCJwYXRoIiwgeyBzdHJva2VMaW5lY2FwOiAicm91bmQiLCBzdHJva2VMaW5lam9pbjogInJvdW5kIiwgZDogIk05IDVsNyA3LTcgNyIgfSkgfSkpOwpjb25zdCBUcmFzaEljb24gPSAoKSA9PiBfanN4KCJzdmciLCB7IGNsYXNzTmFtZTogInctNCBoLTQiLCBmaWxsOiAibm9uZSIsIHN0cm9rZTogImN1cnJlbnRDb2xvciIsIHN0cm9rZVdpZHRoOiAiMiIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgc3Ryb2tlTGluZWNhcDogInJvdW5kIiwgc3Ryb2tlTGluZWpvaW46ICJyb3VuZCIsIGQ6ICJNMTkgN2wtLjg2NyAxMi4xNDJBMiAyIDAgMDExNi4xMzggMjFINy44NjJhMiAyIDAgMDEtMS45OTUtMS44NThMNSA3bTUgNHY2bTQtNnY2bTEtMTBWNGExIDEgMCAwMC0xLTFoLTRhMSAxIDAgMDAtMSAxdjNNNCA3aDE2IiB9KSB9KTsKY29uc3QgUGFsZXR0ZUljb24gPSAoKSA9PiAoX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTMgaC0zIiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTkuNTMgMTYuMTIyYTMgMyAwIDAwLTUuNzggMS4xMjggMi4yNSAyLjI1IDAgMDEtMi40IDIuMjQ1IDQuNSA0LjUgMCAwMDguNC0yLjI0NWMwLS4zOTktLjA3Ny0uNzgtLjIyLTEuMTI4em0wIDBhMTUuOTk4IDE1Ljk5OCAwIDAwMy4zODgtMS42Mm0tNS4wNDMtLjAyNWExNS45OTQgMTUuOTk0IDAgMDExLjYyMi0zLjM5NW0zLjQyIDMuNDJhMTUuOTk1IDE1Ljk5NSAwIDAwNC43NjQtNC42NDhsMy44NzYtNS44MTRhMS4xNTEgMS4xNTEgMCAwMC0xLjU5Ny0xLjU5N0wxNC4xNDYgNi4zMmExNS45OTYgMTUuOTk2IDAgMDAtNC42NDkgNC43NjNtMy40MiAzLjQyYTYuNzc2IDYuNzc2IDAgMDAtMy40Mi0zLjQyIiB9KSB9KSk7CmNvbnN0IE11dGVkU3BlYWtlckljb24gPSAoKSA9PiAoX2pzeCgic3ZnIiwgeyBjbGFzc05hbWU6ICJ3LTMgaC0zIiwgZmlsbDogIm5vbmUiLCBzdHJva2U6ICJjdXJyZW50Q29sb3IiLCBzdHJva2VXaWR0aDogIjIiLCB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgY2hpbGRyZW46IF9qc3goInBhdGgiLCB7IHN0cm9rZUxpbmVjYXA6ICJyb3VuZCIsIHN0cm9rZUxpbmVqb2luOiAicm91bmQiLCBkOiAiTTE3LjI1IDkuNzVMMTkuNSAxMm0wIDBsMi4yNSAyLjI1TTE5LjUgMTJsMi4yNS0yLjI1TTE5LjUgMTJsLTIuMjUgMi4yNW0tMTAuNS02bDQuNzItNC43MmEuNzUuNzUgMCAwMTEuMjguNTN2MTUuODhhLjc1Ljc1IDAgMDEtMS4yOC41M2wtNC43Mi00LjcySDQuNTFjLS44OCAwLTEuNzA0LS41MDctMS45MzgtMS4zNTRBOS4wMSA5LjAxIDAgMDEyLjI1IDEyYzAtLjgzLjExMi0xLjYzMy4zMjItMi4zOTZDMi44MDYgOC43NTYgMy42MyA4LjI1IDQuNTEgOC4yNUg2Ljc1eiIgfSkgfSkpOwovLyBIZWxwZXIgdG8gY29udmVydCBIU0wgdG8gSGV4IGZvciBjb2xvciB3aGVlbApjb25zdCBoc2xUb0hleCA9IChoLCBzLCBsKSA9PiB7CiAgICBsIC89IDEwMDsKICAgIGNvbnN0IGEgPSBzICogTWF0aC5taW4obCwgMSAtIGwpIC8gMTAwOwogICAgY29uc3QgZiA9IChuKSA9PiB7CiAgICAgICAgY29uc3QgayA9IChuICsgaCAvIDMwKSAlIDEyOwogICAgICAgIGNvbnN0IGNvbG9yID0gbCAtIGEgKiBNYXRoLm1heChNYXRoLm1pbihrIC0gMywgOSAtIGssIDEpLCAtMSk7CiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoMjU1ICogY29sb3IpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpOwogICAgfTsKICAgIHJldHVybiBgIyR7ZigwKX0ke2YoOCl9JHtmKDQpfWA7Cn07CmV4cG9ydCBjb25zdCBUaW1lbGluZSA9IGZvcndhcmRSZWYoKHsgdHJhY2tzLCBjdXJyZW50VGltZSwgem9vbSwgbWF4RHVyYXRpb24sIHRvdGFsTGFuZXMsIGJlYXREdXJhdGlvbiwgc2VsZWN0aW9uLCBzZWxlY3RlZFRyYWNrSWQsIGRyYWdnaW5nVHJhY2tJZCwgdHJpbVN0YXRlLCBpbnRlcmFjdGl2ZU1vZGUsIGlzVHJpbU1vZGUsIGlzU2NydWJiaW5nLCBsYW5lSGVpZ2h0LCBwbGF5aGVhZFJlZiwgaXNab29taW5nLCB2aWV3cG9ydFdpZHRoLCBvblNjcm9sbCwgb25UaW1lbGluZVBvaW50ZXJEb3duLCBvblBsYXloZWFkUG9pbnRlckRvd24sIG9uUGxheWhlYWRQb2ludGVyTW92ZSwgb25QbGF5aGVhZFBvaW50ZXJVcCwgb25UcmFja1BvaW50ZXJEb3duLCBvblRyYWNrUG9pbnRlclVwLCBvblRyYWNrUG9pbnRlckNhbmNlbCwgb25UcmltUG9pbnRlckRvd24sIG9uVHJpbVBvaW50ZXJVcCwgb25GYWRlSGFuZGxlUG9pbnRlckRvd24sIG9uVHJhY2tEb3VibGVDbGljaywgb25NdXRlLCBvbkRlbGV0ZSwgb25TZWxlY3Rpb25DaGFuZ2UsIG9uQ29sb3JDaGFuZ2UgfSwgcmVmKSA9PiB7CiAgICBjb25zdCBbY29sb3JQaWNrZXJUcmFja0lkLCBzZXRDb2xvclBpY2tlclRyYWNrSWRdID0gdXNlU3RhdGUobnVsbCk7CiAgICBjb25zdCBbc2hvd0N1c3RvbUNvbG9yUGlja2VyLCBzZXRTaG93Q3VzdG9tQ29sb3JQaWNrZXJdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW2N1c3RvbUNvbG9ycywgc2V0Q3VzdG9tQ29sb3JzXSA9IHVzZVN0YXRlKCgpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBzYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzb25pY19jdXN0b21fY29sb3JzJyk7CiAgICAgICAgICAgIHJldHVybiBzYXZlZCA/IEpTT04ucGFyc2Uoc2F2ZWQpIDogW107CiAgICAgICAgfQogICAgICAgIGNhdGNoIHsKICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgIH0KICAgIH0pOwogICAgY29uc3QgY29sb3JXaGVlbFJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IFtpc0RyYWdnaW5nQ29sb3IsIHNldElzRHJhZ2dpbmdDb2xvcl0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICAvLyBDbG9zZSBjb2xvciBwaWNrZXIgd2hlbiBjbGlja2luZyBvdXRzaWRlCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGNvbnN0IGhhbmRsZUNsaWNrT3V0c2lkZSA9ICgpID0+IHsKICAgICAgICAgICAgaWYgKGNvbG9yUGlja2VyVHJhY2tJZCAmJiAhaXNEcmFnZ2luZ0NvbG9yKQogICAgICAgICAgICAgICAgc2V0Q29sb3JQaWNrZXJUcmFja0lkKG51bGwpOwogICAgICAgIH07CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTsKICAgICAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTsKICAgIH0sIFtjb2xvclBpY2tlclRyYWNrSWQsIGlzRHJhZ2dpbmdDb2xvcl0pOwogICAgLy8gUmVzZXQgcGlja2VyIHN0YXRlIHdoZW4gY2xvc2luZwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBpZiAoIWNvbG9yUGlja2VyVHJhY2tJZCkKICAgICAgICAgICAgc2V0U2hvd0N1c3RvbUNvbG9yUGlja2VyKGZhbHNlKTsKICAgIH0sIFtjb2xvclBpY2tlclRyYWNrSWRdKTsKICAgIC8vIFN0cmljdCBTY3JvbGwgUHJldmVudGlvbiBmb3IgaU9TL01vYmlsZQogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBjb25zdCBlbCA9IHJlZi5jdXJyZW50OwogICAgICAgIGlmICghZWwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCBwcmV2ZW50RGVmYXVsdFNjcm9sbCA9IChlKSA9PiB7CiAgICAgICAgICAgIC8vIDEuIE11bHRpdG91Y2g6IElmIG1vcmUgdGhhbiAxIGZpbmdlciwgQUxXQVlTIHByZXZlbnQgZGVmYXVsdCAoc2Nyb2xsaW5nKQogICAgICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyAyLiBEcmFnZ2luZy9FZGl0aW5nOiBJZiBzcGVjaWZpYyBtb2RlcyBhcmUgYWN0aXZlLCBwcmV2ZW50IHNjcm9sbC4KICAgICAgICAgICAgLy8gTm90ZTogZHJhZ2dpbmdUcmFja0lkIGlzIHNldCBBRlRFUiBsb25nIHByZXNzLCBzbyBpbml0aWFsIHN3aXBlIGlzIGFsbG93ZWQuCiAgICAgICAgICAgIGlmIChkcmFnZ2luZ1RyYWNrSWQgfHwgaXNab29taW5nIHx8IHRyaW1TdGF0ZT8uaXNEcmFnZ2luZyB8fCBpbnRlcmFjdGl2ZU1vZGU/LmlzRHJhZ2dpbmcgfHwgaXNTY3J1YmJpbmcpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgcHJldmVudERlZmF1bHRTY3JvbGwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7CiAgICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgcHJldmVudERlZmF1bHRTY3JvbGwpOwogICAgICAgIH07CiAgICB9LCBbZHJhZ2dpbmdUcmFja0lkLCBpc1pvb21pbmcsIHRyaW1TdGF0ZSwgaW50ZXJhY3RpdmVNb2RlLCBpc1NjcnViYmluZywgcmVmXSk7CiAgICAvLyBMb2dpYyB0byBjYWxjdWxhdGUgY29sb3IgZnJvbSB3aGVlbCBwb3NpdGlvbgogICAgY29uc3QgY2FsY3VsYXRlQ29sb3JGcm9tV2hlZWwgPSAoY2xpZW50WCwgY2xpZW50WSkgPT4gewogICAgICAgIGlmICghY29sb3JXaGVlbFJlZi5jdXJyZW50KQogICAgICAgICAgICByZXR1cm4gJyMwMDAwMDAnOwogICAgICAgIGNvbnN0IHJlY3QgPSBjb2xvcldoZWVsUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgY29uc3QgY2VudGVyWCA9IHJlY3Qud2lkdGggLyAyOwogICAgICAgIGNvbnN0IGNlbnRlclkgPSByZWN0LmhlaWdodCAvIDI7CiAgICAgICAgLy8gUmVsYXRpdmUgY29vcmRpbmF0ZXMgZnJvbSBjZW50ZXIKICAgICAgICBjb25zdCB4ID0gY2xpZW50WCAtIHJlY3QubGVmdCAtIGNlbnRlclg7CiAgICAgICAgY29uc3QgeSA9IGNsaWVudFkgLSByZWN0LnRvcCAtIGNlbnRlclk7CiAgICAgICAgLy8gQW5nbGUgKEh1ZSkKICAgICAgICAvLyBBZGp1c3Qgc3RhbmRhcmQgYXRhbjIgKDAgaXMgUmlnaHQpIHRvIENTUyBjb25pYyAoMCBpcyBUb3ApCiAgICAgICAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMih5LCB4KSAqICgxODAgLyBNYXRoLlBJKTsKICAgICAgICBhbmdsZSA9IChhbmdsZSArIDkwKTsKICAgICAgICBpZiAoYW5nbGUgPCAwKQogICAgICAgICAgICBhbmdsZSArPSAzNjA7CiAgICAgICAgLy8gRGlzdGFuY2UgKFNhdHVyYXRpb24vTGlnaHRuZXNzKQogICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLmh5cG90KHgsIHkpOwogICAgICAgIGNvbnN0IG1heFJhZGl1cyA9IHJlY3Qud2lkdGggLyAyOwogICAgICAgIGNvbnN0IG5vcm1hbGl6ZWREaXN0ID0gTWF0aC5taW4oMSwgZGlzdCAvIG1heFJhZGl1cyk7CiAgICAgICAgLy8gVmlzdWFsIG1hcHBpbmc6IENlbnRlciBpcyBXaGl0ZSwgRWRnZSBpcyBDb2xvcgogICAgICAgIGNvbnN0IHNhdCA9IG5vcm1hbGl6ZWREaXN0ICogMTAwOwogICAgICAgIGNvbnN0IGxpZ2h0ID0gMTAwIC0gKG5vcm1hbGl6ZWREaXN0ICogNTApOyAvLyAxMDAlIGF0IGNlbnRlciAod2hpdGUpLCA1MCUgYXQgZWRnZSAocHVyZSBjb2xvcikKICAgICAgICByZXR1cm4gaHNsVG9IZXgoYW5nbGUsIHNhdCwgbGlnaHQpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZVdoZWVsUG9pbnRlckRvd24gPSAoZSwgdHJhY2tJZCkgPT4gewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHNldElzRHJhZ2dpbmdDb2xvcih0cnVlKTsKICAgICAgICBlLnRhcmdldC5zZXRQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7CiAgICAgICAgY29uc3QgbmV3Q29sb3IgPSBjYWxjdWxhdGVDb2xvckZyb21XaGVlbChlLmNsaWVudFgsIGUuY2xpZW50WSk7CiAgICAgICAgb25Db2xvckNoYW5nZSh0cmFja0lkLCBuZXdDb2xvcik7CiAgICB9OwogICAgY29uc3QgaGFuZGxlV2hlZWxQb2ludGVyTW92ZSA9IChlLCB0cmFja0lkKSA9PiB7CiAgICAgICAgaWYgKCFpc0RyYWdnaW5nQ29sb3IpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBjb25zdCBuZXdDb2xvciA9IGNhbGN1bGF0ZUNvbG9yRnJvbVdoZWVsKGUuY2xpZW50WCwgZS5jbGllbnRZKTsKICAgICAgICBvbkNvbG9yQ2hhbmdlKHRyYWNrSWQsIG5ld0NvbG9yKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVXaGVlbFBvaW50ZXJVcCA9IChlLCB0cmFja0lkKSA9PiB7CiAgICAgICAgaWYgKCFpc0RyYWdnaW5nQ29sb3IpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBzZXRJc0RyYWdnaW5nQ29sb3IoZmFsc2UpOwogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGNvbnN0IG5ld0NvbG9yID0gY2FsY3VsYXRlQ29sb3JGcm9tV2hlZWwoZS5jbGllbnRYLCBlLmNsaWVudFkpOwogICAgICAgIG9uQ29sb3JDaGFuZ2UodHJhY2tJZCwgbmV3Q29sb3IpOwogICAgICAgIC8vIFNhdmUgdW5pcXVlIGNvbG9yIHRvIGhpc3RvcnkKICAgICAgICBzZXRDdXN0b21Db2xvcnMocHJldiA9PiB7CiAgICAgICAgICAgIGlmIChwcmV2LmluY2x1ZGVzKG5ld0NvbG9yKSkKICAgICAgICAgICAgICAgIHJldHVybiBwcmV2OwogICAgICAgICAgICBjb25zdCBuZXh0ID0gWy4uLnByZXYsIG5ld0NvbG9yXS5zbGljZSgtMTApOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc29uaWNfY3VzdG9tX2NvbG9ycycsIEpTT04uc3RyaW5naWZ5KG5leHQpKTsKICAgICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgZS50YXJnZXQuaGFzUG9pbnRlckNhcHR1cmUoZS5wb2ludGVySWQpKSB7CiAgICAgICAgICAgIGUudGFyZ2V0LnJlbGVhc2VQb2ludGVyQ2FwdHVyZShlLnBvaW50ZXJJZCk7CiAgICAgICAgfQogICAgICAgIC8vIENsb3NlIFBvcHVwIG9uIHJlbGVhc2UKICAgICAgICBzZXRDb2xvclBpY2tlclRyYWNrSWQobnVsbCk7CiAgICB9OwogICAgLy8gQ2FsY3VsYXRlIGNvbnRlbnQgaGVpZ2h0CiAgICBjb25zdCBjb250ZW50SGVpZ2h0ID0gdG90YWxMYW5lcyAqIGxhbmVIZWlnaHQ7CiAgICAvLyBDYWxjdWxhdGUgZHluYW1pYyB3aWR0aCB0byBsaW1pdCBzY3JvbGwgcGFzdCBlbmQgb2YgbGFzdCB0cmFjayAobGFzdCB0cmFjayBlbmQgYXQgY2VudGVyIG9mIHZpZXdwb3J0KQogICAgLy8gV2UgZXhwbGljaXRseSBjYWxjdWxhdGUgdGhlIGVuZCBwb3NpdGlvbiBvZiB0aGUgY29udGVudCAobWF4RHVyYXRpb24gKiB6b29tKS4KICAgIC8vIFRoZW4gd2UgYWRkIGV4YWN0bHkgaGFsZiB0aGUgdmlld3BvcnQgd2lkdGguCiAgICAvLyBUaGlzIGVuc3VyZXMgdGhhdCB3aGVuIHRoZSB1c2VyIHNjcm9sbHMgdG8gdGhlIHZlcnkgZW5kLCB0aGUgZW5kIG9mIHRoZSB0aW1lbGluZSBpcyBleGFjdGx5IGluIHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbi4KICAgIGNvbnN0IHZXaWR0aCA9IHZpZXdwb3J0V2lkdGggPiAwID8gdmlld3BvcnRXaWR0aCA6IHdpbmRvdy5pbm5lcldpZHRoOwogICAgY29uc3QgdGltZWxpbmVXaWR0aCA9IE1hdGgubWF4KHZXaWR0aCwgKG1heER1cmF0aW9uICogem9vbSkgKyAodldpZHRoIC8gMikpOwogICAgcmV0dXJuIChfanN4KCJkaXYiLCB7IHJlZjogcmVmLCBjbGFzc05hbWU6IGByZWxhdGl2ZSBvdmVyZmxvdy14LWF1dG8gb3ZlcmZsb3cteS1hdXRvIGgtZnVsbCBvdmVyc2Nyb2xsLW5vbmUgJHtpc1pvb21pbmcgPyAnb3ZlcmZsb3ctaGlkZGVuJyA6ICd0b3VjaC1wYW4teCB0b3VjaC1wYW4teSd9YCwgb25TY3JvbGw6IG9uU2Nyb2xsLCBzdHlsZTogewogICAgICAgICAgICAvLyBDUklUSUNBTCBGSVg6IFVzZSAncGFuLXggcGFuLXknIHRvIGJsb2NrIHBpbmNoLXpvb20gYnV0IGFsbG93IHNjcm9sbC4KICAgICAgICAgICAgLy8gJ25vbmUnIGlzIHVzZWQgd2hlbiBjdXN0b20gYWN0aW9ucyBhcmUgdGFraW5nIHBsYWNlIHRvIGJsb2NrIGV2ZXJ5dGhpbmcuCiAgICAgICAgICAgIHRvdWNoQWN0aW9uOiAoaXNab29taW5nIHx8IGRyYWdnaW5nVHJhY2tJZCB8fCB0cmltU3RhdGU/LmlzRHJhZ2dpbmcpID8gJ25vbmUnIDogJ3Bhbi14IHBhbi15JywKICAgICAgICB9LCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAicmVsYXRpdmUgbWluLWgtZnVsbCIsIHN0eWxlOiB7IHdpZHRoOiBgJHt0aW1lbGluZVdpZHRofXB4YCwgaGVpZ2h0OiBgJHtjb250ZW50SGVpZ2h0fXB4YCB9LCBvblBvaW50ZXJEb3duOiBvblRpbWVsaW5lUG9pbnRlckRvd24sIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBwb2ludGVyLWV2ZW50cy1ub25lIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgb3BhY2l0eS0xMCIsIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogYGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzNmM2Y0NiAxcHgsIHRyYW5zcGFyZW50IDFweClgLCBiYWNrZ3JvdW5kU2l6ZTogYCR7em9vbSAqIGJlYXREdXJhdGlvbn1weCAxMDAlYCB9IH0pLCBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0b3RhbExhbmVzIH0pLm1hcCgoXywgaSkgPT4gKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy1mdWxsIGJvcmRlci1iIGJvcmRlci16aW5jLTkwMC81MCIsIHN0eWxlOiB7IGhlaWdodDogYCR7bGFuZUhlaWdodH1weGAsIGJhY2tncm91bmRDb2xvcjogaSAlIDIgPT09IDAgPyAncmdiYSgyNCwgMjQsIDI3LCAwLjIpJyA6ICd0cmFuc3BhcmVudCcgfSwgY2hpbGRyZW46IF9qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LVs5cHhdIHRleHQtemluYy03MDAgcC0yIGZvbnQtbW9ubyIsIGNoaWxkcmVuOiBbIkwiLCBpICsgMV0gfSkgfSwgaSkpKV0gfSksIF9qc3hzKCJkaXYiLCB7IHJlZjogcGxheWhlYWRSZWYsIGNsYXNzTmFtZTogYGFic29sdXRlIHRvcC0wIGJvdHRvbS0wIHctNiAtbWwtMyB6LTUwIGZsZXgganVzdGlmeS1jZW50ZXIgZ3JvdXAgJHtpc1NjcnViYmluZyA/ICdjdXJzb3ItZ3JhYmJpbmcnIDogJ2N1cnNvci1ncmFiJ30gdG91Y2gtbm9uZWAsIHN0eWxlOiB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVgoJHtjdXJyZW50VGltZSAqIHpvb219cHgpYCwgaGVpZ2h0OiAnMTAwJScgfSwgb25Qb2ludGVyRG93bjogb25QbGF5aGVhZFBvaW50ZXJEb3duLCBvblBvaW50ZXJNb3ZlOiBvblBsYXloZWFkUG9pbnRlck1vdmUsIG9uUG9pbnRlclVwOiBvblBsYXloZWFkUG9pbnRlclVwLCBvblBvaW50ZXJDYW5jZWw6IG9uUGxheWhlYWRQb2ludGVyVXAsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSB0b3AtMCBib3R0b20tMCB3LTAuNSBiZy1yZWQtNTAwIHNoYWRvdy1bMF8wXzEwcHhfcmdiYSgyMzksNjgsNjgsMC41KV0iIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInN0aWNreSB0b3AtMCB3LTQgaC00IGJnLXJlZC01MDAgcm91bmRlZC1mdWxsIHNoYWRvdy1tZCB6LTUwIHRyYW5zaXRpb24tdHJhbnNmb3JtIGdyb3VwLWhvdmVyOnNjYWxlLTEyNSIgfSldIH0pLCB0cmFja3MubWFwKCh0cmFjaykgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSBzZWxlY3RlZFRyYWNrSWQgPT09IHRyYWNrLmlkOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRHJhZ2dpbmdUaGlzID0gZHJhZ2dpbmdUcmFja0lkID09PSB0cmFjay5pZDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RyaW1BY3RpdmUgPSBpc1NlbGVjdGVkICYmIGlzVHJpbU1vZGU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJbnRlcmFjdGl2ZSA9IGludGVyYWN0aXZlTW9kZT8udHJhY2tJZCA9PT0gdHJhY2suaWQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBdXRvbWF0aW9uQWN0aXZlID0gaXNJbnRlcmFjdGl2ZSAmJiBpbnRlcmFjdGl2ZU1vZGU/LnR5cGUgPT09ICdhdXRvbWF0aW9uJzsKICAgICAgICAgICAgICAgICAgICBsZXQgdmlzdWFsU3RhcnRUaW1lID0gdHJhY2suc3RhcnRUaW1lOwogICAgICAgICAgICAgICAgICAgIGxldCB2aXN1YWxEdXJhdGlvbiA9IHRyYWNrLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgIGxldCB2aXN1YWxUcmltU3RhcnQgPSB0cmFjay50cmltU3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVHJpbUFjdGl2ZSAmJiB0cmltU3RhdGU/LmlzRHJhZ2dpbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyaW1TdGF0ZS5zaWRlID09PSAnc3RhcnQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhbmdlID0gdHJpbVN0YXRlLmN1cnJlbnREZWx0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aXN1YWxUcmltU3RhcnQgKyBjaGFuZ2UgPCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZSA9IC12aXN1YWxUcmltU3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlzdWFsRHVyYXRpb24gLSBjaGFuZ2UgPCAwLjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlID0gdmlzdWFsRHVyYXRpb24gLSAwLjE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXN1YWxTdGFydFRpbWUgKz0gY2hhbmdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzdWFsRHVyYXRpb24gLT0gY2hhbmdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzdWFsVHJpbVN0YXJ0ICs9IGNoYW5nZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFuZ2UgPSB0cmltU3RhdGUuY3VycmVudERlbHRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpc3VhbER1cmF0aW9uICsgY2hhbmdlIDwgMC4xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZSA9IDAuMSAtIHZpc3VhbER1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBjYXAgdG8gYnVmZmVyIGR1cmF0aW9uIGlmIE5PVCBsb29waW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRyYWNrLmlzTG9vcGluZyAmJiB2aXN1YWxUcmltU3RhcnQgKyB2aXN1YWxEdXJhdGlvbiArIGNoYW5nZSA+IHRyYWNrLmJ1ZmZlci5kdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZSA9IHRyYWNrLmJ1ZmZlci5kdXJhdGlvbiAtICh2aXN1YWxUcmltU3RhcnQgKyB2aXN1YWxEdXJhdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXN1YWxEdXJhdGlvbiArPSBjaGFuZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyTGVmdCA9IE1hdGgucm91bmQodmlzdWFsU3RhcnRUaW1lICogem9vbSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyV2lkdGggPSBNYXRoLmNlaWwodmlzdWFsRHVyYXRpb24gKiB6b29tKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVXaWR0aCA9IDMyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZUR1cmF0aW9uID0gaGFuZGxlV2lkdGggLyB6b29tOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTGVmdERyYWdnaW5nID0gaXNUcmltQWN0aXZlICYmIHRyaW1TdGF0ZT8uaXNEcmFnZ2luZyAmJiB0cmltU3RhdGU/LnNpZGUgPT09ICdzdGFydCc7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSaWdodERyYWdnaW5nID0gaXNUcmltQWN0aXZlICYmIHRyaW1TdGF0ZT8uaXNEcmFnZ2luZyAmJiB0cmltU3RhdGU/LnNpZGUgPT09ICdlbmQnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZhZGVJbkR1cmF0aW9uID0gdHJhY2suYWN0aXZlRWZmZWN0cz8uZmFkZUluIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFkZU91dER1cmF0aW9uID0gdHJhY2suYWN0aXZlRWZmZWN0cz8uZmFkZU91dCB8fCAwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhdmVmb3JtSGVpZ2h0ID0gbGFuZUhlaWdodCAtIDIwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXlIZWlnaHQgPSB3YXZlZm9ybUhlaWdodCAtIDIwOwogICAgICAgICAgICAgICAgICAgIC8vIERldGVybWluZSB0b3VjaC1hY3Rpb24KICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHRvIHBhbi14IHBhbi15IChzY3JvbGxpbmcgYWxsb3dlZCkKICAgICAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIE9OTFkgaWYgY3VycmVudGx5IGRyYWdnaW5nLCByZXNpemluZywgb3IgaW50ZXJhY3Rpbmcgd2l0aCBoYW5kbGVzCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2tUb3VjaEFjdGlvbiA9IChpc0RyYWdnaW5nVGhpcyB8fCAoaXNUcmltQWN0aXZlICYmIHRyaW1TdGF0ZT8uaXNEcmFnZ2luZykgfHwgaW50ZXJhY3RpdmVNb2RlPy5pc0RyYWdnaW5nKQogICAgICAgICAgICAgICAgICAgICAgICA/ICdub25lJwogICAgICAgICAgICAgICAgICAgICAgICA6ICdwYW4teCBwYW4teSc7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6IGBhYnNvbHV0ZSByb3VuZGVkLWxnIGJvcmRlciBzZWxlY3Qtbm9uZSB0cmFjay1jbGlwIGdyb3VwICR7aXNEcmFnZ2luZ1RoaXMgPyAnei01MCBzaGFkb3ctMnhsIHJpbmctMiByaW5nLWN5YW4tNDAwIGN1cnNvci1ncmFiYmluZyBiZy16aW5jLTgwMCcgOiAnJ30gJHtpc1NlbGVjdGVkICYmICFpc0RyYWdnaW5nVGhpcyA/ICdiZy16aW5jLTgwMC85MCBib3JkZXItY3lhbi01MDAvNTAgcmluZy0xIHJpbmctY3lhbi01MDAvMjAgei00MCcgOiAnJ30gJHshaXNTZWxlY3RlZCAmJiAhaXNEcmFnZ2luZ1RoaXMgPyAnYmctemluYy05MDAvNjAgYm9yZGVyLXppbmMtODAwIGhvdmVyOmJnLXppbmMtODAwLzgwIHotMzAnIDogJyd9YCwgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IGAke2NvbnRhaW5lckxlZnR9cHhgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBgJHt0cmFjay5sYW5lICogbGFuZUhlaWdodCArIDEwfXB4YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgJHtjb250YWluZXJXaWR0aH1weGAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGAke3dhdmVmb3JtSGVpZ2h0fXB4YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGlzRHJhZ2dpbmdUaGlzIHx8IChpc1RyaW1BY3RpdmUgJiYgdHJpbVN0YXRlPy5pc0RyYWdnaW5nKSA/ICdub25lJyA6ICd0b3AgMC4ycyBlYXNlLW91dCwgdHJhbnNmb3JtIDAuMXMgZWFzZS1vdXQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hBY3Rpb246IHRyYWNrVG91Y2hBY3Rpb24KICAgICAgICAgICAgICAgICAgICAgICAgfSwgb25Qb2ludGVyRG93bjogKGUpID0+IG9uVHJhY2tQb2ludGVyRG93bihlLCB0cmFjayksIG9uUG9pbnRlclVwOiAoZSkgPT4gb25UcmFja1BvaW50ZXJVcChlLCB0cmFjayksIG9uUG9pbnRlckNhbmNlbDogb25UcmFja1BvaW50ZXJDYW5jZWwsIG9uRG91YmxlQ2xpY2s6IChlKSA9PiBvblRyYWNrRG91YmxlQ2xpY2soZSwgdHJhY2spLCBvbkNvbnRleHRNZW51OiAoZSkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IH0sIGNoaWxkcmVuOiBbIWlzVHJpbUFjdGl2ZSAmJiAhaXNEcmFnZ2luZ1RoaXMgJiYgIWlzQXV0b21hdGlvbkFjdGl2ZSAmJiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiBgYWJzb2x1dGUgcmlnaHQtMSB0b3AtMSB6LTIwIGZsZXggZ2FwLTEgdHJhbnNpdGlvbi1vcGFjaXR5ICR7Y29sb3JQaWNrZXJUcmFja0lkID09PSB0cmFjay5pZCA/ICdvcGFjaXR5LTEwMCcgOiAnb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwJ31gLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25Qb2ludGVyRG93bjogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksIG9uQ2xpY2s6IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDb2xvclBpY2tlclRyYWNrSWQoY29sb3JQaWNrZXJUcmFja0lkID09PSB0cmFjay5pZCA/IG51bGwgOiB0cmFjay5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBjbGFzc05hbWU6ICJwLTEgcm91bmRlZCB0ZXh0LVs5cHhdIGJnLXppbmMtODAwIGhvdmVyOmJnLXppbmMtNzAwIHRleHQtemluYy0zMDAiLCBjaGlsZHJlbjogX2pzeChQYWxldHRlSWNvbiwge30pIH0pLCBfanN4KCJidXR0b24iLCB7IG9uUG9pbnRlckRvd246IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLCBvbkNsaWNrOiAoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBvbk11dGUodHJhY2suaWQsICF0cmFjay5pc011dGVkKTsgfSwgY2xhc3NOYW1lOiBgcC0xIHJvdW5kZWQgdGV4dC1bOXB4XSBmb250LWJvbGQgJHt0cmFjay5pc011dGVkID8gJ2JnLXJlZC01MDAgdGV4dC13aGl0ZScgOiAnYmctemluYy03MDAgdGV4dC16aW5jLTMwMCd9YCwgY2hpbGRyZW46IF9qc3goTXV0ZWRTcGVha2VySWNvbiwge30pIH0pLCBfanN4KCJidXR0b24iLCB7IG9uUG9pbnRlckRvd246IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLCBvbkNsaWNrOiAoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBvbkRlbGV0ZSh0cmFjay5pZCk7IH0sIGNsYXNzTmFtZTogInAtMSByb3VuZGVkIHRleHQtWzlweF0gYmctemluYy04MDAgaG92ZXI6YmctcmVkLTkwMC84MCB0ZXh0LXppbmMtNDAwIGhvdmVyOnRleHQtd2hpdGUiLCBjaGlsZHJlbjogX2pzeChUcmFzaEljb24sIHt9KSB9KSwgY29sb3JQaWNrZXJUcmFja0lkID09PSB0cmFjay5pZCAmJiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgdG9wLTggcmlnaHQtMCB6LTUwIGJnLXppbmMtOTAwIGJvcmRlciBib3JkZXItemluYy03MDAgcC0yIHJvdW5kZWQtbGcgc2hhZG93LXhsIGZsZXggZmxleC1jb2wgZ2FwLTIgdy00OCIsIG9uUG9pbnRlckRvd246IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLCBvbkNsaWNrOiAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImdyaWQgZ3JpZC1jb2xzLTUgZ2FwLTEiLCBjaGlsZHJlbjogVFJBQ0tfQ09MT1JTLm1hcChjID0+IChfanN4KCJidXR0b24iLCB7IGNsYXNzTmFtZTogInctNiBoLTYgcm91bmRlZC1mdWxsIHJpbmctMSByaW5nLXdoaXRlLzEwIGhvdmVyOnNjYWxlLTExMCB0cmFuc2l0aW9uIiwgc3R5bGU6IHsgYmFja2dyb3VuZENvbG9yOiBjIH0sIG9uQ2xpY2s6IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbG9yQ2hhbmdlKHRyYWNrLmlkLCBjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDb2xvclBpY2tlclRyYWNrSWQobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sIGMpKSkgfSksIGN1c3RvbUNvbG9ycy5sZW5ndGggPiAwICYmIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImdyaWQgZ3JpZC1jb2xzLTUgZ2FwLTEgcHQtMiBib3JkZXItdCBib3JkZXItemluYy04MDAiLCBjaGlsZHJlbjogY3VzdG9tQ29sb3JzLm1hcCgoYywgaSkgPT4gKF9qc3goImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAidy02IGgtNiByb3VuZGVkLWZ1bGwgcmluZy0xIHJpbmctd2hpdGUvMTAgaG92ZXI6c2NhbGUtMTEwIHRyYW5zaXRpb24iLCBzdHlsZTogeyBiYWNrZ3JvdW5kQ29sb3I6IGMgfSwgb25DbGljazogKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29sb3JDaGFuZ2UodHJhY2suaWQsIGMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldENvbG9yUGlja2VyVHJhY2tJZChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwgYCR7Y30tJHtpfWApKSkgfSkpLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInB0LTIgYm9yZGVyLXQgYm9yZGVyLXppbmMtODAwIiwgY2hpbGRyZW46ICFzaG93Q3VzdG9tQ29sb3JQaWNrZXIgPyAoX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dDdXN0b21Db2xvclBpY2tlcih0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMiBweS0xLjUgaG92ZXI6YmctemluYy04MDAgcm91bmRlZCBncm91cCB0cmFuc2l0aW9uIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInctNCBoLTQgcm91bmRlZC1mdWxsIHNoYWRvdy1zbSByaW5nLTEgcmluZy13aGl0ZS8yMCBzaHJpbmstMCIsIHN0eWxlOiB7IGJhY2tncm91bmQ6ICdjb25pYy1ncmFkaWVudChmcm9tIDBkZWcsIHJlZCwgeWVsbG93LCBsaW1lLCBhcXVhLCBibHVlLCBtYWdlbnRhLCByZWQpJyB9IH0pLCBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LVsxMHB4XSB0ZXh0LXppbmMtMzAwIGZvbnQtYm9sZCBncm91cC1ob3Zlcjp0ZXh0LXdoaXRlIiwgY2hpbGRyZW46ICJDdXN0b20gQ29sb3IiIH0pXSB9KSkgOiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBnYXAtMiBhbmltYXRlLWluIGZhZGUtaW4gc2xpZGUtaW4tZnJvbS10b3AtMSBkdXJhdGlvbi0yMDAgaXRlbXMtY2VudGVyIHAtMiIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHctZnVsbCBtYi0yIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBzaGFkb3ctc20gcmluZy0xIHJpbmctd2hpdGUvMjAgc2hyaW5rLTAiLCBzdHlsZTogeyBiYWNrZ3JvdW5kOiAnY29uaWMtZ3JhZGllbnQoZnJvbSAwZGVnLCByZWQsIHllbGxvdywgbGltZSwgYXF1YSwgYmx1ZSwgbWFnZW50YSwgcmVkKScgfSB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1bMTBweF0gdGV4dC13aGl0ZSBmb250LWJvbGQiLCBjaGlsZHJlbjogIlBpY2sgQ29sb3IiIH0pXSB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRTaG93Q3VzdG9tQ29sb3JQaWNrZXIoZmFsc2UpLCBjbGFzc05hbWU6ICJ0ZXh0LXppbmMtNTAwIGhvdmVyOnRleHQtd2hpdGUgdGV4dC1bMTBweF0iLCBjaGlsZHJlbjogIlx1MjcxNSIgfSldIH0pLCBfanN4cygiZGl2IiwgeyByZWY6IGNvbG9yV2hlZWxSZWYsIGNsYXNzTmFtZTogInJlbGF0aXZlIHctMzIgaC0zMiByb3VuZGVkLWZ1bGwgc2hhZG93LXhsIHJpbmctMiByaW5nLXdoaXRlLzEwIG92ZXJmbG93LWhpZGRlbiBjdXJzb3ItY3Jvc3NoYWlyIHRvdWNoLW5vbmUgc2VsZWN0LW5vbmUgYWN0aXZlOnNjYWxlLTk1IHRyYW5zaXRpb24tdHJhbnNmb3JtIiwgb25Qb2ludGVyRG93bjogKGUpID0+IGhhbmRsZVdoZWVsUG9pbnRlckRvd24oZSwgdHJhY2suaWQpLCBvblBvaW50ZXJNb3ZlOiAoZSkgPT4gaGFuZGxlV2hlZWxQb2ludGVyTW92ZShlLCB0cmFjay5pZCksIG9uUG9pbnRlclVwOiAoZSkgPT4gaGFuZGxlV2hlZWxQb2ludGVyVXAoZSwgdHJhY2suaWQpLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCIsIHN0eWxlOiB7IGJhY2tncm91bmQ6ICdjb25pYy1ncmFkaWVudChmcm9tIDBkZWcsIHJlZCwgeWVsbG93LCBsaW1lLCBhcXVhLCBibHVlLCBtYWdlbnRhLCByZWQpJyB9IH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAiLCBzdHlsZTogeyBiYWNrZ3JvdW5kOiAncmFkaWFsLWdyYWRpZW50KGNsb3Nlc3Qtc2lkZSwgd2hpdGUsIHRyYW5zcGFyZW50KScgfSB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1bOXB4XSB0ZXh0LXppbmMtNTAwIG10LTIgZm9udC1tZWRpdW0iLCBjaGlsZHJlbjogIlRhcCBvciBkcmFnIHRvIHByZXZpZXciIH0pXSB9KSkgfSldIH0pKV0gfSkpLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBsZWZ0LTIgdG9wLTEgei0xMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBwb2ludGVyLWV2ZW50cy1ub25lIG1heC13LWZ1bGwgb3ZlcmZsb3ctaGlkZGVuIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LVsxMHB4XSBmb250LWJvbGQgdGV4dC16aW5jLTMwMCBzaGFkb3ctYmxhY2sgZHJvcC1zaGFkb3ctbWQgdHJ1bmNhdGUiLCBjaGlsZHJlbjogdHJhY2submFtZSB9KSwgdHJhY2suY3Jvc3NmYWRlTWV0YWRhdGEgJiYgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1bOXB4XSBweC0xIGJnLWN5YW4tOTAwLzUwIHJvdW5kZWQgdGV4dC1jeWFuLTMwMCIsIGNoaWxkcmVuOiAiTGlua2VkIiB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYGFic29sdXRlIGluc2V0LXgtMCBib3R0b20tMCB0b3AtMCBwdC01ICR7aXNUcmltQWN0aXZlID8gJ292ZXJmbG93LWhpZGRlbiByaW5nLTIgcmluZy15ZWxsb3ctNDAwLzUwIGJnLXllbGxvdy05MDAvMTAnIDogJyd9ICR7aXNBdXRvbWF0aW9uQWN0aXZlID8gJ3JpbmctMiByaW5nLXllbGxvdy00MDAvMzAnIDogJyd9YCwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImgtZnVsbCBhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgdy1mdWxsIHB0LTUiLCBjaGlsZHJlbjogX2pzeChXYXZlZm9ybURpc3BsYXksIHsgYnVmZmVyOiB0cmFjay5idWZmZXIsIHN0YXJ0VGltZTogdmlzdWFsU3RhcnRUaW1lLCB0cmltU3RhcnQ6IHZpc3VhbFRyaW1TdGFydCwgZHVyYXRpb246IHZpc3VhbER1cmF0aW9uLCBjdXJyZW50VGltZTogY3VycmVudFRpbWUsIHNlbGVjdGlvbjogaXNTZWxlY3RlZCA/IHNlbGVjdGlvbiA6IG51bGwsIG9uU2VsZWN0aW9uQ2hhbmdlOiBvblNlbGVjdGlvbkNoYW5nZSwgY29sb3I6IHRyYWNrLmNvbG9yLCB6b29tOiB6b29tLCBmYWRlSW5EdXJhdGlvbjogZmFkZUluRHVyYXRpb24sIGZhZGVPdXREdXJhdGlvbjogZmFkZU91dER1cmF0aW9uLCBoZWlnaHQ6IHdhdmVmb3JtSGVpZ2h0IC0gMjAsIGF1dG9tYXRpb25Qb2ludHM6IHRyYWNrLnZvbHVtZUF1dG9tYXRpb24sIHNob3dBdXRvbWF0aW9uSGFuZGxlczogaXNBdXRvbWF0aW9uQWN0aXZlLCBpc0xvb3Bpbmc6IHRyYWNrLmlzTG9vcGluZyB9KSB9KSwgaXNUcmltQWN0aXZlICYmIChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogYGFic29sdXRlIHRvcC0wIGJvdHRvbS0wIGxlZnQtMCB3LTggYmFja2Ryb3AtYmx1ci1zbSByb3VuZGVkLWwtbWQgY3Vyc29yLWV3LXJlc2l6ZSB6LTUwIHNoYWRvdy1sZyB0b3VjaC1ub25lIG92ZXJmbG93LWhpZGRlbiBiZy15ZWxsb3ctNDAwIHJpbmctMSByaW5nLWJsYWNrLzEwIGdyb3VwIHB0LTVgLCBvblBvaW50ZXJEb3duOiAoZSkgPT4gb25UcmltUG9pbnRlckRvd24oZSwgdHJhY2ssICdzdGFydCcpLCBvblBvaW50ZXJVcDogKGUpID0+IG9uVHJpbVBvaW50ZXJVcChlLCB0cmFjayksIGNoaWxkcmVuOiBpc0xlZnREcmFnZ2luZyA/IChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgcG9pbnRlci1ldmVudHMtbm9uZSBvcGFjaXR5LTkwIHB0LTUiLCBjaGlsZHJlbjogX2pzeChXYXZlZm9ybURpc3BsYXksIHsgYnVmZmVyOiB0cmFjay5idWZmZXIsIHN0YXJ0VGltZTogMCwgdHJpbVN0YXJ0OiB2aXN1YWxUcmltU3RhcnQsIGR1cmF0aW9uOiBoYW5kbGVEdXJhdGlvbiwgY3VycmVudFRpbWU6IC0xLCBzZWxlY3Rpb246IG51bGwsIG9uU2VsZWN0aW9uQ2hhbmdlOiAoKSA9PiB7IH0sIGNvbG9yOiAiIiwgY29sb3JPdmVycmlkZTogIiMwMDAwMDAiLCBiYWNrZ3JvdW5kQ29sb3I6ICIjZmFjYzE1Iiwgem9vbTogem9vbSwgZmFkZUluRHVyYXRpb246IGZhZGVJbkR1cmF0aW9uLCBmYWRlT3V0RHVyYXRpb246IGZhZGVPdXREdXJhdGlvbiwgaGVpZ2h0OiB3YXZlZm9ybUhlaWdodCAtIDIwLCBpc0xvb3Bpbmc6IHRyYWNrLmlzTG9vcGluZyB9KSB9KSkgOiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSB0b3AtMS8yIGxlZnQtMS8yIC10cmFuc2xhdGUteC0xLzIgLXRyYW5zbGF0ZS15LTEvMiB6LTEwIHRleHQtYmxhY2siLCBjaGlsZHJlbjogX2pzeChDaGV2cm9uTGVmdEljb24sIHt9KSB9KSkgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiBgYWJzb2x1dGUgdG9wLTAgYm90dG9tLTAgcmlnaHQtMCB3LTggYmFja2Ryb3AtYmx1ci1zbSByb3VuZGVkLXItbWQgY3Vyc29yLWV3LXJlc2l6ZSB6LTUwIHNoYWRvdy1sZyB0b3VjaC1ub25lIG92ZXJmbG93LWhpZGRlbiBiZy15ZWxsb3ctNDAwIHJpbmctMSByaW5nLWJsYWNrLzEwIGdyb3VwIHB0LTVgLCBvblBvaW50ZXJEb3duOiAoZSkgPT4gb25UcmltUG9pbnRlckRvd24oZSwgdHJhY2ssICdlbmQnKSwgb25Qb2ludGVyVXA6IChlKSA9PiBvblRyaW1Qb2ludGVyVXAoZSwgdHJhY2spLCBjaGlsZHJlbjogaXNSaWdodERyYWdnaW5nID8gKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBwb2ludGVyLWV2ZW50cy1ub25lIG9wYWNpdHktOTAgcHQtNSIsIGNoaWxkcmVuOiBfanN4KFdhdmVmb3JtRGlzcGxheSwgeyBidWZmZXI6IHRyYWNrLmJ1ZmZlciwgc3RhcnRUaW1lOiAwLCB0cmltU3RhcnQ6IHZpc3VhbFRyaW1TdGFydCArIHZpc3VhbER1cmF0aW9uIC0gaGFuZGxlRHVyYXRpb24sIGR1cmF0aW9uOiBoYW5kbGVEdXJhdGlvbiwgY3VycmVudFRpbWU6IC0xLCBzZWxlY3Rpb246IG51bGwsIG9uU2VsZWN0aW9uQ2hhbmdlOiAoKSA9PiB7IH0sIGNvbG9yOiAiIiwgY29sb3JPdmVycmlkZTogIiMwMDAwMDAiLCBiYWNrZ3JvdW5kQ29sb3I6ICIjZmFjYzE1Iiwgem9vbTogem9vbSwgZmFkZUluRHVyYXRpb246IGZhZGVJbkR1cmF0aW9uLCBmYWRlT3V0RHVyYXRpb246IGZhZGVPdXREdXJhdGlvbiwgaGVpZ2h0OiB3YXZlZm9ybUhlaWdodCAtIDIwLCBpc0xvb3Bpbmc6IHRyYWNrLmlzTG9vcGluZyB9KSB9KSkgOiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSB0b3AtMS8yIGxlZnQtMS8yIC10cmFuc2xhdGUteC0xLzIgLXRyYW5zbGF0ZS15LTEvMiB6LTEwIHRleHQtYmxhY2siLCBjaGlsZHJlbjogX2pzeChDaGV2cm9uUmlnaHRJY29uLCB7fSkgfSkpIH0pXSB9KSldIH0pLCBpc0ludGVyYWN0aXZlICYmIChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtpbnRlcmFjdGl2ZU1vZGU/LnR5cGUgPT09ICdmYWRlSW4nICYmIChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4cygic3ZnIiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC14LTAgYm90dG9tLTAgdG9wLTUgcG9pbnRlci1ldmVudHMtbm9uZSB6LTUwIG92ZXJmbG93LXZpc2libGUiLCBzdHlsZTogeyBoZWlnaHQ6ICcxMDAlJyB9LCBjaGlsZHJlbjogW19qc3goInBvbHlnb24iLCB7IHBvaW50czogYDAsMCAke2ZhZGVJbkR1cmF0aW9uICogem9vbX0sMCAwLCR7b3ZlcmxheUhlaWdodH1gLCBmaWxsOiAicmdiYSgyNTAsIDIwNCwgMjEsIDAuMikiIH0pLCBfanN4KCJsaW5lIiwgeyB4MTogIjAiLCB5MTogb3ZlcmxheUhlaWdodCwgeDI6IGZhZGVJbkR1cmF0aW9uICogem9vbSwgeTI6ICIwIiwgc3Ryb2tlOiAiI2ZhY2MxNSIsIHN0cm9rZVdpZHRoOiAiMiIgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZhZGUtaGFuZGxlIGFic29sdXRlIHRvcC0wIGgtNSB3LTYgei1bNjBdIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmcgdG91Y2gtbm9uZSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCIsIHN0eWxlOiB7IGxlZnQ6IGAke2ZhZGVJbkR1cmF0aW9uICogem9vbSAtIDEyfXB4YCB9LCBvblBvaW50ZXJEb3duOiBvbkZhZGVIYW5kbGVQb2ludGVyRG93biwgY2hpbGRyZW46IF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy0wIGgtMCBib3JkZXItbC1bOHB4XSBib3JkZXItbC10cmFuc3BhcmVudCBib3JkZXItci1bOHB4XSBib3JkZXItci10cmFuc3BhcmVudCBib3JkZXItdC1bMTRweF0gYm9yZGVyLXQteWVsbG93LTQwMCBkcm9wLXNoYWRvdy1tZCBob3ZlcjpzY2FsZS0xMTAgdHJhbnNpdGlvbi10cmFuc2Zvcm0gbWItMC41IiB9KSB9KV0gfSkpLCBpbnRlcmFjdGl2ZU1vZGU/LnR5cGUgPT09ICdmYWRlT3V0JyAmJiAoX2pzeHMoX0ZyYWdtZW50LCB7IGNoaWxkcmVuOiBbX2pzeHMoInN2ZyIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQteC0wIGJvdHRvbS0wIHRvcC01IHBvaW50ZXItZXZlbnRzLW5vbmUgei01MCBvdmVyZmxvdy12aXNpYmxlIiwgc3R5bGU6IHsgaGVpZ2h0OiAnMTAwJScgfSwgY2hpbGRyZW46IFtfanN4KCJwb2x5Z29uIiwgeyBwb2ludHM6IGAkeyh2aXN1YWxEdXJhdGlvbiAtIGZhZGVPdXREdXJhdGlvbikgKiB6b29tfSwwICR7dmlzdWFsRHVyYXRpb24gKiB6b29tfSwwICR7dmlzdWFsRHVyYXRpb24gKiB6b29tfSwke292ZXJsYXlIZWlnaHR9YCwgZmlsbDogInJnYmEoMjUwLCAyMDQsIDIxLCAwLjIpIiB9KSwgX2pzeCgibGluZSIsIHsgeDE6ICh2aXN1YWxEdXJhdGlvbiAtIGZhZGVPdXREdXJhdGlvbikgKiB6b29tLCB5MTogIjAiLCB4MjogdmlzdWFsRHVyYXRpb24gKiB6b29tLCB5Mjogb3ZlcmxheUhlaWdodCwgc3Ryb2tlOiAiI2ZhY2MxNSIsIHN0cm9rZVdpZHRoOiAiMiIgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZhZGUtaGFuZGxlIGFic29sdXRlIHRvcC0wIGgtNSB3LTYgei1bNjBdIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmcgdG91Y2gtbm9uZSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCIsIHN0eWxlOiB7IGxlZnQ6IGAkeyh2aXN1YWxEdXJhdGlvbiAtIGZhZGVPdXREdXJhdGlvbikgKiB6b29tIC0gMTJ9cHhgIH0sIG9uUG9pbnRlckRvd246IG9uRmFkZUhhbmRsZVBvaW50ZXJEb3duLCBjaGlsZHJlbjogX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ3LTAgaC0wIGJvcmRlci1sLVs4cHhdIGJvcmRlci1sLXRyYW5zcGFyZW50IGJvcmRlci1yLVs4cHhdIGJvcmRlci1yLXRyYW5zcGFyZW50IGJvcmRlci10LVsxNHB4XSBib3JkZXItdC15ZWxsb3ctNDAwIGRyb3Atc2hhZG93LW1kIGhvdmVyOnNjYWxlLTExMCB0cmFuc2l0aW9uLXRyYW5zZm9ybSBtYi0wLjUiIH0pIH0pXSB9KSldIH0pKV0gfSwgdHJhY2suaWQpKTsKICAgICAgICAgICAgICAgIH0pXSB9KSB9KSk7Cn0pOwo="}}</script>
        <script>
          window.APPLET_FILES = ["index.tsx","metadata.json","index.html","types.ts","constants.ts","services/audioUtils.ts","services/geminiService.ts","components/Button.tsx","components/WaveformDisplay.tsx","components/AIGeneratorModal.tsx","App.tsx","components/EffectsModal.tsx","components/ExportModal.tsx","components/BeatMakerModal.tsx","services/storageService.ts","manifest.json","sw.js","components/Header.tsx","components/TransportControls.tsx","components/Timeline.tsx"];
          </script>
        <script type="module">
        (() => {
  if (window.self === window.top) {
    // Do not run the shim in the main window, only in iframes.
    return;
  }

  window.API_KEY = 'GEMINI_API_KEY';
  window.GEMINI_API_KEY = 'GEMINI_API_KEY';
  window.process = window.process || {};
  window.process.env = window.process.env || {};
  window.process.env.API_KEY = window.API_KEY;
  window.process.env.GEMINI_API_KEY = window.GEMINI_API_KEY;

  const bootstrapChannel = new Promise((resolve) => {
    window.addEventListener('message', (event) => {
      if (event.origin !== 'https://aistudio.google.com') {
        return;
      }

      if (event.data.type === 'bootstrap') {
        resolve({
          port: event.ports[0],
          urlPatterns:
              event.data.urlPatterns.map((pattern) => new RegExp(pattern)),
        });
      }
    });
  });

  window.aistudio = window.aistudio || {
    handleFullscreenEsc: true,
    getHostUrl: async function() {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'get_host_url'},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data.url);
        };
      });
    },
    hasSelectedApiKey: async function() {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'has_selected_api_key'},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data);
        };
      });
    },
    openSelectKey: async function() {
      const hostPort = (await bootstrapChannel).port;
      const channel = new MessageChannel();
      hostPort.postMessage(
          {type: 'open_select_key'},
          [channel.port2]);
    },
    getModelQuota: async function(model) {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'get_model_quota', model},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data.modelQuota);
        };
      });
    },
  };

  const nativeFetch = window.fetch;

  /**
   * @param {string | URL | Request} resource The resource of the fetch request.
   * @param {RequestInit} options The options of the fetch request.
   * @return {Promise!} The promise of the fetch request.
   */
  async function fetch(resource, options) {
    const config = await bootstrapChannel;

    const request = resource instanceof Request ?
      resource.clone() :
      new Request(resource, options);

    if (!config.urlPatterns.some((pattern) => request.url.match(pattern))) {
      return nativeFetch(resource, options);
    }
    const hostPort = config.port;

    const channel = new MessageChannel();
    const port = channel.port1;
    let bodyBytes;
    const transfer = [channel.port2];
    const parts = [];
    const buffer = await request.arrayBuffer();
    if (buffer.byteLength) {
      bodyBytes = buffer;
      transfer.push(bodyBytes);
    }
    hostPort.postMessage(
        {
          type: 'fetch',
          url: request.url,
          method: request.method,
          headers: [...request.headers.entries()],
          body: bodyBytes,
        },
        transfer);

    let streamController;
    const body = new ReadableStream({
      start(controller) {
        streamController = controller;
      },
    });
    let resolveReceive;
    const receivePromise = new Promise((resolve) => {
      resolveReceive = resolve;
    });
    port.onmessage = (message) => {
      switch (message.data.type) {
        case 'response':
          resolveReceive(new Response(body, {
            status: message.data.status,
            statusText: message.data.statusText,
            headers: new Headers(message.data.headers),
          }));
          break;
        case 'body':
          streamController.enqueue(message.data.data);
          break;
        case 'body_done':
          streamController.close();
          break;
      }
    };
    return receivePromise;
  }

  Object.defineProperty(window, 'fetch', {
    get: function() {
      return fetch;
    },
  });

  // See details in: https://github.com/angular/angular/issues/63064.
  function patchHistoryStateFunctionForAngular(originalFn, baseHref) {
    return (state, unused, url) => {
      if (typeof url === 'string' && !url.startsWith('blob:')) {
        url = baseHref + url;
      }
      return originalFn.apply(window.history, [state, unused, url]);
    };
  }

  if (false) {
    const baseHref = window.location.href;
    window.history.replaceState = patchHistoryStateFunctionForAngular(window.history.replaceState, baseHref);
    window.history.pushState = patchHistoryStateFunctionForAngular(window.history.pushState, baseHref);
  }

  const originalWebSocket = window.WebSocket;
  class ProxiedWebSocket extends EventTarget {
    /**
     * @param {string} url The url of the websocket.
     * @param {Object!} protocols The protocols of the websocket.
     */
    constructor(url, protocols) {
      super();
      this.url = url;
      this.protocols = protocols;

      this.open();
    }

    /** Opens the websocket. */
    async open() {
      const hostPort = (await bootstrapChannel).port;
      const channel = new MessageChannel();
      hostPort.postMessage(
          {type: 'websocket_open', url: this.url, protocols: this.protocols},
          [channel.port2]);
      this.port = channel.port1;
      this.port.onmessage = (message) => {
        if (message.data.type === 'close') {
          const event = new CloseEvent('close', {
            code: message.data.code,
            reason: message.data.reason,
            wasClean: message.data.wasClean,
          });
          if (this.onclose) {
            this.onclose(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'open') {
          const event = new Event('open');
          if (this.onopen) {
            this.onopen(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'message') {
          let data = message.data.data;
          if (message.data.messageType === 'text' || message.data.messageType === 'message') {
            data = new TextDecoder().decode(data);
          }
          const event = new MessageEvent('message', {
            data,
            type: message.data.messageType,
          });
          if (this.onmessage) {
            this.onmessage(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'error') {
          const event = new ErrorEvent('error', {
            message: message.data.message,
          });
          if (this.onerror) {
            this.onerror(event);
          }
          this.dispatchEvent(event);
          return;
        }
        console.error('received unknown message in frame', event.data);
      };
    }
    /**
     * @param {string|ArrayBuffer!} data The data to send.
     */
    send(data) {
      if (typeof data === 'string') {
        this.port.postMessage({type: 'send', data});
      } else {
        this.port.postMessage({type: 'send', data}, [data.buffer]);
      }
    }

    /**
     * @param {number} code The code of the close event.
     * @param {string} reason The reason of the close event.
     */
    close(code, reason) {
      this.port.postMessage({type: 'close', code, reason});
    }
  }

  /**
   * @param {string} url The url of the websocket.
   * @param {Object!} protocols The protocols of the websocket.
   * @return {WebSocket!} The websocket.
   */
  function createWebSocket(url, protocols) {
    // This should come from the bootstrap channel, but we want this to
    // work for the synchronous constructor here.
    if (url.startsWith('wss://generativelanguage.googleapis.com/')) {
      return Reflect.construct(ProxiedWebSocket, [url, protocols]);
    }
    return Reflect.construct(originalWebSocket, [url, protocols]);
  }

  Object.defineProperty(window, 'WebSocket', {
    get: function() {
      return createWebSocket;
    },
  });

  async function instrumentErrorReporting() {
    const errors = [];
    let hostPort;

    function reportError(message) {
      if (!hostPort) {
        errors.push(message);
      } else {
        hostPort.postMessage({type: 'error', message: message}, message);
      }
    }

    function serialize(args) {
      return args.map((a) => {
        if (a instanceof Error || a instanceof ErrorEvent) {
          return a.message;
        }
        if(a instanceof CloseEvent) {
          return {code: a.code, reason: a.reason, wasClean: a.wasClean};
        }
        if( a instanceof Map) {
          return JSON.parse(JSON.stringify([...a.entries()]));
        }
        if( a instanceof Set) {
          return JSON.parse(JSON.stringify([...a.values()]));
        }
        if (a instanceof Object) {
          return JSON.parse(JSON.stringify(a));
        }
        return a;
      });
    }

    const originalConsole = window.console;
    const originalConsoleLog = window.console.log;
    const originalConsoleError = window.console.error;
    const originalConsoleWarn = window.console.warn;
    const originalConsoleDebug = window.console.debug;
    window.console = {
      ...originalConsole,
      log: (message, ...args) => {
        originalConsoleLog.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_log', message: combined });
      },
      debug: (message, ...args) => {
        originalConsoleDebug.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_debug', message: combined });
      },
      error: (message, ...args) => {
        originalConsoleError.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_error', message: combined });
      },
      warn: (message, ...args) => {
        originalConsoleWarn.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_warn', message: combined });
      },
    };

    window.onerror = (message, source, lineno, colno, error) => {
      reportError({type: 'error', message: serialize([message]), source, lineno, colno, error});
    };

    window.onunhandledrejection = (event) => {
      reportError({type: 'unhandledrejection', message: serialize([event.reason])});
    };

    window.alert = (message) => {
      reportError({type: 'alert', message: serialize([message]) });
    };

    hostPort = (await bootstrapChannel).port;
    for(const error of errors) {
      hostPort.postMessage({type: 'error', message: error});
    }
  }

  const availableFiles = new Set(window.APPLET_FILES || []);

  instrumentErrorReporting();

  if (false) {
    const notifyLocationChange = async () => {
      const hostPort = (await bootstrapChannel).port;
      hostPort.postMessage({type: 'locationchange', href: location.href});
    };

    // Send initial state on load.
    notifyLocationChange();

    const originalPushState = history.pushState;
    history.pushState = (...args) => {
      originalPushState.apply(history, args);
      notifyLocationChange();
    };

    const originalReplaceState = history.replaceState;
    history.replaceState = (...args) => {
      originalReplaceState.apply(history, args);
      notifyLocationChange();
    };
    window.addEventListener('popstate', (e) => {
      notifyLocationChange();
    });
  }

  window.addEventListener('hashchange', async (e) =>{
    const config = await bootstrapChannel;
    const hostPort = config.port;
    hostPort.postMessage({type: 'hashchange', hash: window.location.hash});
    if (false) {
      hostPort.postMessage({
        type: 'locationchange',
        href: location.href,
      });
    }
  });

  if (true) {
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/html2canvas-pro';
    script.onload = () => {
      window.addEventListener('message', async (event) => {
        if (event.data?.type === 'capture-screenshot') {
          try {
            const canvas = await html2canvas(document.documentElement, {
              logging: false,
              useCORS: true,
              backgroundColor: null,
              scale: 1,
            });
            const hostPort = (await bootstrapChannel).port;
            hostPort.postMessage(
              {
                type: 'screenshot-result',
                dataUrl: canvas.toDataURL('image/png'),
                requestId: event.data.requestId,
                scrollX: document.body.scrollLeft,
                scrollY: document.body.scrollTop,
              },
            );
          } catch (e) {
            const hostPort = (await bootstrapChannel).port;
            hostPort.postMessage(
              {
                type: 'screenshot-error',
                error: e.message,
                requestId: event.data.requestId,
              });
          }
        }
      });
    };
    document.head.appendChild(script);
  }

  if (false) {
    const MAX_ANCESTOR_LEVEL = 3;
    const MAX_DESCENDANT_LEVEL = 3;

    function getElementSelector(el) {
      if (!el || el.nodeType !== 1) {
        return '';
      }
      const parts = [];
      while(el && el.nodeType === 1 && el.tagName.toLowerCase() !== 'body') {
        let part = el.tagName.toLowerCase();
        if (el.id) {
          part += '#' + CSS.escape(el.id);
        }

        const parent = el.parentElement;
        if (parent) {
          let nth = 1;
          let prev = el.previousElementSibling;
          while(prev) {
            if (prev.tagName === el.tagName) {
              nth++;
            }
            prev = prev.previousElementSibling;
          }
          part += ':nth-of-type(' + nth + ')';
        }

        parts.unshift(part);
        el = el.parentElement;
      }
      return parts.join(' > ');
    }

    function getDomTreeAsString(element, depth, maxDepth) {
      if (!element || element.nodeType !== 1 || depth > maxDepth) {
        return '';
      }
      const tagName = element.tagName.toLowerCase();
      let attrs = [];
      if (element.id) {
        attrs.push('id="' + element.id + '"');
      }
      if (element.classList.length > 0) {
        attrs.push('class="' + element.classList.value + '"');
      }
      const attrString = attrs.length > 0 ? ' ' + attrs.join(' ') : '';

      let content = '';
      for (const node of element.childNodes) {
        if (node.nodeType === 1) { // Element node
          content += getDomTreeAsString(node, depth + 1, maxDepth);
        } else if (node.nodeType === 3) { // Text node
          content += node.textContent;
        }
      }

      return '<' + tagName + attrString + '>' + content + '</' + tagName + '>';
    }

    function getElementInfo(element) {
      const selector = getElementSelector(element);
      let levelsUp = 0;
      let root = element;
      while(levelsUp < MAX_ANCESTOR_LEVEL && root.parentElement && root.parentElement.tagName.toLowerCase() !== 'html') {
        root = root.parentElement;
        levelsUp++;
      }
      const domString = getDomTreeAsString(root, 0, levelsUp + MAX_DESCENDANT_LEVEL);
      const styles = window.getComputedStyle(element);
      const css = {};
      for (let i = 0; i < styles.length; i++) {
        const key = styles[i];
        css[key] = styles.getPropertyValue(key);
      }
      return { selector, domString, css };
    }

    const style = document.createElement('style');
    style.textContent =
    '.aistudio-hover-highlight { box-shadow: inset 0 0 0 0.5px white, inset 0 0 0 1.5px rgba(128,128,128,0.6) !important; }' +
    '.aistudio-active-highlight { box-shadow: inset 0 0 0 0.5px white, inset 0 0 0 1.5px #87a9ff !important; }' +
    '#aistudio-focus-mode-tag { position: absolute; display: none; background: #87a9ff; border-radius: 4px; border: 0.5px solid white; z-index: 10000; text-transform: lowercase; padding: 2px 4px; color: #32302c; font-family: Inter, sans-serif; font-size: 12px; font-style: normal; font-weight: 400; line-height: 16px; pointer-events: none; }' +
    '#aistudio-hover-mode-tag { position: absolute; display: none; background: rgba(128,128,128,0.6); border-radius: 4px; border: 0.5px solid white; z-index: 10000; text-transform: lowercase; padding: 2px 4px; color: white; font-family: Inter, sans-serif; font-size: 12px; font-style: normal; font-weight: 400; line-height: 16px; pointer-events: none; }';
    document.head.appendChild(style);

    let hoveredElement = null;
    let activeElement = null;
    let focusTag = null;
    let hoverTag = null;
    let resizeObserver = null;
    let iframeLoaded = false;
    let designModeEnabled = false;
    let designModeStyle = null;
    let designModeOverlay = null;

    function ensureFocusTag() {
      if (!focusTag) {
        focusTag = document.createElement('div');
        focusTag.id = 'aistudio-focus-mode-tag';
        document.body.appendChild(focusTag);
      }
    }

    function cleanupActiveElement() {
      if (!activeElement) return;
      activeElement.classList.remove('aistudio-active-highlight');
      activeElement.removeAttribute('data-aistudio-tag-name');
      if (resizeObserver) {
        resizeObserver.unobserve(activeElement);
      }
      window.removeEventListener('resize', positionFocusTag);
      window.removeEventListener('scroll', positionFocusTag, true);
    }

    function positionFocusTag() {
      requestAnimationFrame(() => {
        if (!activeElement || !focusTag) return;
        focusTag.style.display = 'inline-flex';
        const rect = activeElement.getBoundingClientRect();
        focusTag.style.top = (rect.top + window.scrollY - focusTag.offsetHeight - 5) + 'px';
        focusTag.style.left = (rect.left + window.scrollX) + 'px';
      });
    }

    function positionHoverTag() {
      if (!hoveredElement || !hoverTag || hoveredElement === activeElement) {
        if (hoverTag) hoverTag.style.display = 'none';
        return;
      }
      requestAnimationFrame(() => {
        hoverTag.style.display = 'inline-flex';
        const rect = hoveredElement.getBoundingClientRect();
        hoverTag.style.top = (rect.top + window.scrollY - hoverTag.offsetHeight - 5) + 'px';
        hoverTag.style.left = (rect.left + window.scrollX) + 'px';
      });
    }

    if (window.ResizeObserver) {
      resizeObserver = new ResizeObserver(() => {
        positionFocusTag();
      });
    }

    function setHoveredElement(element) {
      if (!designModeEnabled || !iframeLoaded) return;

      if (!hoverTag) {
        hoverTag = document.createElement('div');
        hoverTag.id = 'aistudio-hover-mode-tag';
        document.body.appendChild(hoverTag);
      }

      if (hoveredElement && hoveredElement !== activeElement) {
        hoveredElement.classList.remove('aistudio-hover-highlight');
      }
      hoverTag.style.display = 'none';

      hoveredElement = element;

      if (hoveredElement && hoveredElement !== activeElement) {
        hoveredElement.classList.add('aistudio-hover-highlight');
        hoverTag.textContent = hoveredElement.tagName.toLowerCase();
        positionHoverTag();
      }
    }

    async function setActiveElement(element) {
      if (!designModeEnabled || !iframeLoaded) return;

      ensureFocusTag();
      cleanupActiveElement();
      focusTag.style.display = 'none';

      // Clear hover from new active element if it was hovered
      if (element) {
        element.classList.remove('aistudio-hover-highlight');
      }

      activeElement = element;

      if (activeElement) {
        activeElement.setAttribute('data-aistudio-tag-name', activeElement.tagName);
        activeElement.classList.add('aistudio-active-highlight');
        focusTag.textContent = activeElement.tagName.toLowerCase();
        positionFocusTag();
        if (resizeObserver) {
          resizeObserver.observe(activeElement);
        }
        window.addEventListener('resize', positionFocusTag);
        window.addEventListener('scroll', positionFocusTag, true);

        // Notify host about selected element
        const info = getElementInfo(activeElement);
        window.parent.postMessage({
          type: 'element-selected',
          element: info,
        }, '*');
      }
    }

    function getElementAtPoint(x, y) {
      const elements = document.elementsFromPoint(x, y);
      for (const el of elements) {
        if (el.id === 'aistudio-focus-mode-tag' ||
            el.id === 'aistudio-hover-mode-tag' ||
            el.id === 'aistudio-design-mode-overlay') {
          continue;
        }
        return el;
      }
      return null;
    }

    function onMouseMove(e) {
      if (!designModeEnabled) return;
      const element = getElementAtPoint(e.clientX, e.clientY);
      setHoveredElement(element);
    }

    function onClick(e) {
      if (!designModeEnabled) return;
      e.preventDefault();
      e.stopPropagation();
      const element = getElementAtPoint(e.clientX, e.clientY);
      if (element && element !== document.body) {
        setActiveElement(element);
      }
    }

    function onKeyDown(e) {
      if (!designModeEnabled) return;
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        e.stopPropagation();
        const element = document.activeElement;
        if (element && element !== document.body) {
          setActiveElement(element);
        }
      }
    }

    function enableDesignMode() {
      if (designModeEnabled) return;
      designModeEnabled = true;
      designModeStyle = document.createElement('style');
      designModeStyle.textContent =
        'button:disabled, input:disabled, select:disabled, textarea:disabled, ' +
        '[disabled], [aria-disabled="true"] { pointer-events: auto !important; }';
      document.head.appendChild(designModeStyle);
      designModeOverlay = document.createElement('div');
      designModeOverlay.id = 'aistudio-design-mode-overlay';
      designModeOverlay.style.cssText =
        'position: fixed; top: 0; left: 0; width: 100%; height: 100%; ' +
        'z-index: 9999; cursor: default; background: transparent;';
      designModeOverlay.addEventListener('mousemove', onMouseMove);
      designModeOverlay.addEventListener('mousedown', onClick);
      designModeOverlay.addEventListener('keydown', onKeyDown);
      document.body.appendChild(designModeOverlay);
    }

    function disableDesignMode() {
      if (!designModeEnabled) return;
      if (designModeOverlay) {
        designModeOverlay.removeEventListener('mousemove', onMouseMove);
        designModeOverlay.removeEventListener('mousedown', onClick);
        designModeOverlay.removeEventListener('keydown', onKeyDown);
        designModeOverlay.remove();
        designModeOverlay = null;
      }
      setHoveredElement(null);
      clearActiveElement();
      if (designModeStyle) {
        designModeStyle.remove();
        designModeStyle = null;
      }
      designModeEnabled = false;
    }

    function clearActiveElement() {
      ensureFocusTag();
      cleanupActiveElement();
      focusTag.style.display = 'none';
      activeElement = null;
    }

    window.addEventListener('load', () => {
      iframeLoaded = true;
    });

    window.addEventListener('message', async (event) => {
      if (event.data?.type === 'set-design-mode') {
        if (event.data.enabled) {
          enableDesignMode();
        } else {
          disableDesignMode();
        }
      } else if (event.data?.type === 'highlight-element-by-selector') {
        try {
          const selector = event.data.selector;
          if (selector) {
            const element = document.querySelector(selector);
            setActiveElement(element);
          } else {
            setActiveElement(null);
          }
        } catch (e) {
          setActiveElement(null);
        }
      } else if (event.data?.type === 'change-element-style') {
        try {
          const selector = event.data.selector;
          if (selector) {
            const element = document.querySelector(selector);
            if (element) {
              element.style.setProperty(
                event.data.property,
                event.data.value,
                'important',
              );
              positionFocusTag();
            }
          }
        } catch (e) {}
      }
    });
  }

  window.addEventListener('keydown', async (event) => {
    if (event.key === 'Escape' && window.aistudio?.handleFullscreenEsc) {
      const hostPort = (await bootstrapChannel).port;
      hostPort.postMessage({type: 'exit-fullscreen'});
    }
  });
})();
// # sourceURL=iframe_shim.js
        </script>
        <base href="https://ai.studio"/>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>SonicPocket AI</title>
    
    <!-- PWA Setup -->
    <link rel="manifest" href="/manifest.json?v=3" />
    <meta name="theme-color" content="#09090b" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="SonicPocket" />
    
    <!-- Standard Favicon (Browser Tabs) -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI3LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTAyNCAxMDI0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cjx1YXR0ZXJuICB3aWR0aD0iODIuMDc4MDk0NSIgaGVpZ2h0PSI4Mi4wNzg1OTgiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJVbm5hbWVkX1BhdHRlcm5fMSIgdmlld0JveD0iNDMuNzkzNDk5IC04Ny43Nzc4MDE1IDgyLjA3ODA5NDUgODIuMDc4NTk4IiBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiPgoJPGc+CgkJPHJlY3QgeD0iNDMuNzkzNDk5IiB5PSItODcuNzc3ODAxNSIgc3R5bGU9ImZpbGw6bm9uZTsiIHdpZHRoPSI4Mi4wNzgwOTQ1IiBoZWlnaHQ9IjgyLjA3ODU5OCIvPgoJCTxyZWN0IHg9IjQzLjc5MzQ5OSIgeT0iLTg3Ljc3NzgwMTUiIHN0eWxlPSJmaWxsOiNCQ0JFQzA7IiB3aWR0aD0iODIuMDc4MDk0NSIgaGVpZ2h0PSI4Mi4wNzg1OTgiLz4KCQk8bGluZSBzdHlsZT0iZmlsbDojRkZGRkZGOyIgeDE9IjI1LjkzNDA5OTIiIHkxPSItMTAuMjU5OCIgeDI9IjMwLjQ5MjcwMDYiIHkyPSItNS42OTkyMDAyIi8+CgkJPGxpbmUgc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHgxPSIyNS45MzQwOTkyIiB5MT0iLTUuNjk5MjAwMiIgeDI9IjMwLjQ5MjcwMDYiIHkyPSItMTAuMjU5OCIvPgoJCTxyZWN0IHg9IjM4LjA5NDIwMDEiIHk9Ii00Ny44NzgzOTg5IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjkxLjE5NzI5NjEiIGhlaWdodD0iNC41NTk5OTk5Ii8+CgkJPHJlY3QgeD0iMzguMDk0MjAwMSIgeT0iLTIwLjUxOTUwMDciIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iOTEuMTk3Mjk2MSIgaGVpZ2h0PSI0LjU2MDUwMDEiLz4KCQk8cmVjdCB4PSIzOC4wOTQyMDAxIiB5PSItNzUuMjM3ODAwNiIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI5MS4xOTcyOTYxIiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjM4LjA5NDIwMDEiIHk9Ii01Ni45OTg1MDA4IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjkxLjE5NzI5NjEiIGhlaWdodD0iNC41NTk1MDAyIi8+CgkJPHJlY3QgeD0iMzguMDk0MjAwMSIgeT0iLTI5LjYzODcwMDUiIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iOTEuMTk3Mjk2MSIgaGVpZ2h0PSI0LjU2MDU5OTgiLz4KCQk8cmVjdCB4PSIzOC4wOTQyMDAxIiB5PSItODQuMzU3OTAyNSIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI5MS4xOTcyOTYxIiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjE2LjgxMjk5OTciIHk9Ii03NS4yMzc4MDA2IiBzdHlsZT0iZmlsbDojQTdBOUFDOyIgd2lkdGg9IjkuMTIxMTAwNCIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSI4MS40MTI1OTc3IiB5PSItOTEuMTk3Nzk5NyIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI0LjU2MDUwMDEiIGhlaWdodD0iOTEuMTk3Nzk5NyIvPgoJCTxyZWN0IHg9IjEwOC43NzIwMDMyIiB5PSItOT.MTk3Nzk5NyIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI0LjU2MDQ5NzMiIGhlaWdodD0iOTEuMTk3Nzk5NyIvPgoJCTxyZWN0IHg9IjU0LjA1MzE5OTgiIHk9Ii05MS4xOTc3OTk3IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI5MS4xOTc3OTk3Ii8+CgkJPHJlY3QgeD0iOTAuNTMxNzAwMSIgeT0iLTkxLjE5Nzc5OTciIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjkxLjE5Nzc5OTciLz4KCQk8cmVjdCB4PSIxMTcuODkxMDk4IiB5PSItOTEuMTk3Nzk5NyIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iOTEuMTk3Nzk5NyIvPgoJCTxyZWN0IHg9IjYzLjE3MjQwMTQiIHk9Ii05MS4xOTc3OTk3IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI5MS4xOTc3OTk3Ii8+CgkJPHJlY3QgeD0iMTAuNzM0OTAwNSIgeT0iLTg1Ljg3NzQwMzMiIHN0eWxlPSJmaWxsOiNBN0E5QUM7IiB3aWR0aD0iNC41NTg1OTk5IiBoZWlnaHQ9IjkuMTE5MDk5NiIvPgoJCQoJCQk8bGluZSBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMjMxRjIwO3N0cm9rZS13aWR0aDowLjk1O3N0cm9rZS1saW5lY2FwOnNxdWFyZTsiIHgxPSI0Mi45ODY4MDExIiB5MT0iLTM2LjQ3ODUwMDQiIHgyPSIxMjYuNjMxMjk0MyIgeTI9Ii0zNi40Nzg1MDA0Ii8+CgkJCgkJCTxsaW5lIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyMzFGMjA7c3Ryb2tlLXdpZHRoOjAuOTU7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlOyIgeDE9IjQyLjk4NjgwMTEiIHkxPSItOS4xMTkwOTk2IiB4Mj0iMTI2LjYzMTI5NDMiIHkyPSItOS4xMTkwOTk2Ii8+CgkJCgkJCTxsaW5lIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyMzFGMjA7c3Ryb2tlLXdpZHRoOjAuOTU7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlOyIgeDE9IjQyLjk4NjgwMTEiIHkxPSItNjMuODM4NDAxOCIgeDI9IjEyNi42MzEyOTQzIiB5Mj0iLTYzLjgzODQwMTgiLz4KCQkKCQkJPGxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzIzMUYyMDtzdHJva2Utd2lkdGg6MC45NTtzdHJva2UtbGluZWNhcDpzcXVhcmU7IiB4MT0iMC40NzUxIiB5MT0iLTYzLjgzODQwMTgiIHgyPSIzMS4yNTQ0MDAzIiB5Mj0iLTYzLjgzODQwMTgiLz4KCQkKCQkJPGxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzIzMUYyMDtzdHJva2Utd2lkdGg6MC45NTtzdHJva2UtbGluZWNhcDpzcXVhcmU7IiB4MT0iNzQuNTcyNzk5NyIgeTE9Ii04OC41Mzc1OTc3IiB4Mj0iNzQuNTcyNzk5NyIgeTI9Ii00Ljg5MjYwMDEiLz4KCQkKCQkJPGxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzIzMUYyMDtzdHJva2Utd2lkdGg6MC45NTtzdHJva2UtbGluZWNhcDpzcXVhcmU7IiB4MT0iMTAxLjkzMjA5ODQiIHkxPSItODguNTM3NTk3NyIgeDI9IjEwMS45MzIwOTg0IiB5Mj0iLTQuODkyNjAwMSIvPgoJCQoJCQk8bGluZSBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMjMxRjIwO3N0cm9rZS13aWR0aDowLjk1O3N0cm9rZS1saW5lY2FwOnNxdWFyZTsiIHgxPSI0Ny4yMTM0MDE4IiB5MT0iLTg4LjUzNzU5NzciIHgyPSI0Ny4yMTM0MDE4IiB5Mj0iLTQuODkyNjAwMSIvPgoJCQoJCQk8bGluZSBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMjMxRjIwO3N0cm9rZS13aWR0aDowLjk1O3N0cm9rZS1saW5lY2FwOnNxdWFyZTsiIHgxPSIzLjg5MzEiIHkxPSItOTEuMTk3Nzk5NyIgeDI9IjMuODkzMSIgeTI9Ii02MC40MTg0OTkiLz4KCQk8cmVjdCB4PSIxMC43MzQ5MDA1IiB5PSItNzUuMjM3ODAwNiIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU1ODU5OTkiIGhlaWdodD0iNC41NTk1OTk5Ii8+CgkJPHJlY3QgeD0iNTQuMDUzMTk5OCIgeT0iLTc1LjIzNzgwMDYiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjYzLjE3MjQwMTQiIHk9Ii04NC4zNTc5MDI1IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSI2My4xNzI0MDE0IiB5PSItNzUuMjM3ODAwNiIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDUwMDEiIGhlaWdodD0iNC41NTk1OTk5Ii8+CgkJPHJlY3QgeD0iNTQuMDUzMTk5OCIgeT0iLTg0LjM1NzkwMjUiIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjgxLjQxMjU5NzciIHk9Ii03NS4yMzc4MDA2IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSItODQuMzU3OTAyNSIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iNC41NTk1OTk5Ii8+CgkJPHJlY3QgeD0iOTAuNTMxNzAwMSIgeT0iLTc1LjIzNzgwMDYiIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjgxLjQxMjU5NzciIHk9Ii04NC4zNTc5MDI1IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSIxMDguNzcyMDAzMiIgeT0iLTc1LjIzNzgwMDYiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA0OTczIiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjExNy44OTEwOTgiIHk9Ii04NC4zNTc5MDI1IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSIxMTcuODkxMDk4IiB5PSItNzUuMjM3ODAwNiIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iNC41NTk1OTk5Ii8+CgkJPHJlY3QgeD0iMTA4Ljc3MjAwMzIiIHk9Ii04NC4zNTc5MDI1IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNDk3MyIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSI1NC4wNTMzMTk5OCIgeT0iLTQ3Ljg3ODM5ODkiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5OTk5OSIvPgoJCTxyZWN0IHg9IjYzLjE3MjQwMTQiIHk9Ii01Ni45OTg1MDA4IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTUwMDIiLz4KCQk8cmVjdCB4PSI2My4xNzI0MDE0IiB5PSItNDcuODc4Mzk4OSIgc3R5bGU9ImZpbGw6IzNENEQ0RjsiIHdpZHRoPSI0LjU2MDUwMDEiIGhlaWdodD0iNC41NTk5OTk5Ii8+CgkJPHJlY3QgeD0iNTQuMDUzMTk5OCIgeT0iLTU2Ljk5ODUwMDgiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTAwMiIvPgoJCTxyZWN0IHg9IjgxLjQxMjU5NzciIHk9Ii00Ny44NzgzOTg5IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTk5OTkiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSItNTYuOTk4NTAwOCIgc3R5bGU9ImZpbGw6IzNENEQ0Rjsigd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU1OTUwMDIiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSItNDcuODc4Mzk4OSIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iNC41NTk5OTk5Ii8+CgkJPHJlY3QgeD0iODEuNDEyNTk3NyIgeT0iLTU2Ljk5ODUwMDgiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1MDAxIiBoZWlnaHQ9IjQuNTU5NTAwMiIvPgoJCTxyZWN0IHg9IjEwOC43NzIwMDMyIiB5PSItNDcuODc4Mzk4OSIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDQ5NzMiIGhlaWdodD0iNC41NTk5OTk5Ii8+CgkJPHJlY3QgeD0iMTE3Ljg5MTA5OCIgeT0iLTU2Ljk5ODUwMDgiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTAwMiIvPgoJCTxyZWN0IHg9IjExNy44OTEwOTgiIHk9Ii00Ny44NzgzOTg5IiBzdHlsZT0iZmlsbDojM2Q0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU1OTk5OTkiLz4KCQk8cmVjdCB4PSIxMDguNzcyMDAzMiIgeT0iLTU2Ljk5ODUwMDgiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA0OTczIiBoZWlnaHQ9IjQuNTU5NTAwMiIvPgoJCTxyZWN0IHg9IjU0LjA1MzE5OTgiIHk9Ii0yMC41MTk1MDA3IiBzdHlsZT0iZmlsbDojM2Q0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDUwMDEiLz4KCQk8cmVjdCB4PSI2My4xNzI0MDE0IiB5PSIyOS42Mzg3MDA1IiBzdHlsZT0iZmlsbDojM2Q0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDU5OTkiLz4KCQk8cmVjdCB4PSI2My4xNzI0MDE0IiB5PSItMjAuNTE5NTAwNyIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI0LjU2MDUwMDEiIGhlaWdodD0iNC41NjA1MDAxIi8+CgkJPHJlY3QgeD0iNTQuMDUzMTk5OCIgeT0iMjkuNjM4NzAwNSIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iNC41NjA1OTk5Ii8+CgkJPHJlY3QgeD0iODEuNDEyNTk3NyIgeT0iLTIwLjUxOTUwMDciIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1MDAxIiBoZWlnaHQ9IjQuNTU2MDUwMDEiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSIyOS42Mzg3MDA1IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDU5OTgiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSItMjAuNTE5NTAwNyIgc3R5bGU9ImZpbGw6IzNENEQ0Rjsigd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDUwMDEiLz4KCQk8cmVjdCB4PSI4MS40MTI1OTc3IiB5PSIyOS42Mzg3MDA1IiBzdHlsZT0iZmlsbDojM2Q0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU2MDU5OTkiLz4KCQk8cmVjdCB4PSIxMDguNzcyMDAzMiIgeT0iLTIwLjUxOTUwMDciIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA0OTczIiBoZWlnaHQ9IjQuNTYwNTAwMSIvPgoJCTxyZWN0IHg9IjExNy44OTEwOTgiIHk9IjI5LjYzODcwMDUiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTYwNTk5OCIvPgoJCTxyZWN0IHg9IjExNy44OTEwOTgiIHk9Ii0yMC41MTk1MDA3IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDUwMDEiLz4KCQk8cmVjdCB4PSIxMDguNzcyMDAzMiIgeT0iLTI5LjYzODcwMDUiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA0OTczIiBoZWlnaHQ9IjQuNTYwNTk5OCIvPgoJPC9nPgo8L3BhdHRlcm4+CjxnIGlkPSJCYWNrZ3JvdW5kIj4KCQoKCQk8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lkXzFfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjEzNy4wODcxNDI5IiB5MT0iMTAuMDUwNTU2MiIgeDI9Ijg4OC43MDY2MDQiIHkyPSIxMDE2LjM1MDk1MjEiPgoJCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiMxRkNCRTciLz4KCQk8c3RvcCAgb2Zmc2V0PSIwLjUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3ODgxRUYiLz4KCQk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojQ0M1RERDIi8+Cgk8L2xpbmVhckdyYWRpZW50PgoJPHJlY3Qgc3R5bGU9ImZpbGw6dXJsKCNTVkdJZF8xXyk7IiB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0Ii8+Cgk8ZyBpZD0iQXJyb3dfMjUiPgoJPC9nPgoJPGcgaWQ9IkFycm93XzIiPgoJPC9nPgo8L2c+CjxnIGlkPSJfeDMxX19fX3gyMDEzX19MYXllciI+Cgk8cGF0aCBzdHlsZT0iZmlsbDojRkZGRkZGOyIgZD0iTTMxMS4xMDIwNTA4LDc4MC42NTgyMDMxYy02LjA5NzE2OCwwLTExLjM3MzUzNTItNC40Mzg0NzY2LTEyLjMzNjkxNDEtMTAuNTU2NjQwNgoJCWwtMzcuNjIyNTU4Ni0yMzguOTMxNjQwNkMyNjAuNTM0NjY4LDUyNC4zMDQ2ODc1LDI1Ny4yNTM0MTgsNTI0LjUsMjUzLjM0MDgyMDMsNTI0LjVIMTI4Ljc4NDE3OTcKCQljLTYuOTAzMzIwMywwLTEyLjUtNS41OTY2Nzk3LTEyLjUtMTIuNXM1LjU5NjY3OTctMTIuNSwxMi41LTEyLjVoMTI0LjU1NjY0MDYKCQljMTYuMjk2Mzg2NywwLDI5Ljk2MzM3ODksMTEuNjg0MDgyLDMyLjQ5ODA0NjksMjcuNzgxMjVsMTIuNzczOTI1OCw4MS4xMjY5NTMxVjI1NS44NDI3NzM0CgkJYzAtNi43MDM2MTMzLDUuMjg4MDg1OS0xMi4yMTM4NjcyLDExLjk4NTgzOTgtMTIuNDg5MjU3OGM2LjY5NDgyNDItMC4yODk1NTA4LDEyLjQyMDg5ODQsNC43ODEyNSwxMi45NzE2Nzk3LDExLjQ2MTkxNDEKCQlsMjguNDk5NTExNywzNDUuNTM1MTU2MmwyNy4yNjMxODM2LTI5OS4wNjgzNTk0YzAuNTg0NDcyNy02LjQxMTYyMTEsNS45NDMzNTk0LTExLjMzMTA1NDcsMTIuMzgxODM1OS0xMS4zNjUyMzQ0CgkJYzYuMDY5MzM1OS0wLjAyMDAxOTUsMTEuODQ5MTIxMSw0LjgyODEyNSwxMi41MDE5NTMxLDExLjIzMjkxMDJsMjguNjc1MjkzLDI4MS40NDY3NzczbDI3LjE0MDEzNjctMjM1LjA0MDAzOTEKCQljMC43MjM2MzI4LTYuMjY1MTM2Nyw2LjAwMDk3NjYtMTEuMDEwMjUzOSwxMi4zMDgxMDU1LTExLjA2NTQyOTdjNi4zMjEyODkxLTAuMDY2ODk0NSwxMS42NjY5OTIyLDQuNTk2Njc5NywxMi41LDEwLjg0ODYzMjgKCQlsMjguOTc1MDk3NywyMTcuNDcwNzAzMWwyNi45NTUwNzgxLTE3MS4xODk5NDE0YzAuOTQ0MzM1OS01Ljk5ODUzNTIsNi4wNjM0NzY2LTEwLjQ1MDY4MzYsMTIuMTM1NzQyMi0xMC41NTM3MTA5CgkJYzYuMDY5MzM1OS0wLjEzMTM0NzcsMTEuMzM4ODY3Miw0LjE3MjM2MzMsMTIuNDg2MzI4MSwxMC4xMzU3NDIyTDU5NC45Nzk0OTIyLDU0Ni45Mzc1bDI2LjY3MzgyODEtMTA3LjgwMDc4MTIKCQljMS4zMjkxMDE2LTUuMzc0MDIzNCw2LjAzNTE1NjItOS4yMzI5MTAyLDExLjU2NTQyOTctOS40ODQzNzVjNS41NDk4MDQ3LTAuMjQ3MDcwMywxMC41NjczODI4LDMuMTY0NTUwOCwxMi4zNzk4ODI4LDguMzk1NTA3OAoJCWwzMS4zNzc5Mjk3LDkwLjU4MTA1NDdsMjYuNjU0Mjk2OS00Ni4xNjYwMTU2YzEuNjU3MjI2Ni0yLjg3MTA5MzgsNC4zODc2OTUzLTQuOTY2MzA4Niw3LjU4OTg0MzgtNS44MjQyMTg4CgkJYzMuMjAzMTI1LTAuODU2OTMzNiw2LjYxNDI1NzgtMC40MDkxNzk3LDkuNDg1MzUxNiwxLjI0OTAyMzRsMjguODIxMjg5MSwxNi42NDA2MjUKCQlDNzU1LjE2MTEzMjgsNDk3Ljc4MDc2MTcsNzYxLjU3ODEyNSw0OTkuNSw3NjguMDgzMDA3OCw0OTkuNSw3NjguMDgzMDA3OCw0OTkuNWgxMjguNzAxMTcxOWM2LjkwMzMyMDMsMCwxMi41LDUuNTk2Njc5NywxMi41LDEyLjUKCQlzLTUuNTk2Njc5NywxMi41LTEyLjUsMTIuNUg3NjguMDgzMDA3OGMtMTAuODg2NzE4OCwwLTIxLjYyNTk3NjYtMi44NzY5NTMxLTMxLjA1NTY2NDEtOC4zMjEyODkxTDcxOS4wMzEyNSw1MDUuNzg4NTc0MgoJCWwtMzQuMDg0OTYwOSw1OS4wMzU2NDQ1Yy0yLjQ0NjI4OTEsNC4yMzYzMjgxLTcuMTM3Njk1Myw2LjY1ODIwMzEtMTIuMDExNzE4OCw2LjE5MzM1OTQKCQljLTQuODcxMDkzOC0wLjQ2Mzg2NzItOS4wMjM0Mzc1LTMuNzI4NTE1Ni0xMC42MjUtOC4zNTE1NjI1bC0yNi41MjI0NjA5LTc2LjU2NTkxOGwtMzAuMjAwMTk1MywxMjIuMDUwMjkzCgkJYy0xLjM4MjgxMjUsNS41OTA4MjAzLTYuMzk5NDE0MSw5LjQ5ODA0NjktMTIuMTMwODU5NCw5LjQ5ODA0NjljLTAuMTA5Mzc1LDAtMC4yMTk3MjY2LTAuMDAwOTc2Ni0wLjMzMTA1NDctMC4wMDM5MDYyCgkJYy01Ljg2NzE4NzUtMC4xNTQyOTY5LTEwLjgzNjkxNDEtNC4zNzAxMTcyLTExLjk0NjI4OTEtMTAuMTMzNzg5MWwtMjYuODI5MTAxNi0xMzkuNDAzMzIwM2wtMjkuMjE3NzczNCwxODUuNTU4NTkzOAoJCWMtMC45NTgwMDc4LDYuMDgzOTg0NC02LjIwMTE3MTksMTAuNTU1NjY0MS0xMi4zNDUyMTQ4DEwLjU1NTY2NDFjLTAuMDUwMjkzLDAtMC4xMDAwOTc3LDAtMC4xNTA4Nzg5LTAuMDAwOTc2NgoJCWMtNi4yMDg0OTYxLTAuMDczMjQyMi0xMS40MjE4NzUtNC42OTMzNTk0LTEyLjI0MjE4NzUtMTAuODQ4NjMyOGwtMjcuMDU3NjE3Mi0yMDMuMDgyNTE5NWwtMjguODAyNzM0NCwyNDkuNDM5OTQxNAoJCWMtMC43Mjg1MTU2LDYuMzEwNTQ2OS02LjA3MzI0MjIsMTEuMDY1NDI5Ny0xMi40MTYwMTU2LDExLjA2NjQwNjJjLTAuMDI4ODA4NiwwLTAuMDU2NjQwNiwwLTAuMDg1NDQ5MiwwCgkJYy02LjM4MDg1OTQtMC4wNDI5Njg4LTExLjcwNDU4OTgtNC44ODQ3NjU2LTEyLjM1MTU2MjUtMTEuMjMzMzk4NGwtMjcuMjA3NTE5NS0yNjcuMDM4NTc0MmwtMjguNTc3MTQ4NCwzMTMuNDgwOTU3CgkJYy0wLjU4NjkxNDEsNi40Mzk0NTMxLTUuOTg3NzkzLDExLjM2NDI1NzgtMTIuNDQ3MjY1NiwxMS4zNjUyMzQ0Yy0wLjAxODU1NDcsMC0wLjAzNjEzMjgsMC0wLjA1NDY4NzUsMAoJCWMtNi40ODQ4NjMzLTAuMDI4MzIwMy0xMS44NzEwOTM4LTUuMDA5NzY1Ni0xMi40MDM4MDg2LTExLjQ3MjY1NjJMMzIzLjYxMjc5Myw1NTkuNDY1ODIwM3YyMDguNjkxNDA2MgoJCWMwLDYuNTI1MzkwNi01LjAxOTUzMTIsMTEuOTUzMTI1LTExLjUyNDkwMjMsMTIuNDYxOTE0MUMzMTEuNzU3ODEyNSw3ODAuNjQ0NTMxMiwzMTEuNDI4MjIyNyw3ODAuNjU4MjAzMSwzMTEuMTAyMDUwOCw3ODAuNjU4MjAzMQoJCXoiLz4KPC9nPgo8ZyBpZD0iX3gyX19fX3gyMDEzX19MYXllciI+Cgk8cmVjdCB4PSIwIiB5PSItMC4wMDAwMDgiIHN0eWxlPSJmaWxsOiNGQUNDMTQ7IiB3aWR0aD0iMTI4Ljc4NDIyNTUiIGhlaWdodD0iMTAyNCIvPgoJCgk8cmVjdCB4PSI4OTYuNzg0MjQwNyIgeT0iLTAuMDAwMDA4IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAtMS4yMjQ2NDdlLTE2IDEuMjI0NjQ3ZS0xNiAtMSAxOTIwLjc4NDE3OTcgMTAyNCkiIHN0eWxlPSJmaWxsOiNGQUNDMTQ7IiB3aWR0aD0iMTI3LjIxNTc4MjIiIGhlaWdodD0iMTAyNCIvPgo8L2c+CjxnIGlkPSJfeDNfX19feDIwMTNfX0xheWVyIj4KCTxwYXRoIGQ9Ik05NS41NzAzMTI1LDY1MS4wMDI5Mjk3Yy01LjE0MTExMzMsMC0xMC4wODkzNTU1LTIuODQxNzk2OS0xMi41Mzk1NTA4LTcuNzU0ODgyOGwtNjIuMzM0OTYwOS0xMjUKCQljLTEuOTYxNDI1OC0zLjkzNDU3MDMtMS45NjE0MjU4LTguNTYxNTIzNCwwLTEyLjQ5NTYwNTVsNjIuMzM0OTYwOS0xMjUKCQljMy40NTA2ODM2LTYuOTE5OTIxOSwxMS44NTc0MjE5LTkuNzMxOTMzNiwxOC43NzYzNjcyLTYuMjgxMjVjNi45MTk0MzM2LDMuNDUwNjgzNiw5LjczMTQ0NTMsMTE4LTYuMjgxMjUsMTguNzc2MzY3MgoJClM0OC44Njg2NTIzLDUxMmwtNTkuMjE5NzI2NiwxMTguNzUxOTUzMWMzLjQ1MDE5NTMsNi45MTk5MjE5LDAuNjM4MTgzNiwxNS4zMjYxNzE5LTYuMjgxMjUsMTguNzc2MzY3MgoJCUM5OS44MDEyNjk1LDY1MC41MjkyOTY5LDk3LjY2OTQzMzYsNjUxLjAwMjkyOTcsOTUuNTcwMzEyNSw2NTEuMDAyOTI5N3oiLz4KCTxwYXRoIGQ9Ik05MjkuMjEzODY3Miw2NTEuMDAyOTI5N2MtMi4wOTk2MDk0LDAtNC4yMzA0Njg4LTAuNDczNjMyOC02LjIzNzMwNDctMS40NzQ2MDk0CgkJYy02LjkxODk0NTMtMy40NTAxOTUzLTkuNzMxNDQ1My0xMS44NTY0NDUzLTYuMjgwMjczNC0xOC43NzYzNjcyTDk3NS45MTUwMzkxLDUxMmwtNTkuMjE4NzUtMTE4Ljc1MjQ0MTQKCQljLTMuNDUxMTcxOS02LjkxODk0NTMtMC42Mzg2NzE5LTE1LjMyNTY4MzYsNi4yODAyNzM0LTE4Ljc3NjM2NzJjNi45MTg5NDUzLTMuNDUwMTk1MywxNS4zMjYxNzE5LTAuNjM4NjcxOSwxOC43NzYzNjcyLDYuMjgxMjUKCQlsNjIuMzM0OTYwOSwxMjVjMS45NjE5MTQxMuOTM0MDgyLDEuOTYxOTE0MSw4LjU2MTAzNTIsMCwxMi40OTU2MDU1bC02Mi4zMzQ5NjA5LDEyNQoJCUM5MzkuMzAzNzEwOSw2NDguMTYxMTMyOCw5MzQuMzU0NDkyMiw2NTEuMDAyOTI5Nyw5MjkuMjEzODY3Miw2NTEuMDAyOTI5N3oiLz4KPC9nPgo8ZyBpZD0iQXBwX0ljb25fU2hhcGUiPgoJPGc+CgkJPHBhdGggZD0iTTAsMHYxMDI0aDEwMjRWMHl6IE0xMDIzLjk5OTkzOSw2NTAuOTk5OTM5YzAsMTQuMjQyNzM2OCwwLjAwNTkyMDQsMjguNDgzMjE1My0wLjA4NDA0NTQsNDIuNzI1OTUyMQoJCQljLTAuMDY4OTA4NywxMS45OTYzOTg5LTAuMjA3Mjc1NCwyMy45OTAxNzMzLTAuNTMyMzQ4NiwzNS45ODI5NzEyYy0wLjcwODMxMywyNi4xMzM2MDYtMi4yNDY0Niw1Mi40OTQwNzk2LTYuODkyMDg5OCw3OC4zMzc1ODU0CgkJCWMtNC43MTI3Njg2LDI2LjIxNzE2MzEtMTIuNDAzOTkxNyw1MC42MTc1NTM3LTI0LjUyODg2OTYsNzQuNDM3OTI3MgoJCQljLTExLjkxNzA1MzIsMjMuNDEyMTA5NC0yNy40ODkwMTM3LDQ0LjgzNjk3NTEtNDYuMDY1MTI0NSw2My40MTMwODU5cy00MC4wMDA5NzY2LDM0LjE0ODA3MTMtNjMuNDEzMDg1OSw0Ni4wNjUxMjQ1CgkJCWMtMjMuODIwMzczNSwxMi4xMjQ4Nzc5LTQ4LjIyMDcwMzEsMTkuODE2MDQtNzQuNDM3OTI3MiwyNC41Mjg4Njk2CgkJCWMtMjUuODQzNDQ0OCw0LjY0NTYyOTktNTIuMjAzOTc5NSw2LjE4Mzc3NjktNzguMzM3NTg1NCw2Ljg5MjA4OTgKCQkJYy0xMS45OTI3OTc5LDAuMzI1MDczMi0yMy45ODY1NzIzLDAuNDYzNDM5OS0zNS45ODI5MTAyLDAuNTMyMzQ4NgoJCQljLTE0LjI0MjczNjgsMC4wODk5NjU4LTI4LjQ4MzIxNTMsMC4wODM5ODQ0LTQyLjcyNTk1MjEsMC4wODM5ODQ0SDM3M2MtMTQuMjQyNzM2OCwwLTI4LjQ4MzIxNTMsMC4wMDU5ODE0LTQyLjcyNTk1MjEsLTAuMDgzOTg0NAoJCQljLTExLjk5NjMzNzktMC4wNjg5MDg3LTIzLjk5MDExMjMtMC4yMDcyNzU0LTM1OTgyOTEwMi0wLjUzMjM0ODZjLTI2LjEzMzYwNi0wLjcwODMxMy01Mi40OTQxNDA2LTIuMjQ2NDYtNzguMzM3NTg1NC02Ljg5MjA4OTgKCQkJYy0yNi4yMTcyMjQxLTQuNzEyODI5Ni01MC42MTc1NTM3LTEyLjQwMzk5MTctNzQuNDM3OTI3Mi0yNC41Mjg4Njk2CgkJCWMtMjMuNDEyMTA5NC0xMS45MTcwNTMyLTQ0LjgzNjk3NTEtMjcuNDg5MDEzNy02My40MTMwODU5LTQ2LjA2NTEyNDVzLTM0LjE0ODA3MTMtNDAuMDAwOTc2Ni00Ni4wNjUxMjQ1LTYzLjQxMzA4NTkKCQkJYy0xMi4xMjQ4Nzc5LTIzLjgyMDM3MzUtMTkuODE2MTAxMS00OC4yMjA3NjQyLTI0LjUyODg2OTYtNzQuNDM3OTI3MgoJCQljLTQuNjQ1NjI5OS0yNS44NDM1MDU5LTYuMTgzNzc2OS01Mi4yMDM5Nzk1LTYuODkyMDg5OC03OC4zMzc1ODU0CgkJCWMtMC4zMjUwNzMyLTExLjk5Mjc5NzktMC40NjM0Mzk5LTIzLjk4NjU3MjMtMC41MzIzNDg2LTM1OTgyOTEwMgoJCQljLTAuMDkwMDI2OS0xNC4yNDI3MzY4LTAuMDg0MDQ1NC0yOC40ODMyMTUzLTAuMDg0MDQ1NC00Mi43MjU5NTIxYzYuMjgxMjVsMTIuNzczOTI1OCw4MS4xMjY5NTMxVjI1NS44NDI3NzM0CgkJYzAtNi43MDM2MTMzLDUuMjg4MDg1OS0xMi4yMTM4NjcyLDExLjk4NTgzOTgtMTIuNDg5MjU3OGM2LjY5NDgyNDItMC4yODk1NTA4LDEyLjQyMDg5ODQsNC43ODEyNSwxMi45NzE2Nzk3LDExLjQ2MTkxNDEKCQlsMjguNDk5NTExNywzNDUuNTM1MTU2MmwyNy4yNjMxODM2LTI5OS4wNjgzNTk0YzAuNTg0NDcyNy02LjQxMTYyMTEsNS45NDMzNTk0LTExLjMzMTA1NDcsMTIuMzgxODM1OS0xMS4zNjUyMzQ0CgkJYzYuMzkzMDY2NC0wLjAyMDAxOTUsMTEuODQ5MTIxMSw0LjgyODEyNSwxMi41MDE5NTMxLDExLjIzMjkxMDJsMjguNjc1MjkzLDI4MS40NDY3NzczbDI3LjE0MDEzNjctMjM1LjA0MDAzOTEKCQljMC43MjM2MzI4LTYuMjY1MTM2Nyw2LjAwMDk3NjYtMTEuMDEwMjUzOSwxMi4zMDgxMDU1LTExLjA2NTQyOTdjNi4zMjEyODkxLTAuMDY2ODk0NSwxMS42NjY5OTIyLDQuNTk2Njc5NywxMi41LDEwLjg0ODYzMjgKCQlsMjguOTc1MDk3NywyMTcuNDcwNzAzMWwyNi45NTUwNzgxLTE3MS4xODk5NDE0YzAuOTQ0MzM1OS01Ljk5ODUzNTIsNi4wNjM0NzY2LTEwLjQ1MDY4MzYsMTIuMTM1NzQyMi0xMC41NTM3MTA5CgkJYzYuMDY5MzM1OS0wLjEzMTM0NzcsMTEuMzM4ODY3Miw0LjE3MjM2MzMsMTIuNDg2MzI4MSwxMC4xMzU3NDIyTDU5NC45Nzk0OTIyLDU0Ni45Mzc1bDI2LjY3MzgyODEtMTA3LjgwMDc4MTIKCQljMS4zMjkxMDE2LTUuMzc0MDIzNCw2LjAzNTE1NjItOS4yMzI5MTAyLDExLjU2NTQyOTctOS40ODQzNzVjNS41NDk4MDQ3LTAuMjQ3MDcwMywxMC41NjczODI4LDMuMTY0NTUwOCwxMi4zNzk4ODI4LDguMzk1NTA3OAoJCWwzMS4zNzc5Mjk3LDkwLjU4MTA1NDdsMjYuNjU0Mjk2OS00Ni4xNjYwMTU2YzEuNjU3MjI2Ni0yLjg3MTA5MzgsNC4zODc2OTUzLTQuOTY2MzA4Niw3LjU4OTg0MzgtNS44MjQyMTg4CgkJYzMuMjAzMTI1LTAuODU2OTMzNiw2LjYxNDI1NzgtMC40MDkxNzk3LDkuNDg1MzUxNiwxLjI0OTAyMzRsMjguODIxMjg5MSwxNi42NDA2MjUKCQlDNzU1LjE2MTEzMjgsNDk3Ljc4MDc2MTcsNzYxLjU3ODEyNSw0OTkuNSw3NjguMDgzMDA3OCw0OTkuNSw3NjguMDgzMDA3OCw0OTkuNWgxMjguNzAxMTcxOWM2LjkwMzMyMDMsMCwxMi41LDUuNTk2Njc5NywxMi41LDEyLjUKCQlzLTUuNTk2Njc5NywxMi41LTEyLjUsMTIuNUg3NjguMDgzMDA3OGMtMTAuODg2NzE4OCwwLTIxLjYyNTk3NjYtMi44NzY5NTMxLTMxLjA1NTY2NDEtOC4zMjEyODkxTDcxOS4wMzEyNSw1MDUuNzg4NTc0MgoJCWwtMzQuMDg0OTYwOSw1OS4wMzU2NDQ1Yy0yLjQ0NjI4OTEsNC4yMzYzMjgxLTcuMTM3Njk1Myw2LjY1ODIwMzEtMTIuMDExNzE4OCw2LjE5MzM1OTQKCQljLTQuODcxMDkzOC0wLjQ2Mzg2NzItOS4wMjM0Mzc1LTMuNzI4NTE1Ni0xMC42MjUtOC4zNTE1NjI1bC0yNi41MjI0NjA5LTc2LjU2NTkxOGwtMzAuMjAwMTk1MywxMjIuMDUwMjkzCgkJYy0xLjM4MjgxMjUsNS41OTA4MjAzLTYuMzk5NDE0MSw5LjQ5ODA0NjktMTIuMTMwODU5NCw5LjQ5ODA0NjljLTAuMTA5Mzc1LDAtMC4yMTk3MjY2LTAuMDAwOTc2Ni0wLjMzMTA1NDctMC4wMDM5MDYyCgkJYy01Ljg2NzE4NzUtMC4xNTQyOTY5LTEwLjgzNjkxNDEtNC4zNzAxMTcyLTExLjk0NjI4OTEtMTAuMTMzNzg5MWwtMjYuODI5MTAxNi0xMzkuNDAzMzIwM2wtMjkuMjE3NzczNCwxODUuNTU4NTkzOAoJCWMtMC45NTgwMDc4LDYuMDgzOTg0NC02LjIwMTE3MTksMTAuNTU1NjY0MS0xMi4zNDUyMTQ4DEwLjU1NTY2NDFjLTAuMDUwMjkzLDAtMC4xMDAwOTc3LDAtMC4xNTA4Nzg5LTAuMDAwOTc2NgoJCWMtNi4yMDg0OTYxLTAuMDczMjQyMi0xMS40MjE4NzUtNC42OTMzNTk0LTEyLjI0MjE4NzUtMTAuODQ4NjMyOGwtMjcuMDU3NjE3Mi0yMDMuMDgyNTE5NWwtMjguODAyNzM0NCwyNDkuNDM5OTQxNAoJCWMtMC43Mjg1MTU2LDYuMzEwNTQ2OS02LjA3MzI0MjIsMTEuMDY1NDI5Ny0xMi40MTYwMTU2LDExLjA2NjQwNjJjLTAuMDI4ODA4NiwwLTAuMDU2NjQwNiwwLTAuMDg1NDQ5MiwwCgkJYy02LjM4MDg1OTQtMC4wNDI5Njg4LTExLjcwNDU4OTgtNC44ODQ3NjU2LTEyLjM1MTU2MjUtMTEuMjMzMzk4NGwtMjcuMjA3NTE5NS0yNjcuMDM4NTc0MmwtMjguNTc3MTQ4NCwzMTMuNDgwOTU3CgkJYy0wLjU4NjkxNDEsNi40Mzk0NTMxLTUuOTg3NzkzLDExLjM2NDI1NzgtMTIuNDQ3MjY1NiwxMS4zNjUyMzQ0Yy0wLjAxODU1NDcsMC0wLjAzNjEzMjgsMC0wLjA1NDY4NzUsMAoJCWMtNi40ODQ4NjMzLTAuMDI4MzIwMy0xMS44NzEwOTM4LTUuMDA5NzY1Ni0xMi40MDM4MDg2LTExLjQ3MjY1NjJMMzIzLjYxMjc5Myw1NTkuNDY1ODIwM3YyMDguNjkxNDA2MgoJCWMwLDYuNTI1MzkwNi01LjAxOTUzMTIsMTEuOTUzMTI1LTExLjUyNDkwMjMsMTIuNDYxOTE0MUMzMTEuNzU3ODEyNSw3ODAuNjQ0NTMxMiwzMTEuNDI4MjIyNyw3ODAuNjU4MjAzMSwzMTEuMTAyMDUwOCw3ODAuNjU4MjAzMQoJCXoiLz4KPC9nPgo8L3N2Zz4K" />

    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI3LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTAyNCAxMDI0OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cjx1YXR0ZXJuICB3aWR0aD0iODIuMDc4MDk0NSIgaGVpZ2h0PSI4Mi4wNzg1OTgiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJVbm5hbWVkX1BhdHRlcm5fMSIgdmlld0JveD0iNDMuNzkzNDk5IC04Ny43Nzc4MDE1IDgyLjA3ODA5NDUgODIuMDc4NTk4IiBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiPgoJPGc+CgkJPHJlY3QgeD0iNDMuNzkzNDk5IiB5PSItODcuNzc3ODAxNSIgc3R5bGU9ImZpbGw6bm9uZTsiIHdpZHRoPSI4Mi4wNzgwOTQ1IiBoZWlnaHQ9IjgyLjA3ODU5OCIvPgoJCTxyZWN0IHg9IjQzLjc5MzQ5OSIgeT0iLTg3Ljc3NzgwMTUiIHN0eWxlPSJmaWxsOiNCQ0JFQzA7IiB3aWR0aD0iODIuMDc4MDk0NSIgaGVpZ2h0PSI4Mi4wNzg1OTgiLz4KCQk8bGluZSBzdHlsZT0iZmlsbDojRkZGRkZGOyIgeDE9IjI1LjkzNDA5OTIiIHkxPSItMTAuMjU5OCIgeDI9IjMwLjQ5MjcwMDYiIHkyPSItNS42OTkyMDAyIi8+CgkJPGxpbmUgc3R5bGU9ImZpbGw6I0ZGRkZGRjsiIHgxPSIyNS45MzQwOTkyIiB5MT0iLTUuNjk5MjAwMiIgeDI9IjMwLjQ5MjcwMDYiIHkyPSItMTAuMjU5OCIvPgoJCTxyZWN0IHg9IjM4LjA5NDIwMDEiIHk9Ii00Ny44NzgzOTg5IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjkxLjE5NzI5NjEiIGhlaWdodD0iNC41NTk5OTk5Ii8+CgkJPHJlY3QgeD0iMzguMDk0MjAwMSIgeT0iLTIwLjUxOTUwMDciIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iOTEuMTk3Mjk2MSIgaGVpZ2h0PSI0LjU2MDUwMDEiLz4KCQk8cmVjdCB4PSIzOC4wOTQyMDAxIiB5PSItNzUuMjM3ODAwNiIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI5MS4xOTcyOTYxIiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjM4LjA5NDIwMDEiIHk9Ii01Ni45OTg1MDA4IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjkxLjE5NzI5NjEiIGhlaWdodD0iNC41NTk1MDAyIi8+CgkJPHJlY3QgeD0iMzguMDk0MjAwMSIgeT0iLTI5LjYzODcwMDUiIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iOTEuMTk3Mjk2MSIgaGVpZ2h0PSI0LjU2MDU5OTgiLz4KCQk8cmVjdCB4PSIzOC4wOTQyMDAxIiB5PSItODQuMzU3OTAyNSIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI5MS4xOTcyOTYxIiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjE2LjgxMjk5OTciIHk9Ii03NS4yMzc4MDA2IiBzdHlsZT0iZmlsbDojQTdBOUFDOyIgd2lkdGg9IjkuMTIxMTAwNCIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSI4MS40MTI1OTc3IiB5PSItOTEuMTk3Nzk5NyIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI0LjU2MDUwMDEiIGhlaWdodD0iOTEuMTk3Nzk5NyIvPgoJCTxyZWN0IHg9IjEwOC43NzIwMDMyIiB5PSItOT.MTk3Nzk5NyIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI0LjU2MDQ5NzMiIGhlaWdodD0iOTEuMTk3Nzk5NyIvPgoJCTxyZWN0IHg9IjU0LjA1MzE5OTgiIHk9Ii05MS4xOTc3OTk3IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI5MS4xOTc3OTk3Ii8+CgkJPHJlY3QgeD0iOTAuNTMxNzAwMSIgeT0iLTkxLjE5Nzc5OTciIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjkxLjE5Nzc5OTciLz4KCQk8cmVjdCB4PSIxMTcuODkxMDk4IiB5PSItOTEuMTk3Nzk5NyIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iOTEuMTk3Nzk5NyIvPgoJCTxyZWN0IHg9IjYzLjE3MjQwMTQiIHk9Ii05MS4xOTc3OTk3IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI5MS4xOTc3OTk3Ii8+CgkJPHJlY3QgeD0iMTAuNzM0OTAwNSIgeT0iLTg1Ljg3NzQwMzMiIHN0eWxlPSJmaWxsOiNBN0E5QUM7IiB3aWR0aD0iNC41NTg1OTk5IiBoZWlnaHQ9IjkuMTE5MDk5NiIvPgoJCQoJCQk8bGluZSBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMjMxRjIwO3N0cm9rZS13aWR0aDowLjk1O3N0cm9rZS1saW5lY2FwOnNxdWFyZTsiIHgxPSI0Mi45ODY4MDExIiB5MT0iLTM2LjQ3ODUwMDQiIHgyPSIxMjYuNjMxMjk0MyIgeTI9Ii0zNi40Nzg1MDA0Ii8+CgkJCgkJCTxsaW5lIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyMzFGMjA7c3Ryb2tlLXdpZHRoOjAuOTU7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlOyIgeDE9IjQyLjk4NjgwMTEiIHkxPSItOS4xMTkwOTk2IiB4Mj0iMTI2LjYzMTI5NDMiIHkyPSItOS4xMTkwOTk2Ii8+CgkJCgkJCTxsaW5lIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMyMzFGMjA7c3Ryb2tlLXdpZHRoOjAuOTU7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlOyIgeDE9IjQyLjk4NjgwMTEiIHkxPSItNjMuODM4NDAxOCIgeDI9IjEyNi42MzEyOTQzIiB5Mj0iLTYzLjgzODQwMTgiLz4KCQkKCQkJPGxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzIzMUYyMDtzdHJva2Utd2lkdGg6MC45NTtzdHJva2UtbGluZWNhcDpzcXVhcmU7IiB4MT0iMC40NzUxIiB5MT0iLTYzLjgzODQwMTgiIHgyPSIzMS4yNTQ0MDAzIiB5Mj0iLTYzLjgzODQwMTgiLz4KCQkKCQkJPGxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzIzMUYyMDtzdHJva2Utd2lkdGg6MC45NTtzdHJva2UtbGluZWNhcDpzcXVhcmU7IiB4MT0iNzQuNTcyNzk5NyIgeTE9Ii04OC41Mzc1OTc3IiB4Mj0iNzQuNTcyNzk5NyIgeTI9Ii00Ljg5MjYwMDEiLz4KCQkKCQkJPGxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzIzMUYyMDtzdHJva2Utd2lkdGg6MC45NTtzdHJva2UtbGluZWNhcDpzcXVhcmU7IiB4MT0iMTAxLjkzMjA5ODQiIHkxPSItODguNTM3NTk3NyIgeDI9IjEwMS45MzIwOTg0IiB5Mj0iLTQuODkyNjAwMSIvPgoJCQoJCQk8bGluZSBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMjMxRjIwO3N0cm9rZS13aWR0aDowLjk1O3N0cm9rZS1saW5lY2FwOnNxdWFyZTsiIHgxPSI0Ny4yMTM0MDE4IiB5MT0iLTg4LjUzNzU5NzciIHgyPSI0Ny4yMTM0MDE4IiB5Mj0iLTQuODkyNjAwMSIvPgoJCQoJCQk8bGluZSBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMjMxRjIwO3N0cm9rZS13aWR0aDowLjk1O3N0cm9rZS1saW5lY2FwOnNxdWFyZTsiIHgxPSIzLjg5MzEiIHkxPSItOTEuMTk3Nzk5NyIgeDI9IjMuODkzMSIgeTI9Ii02MC40MTg0OTkiLz4KCQk8cmVjdCB4PSIxMC43MzQ5MDA1IiB5PSItNzUuMjM3ODAwNiIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU1ODU5OTkiIGhlaWdodD0iNC41NTk1OTk5Ii8+CgkJPHJlY3QgeD0iNTQuMDUzMTk5OCIgeT0iLTc1LjIzNzgwMDYiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjYzLjE3MjQwMTQiIHk9Ii04NC4zNTc5MDI1IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSI2My4xNzI0MDE0IiB5PSItNzUuMjM3ODAwNiIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDUwMDEiIGhlaWdodD0iNC41NTk1OTk5Ii8+CgkJPHJlY3QgeD0iNTQuMDUzMTk5OCIgeT0iLTg0LjM1NzkwMjUiIHN0eWxlPSJmaWxsOiM4MDgyODU7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjgxLjQxMjU5NzciIHk9Ii03NS4yMzc4MDA2IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSItODQuMzU3OTAyNSIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iNC41NTk1OTk5Ii8+CgkJPHJlY3QgeD0iOTAuNTMxNzAwMSIgeT0iLTc1LjIzNzgwMDYiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjgxLjQxMjU5NzciIHk9Ii04NC4zNTc5MDI1IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSIxMDguNzcyMDAzMiIgeT0iLTc1LjIzNzgwMDYiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA0OTczIiBoZWlnaHQ9IjQuNTU5NTk5OSIvPgoJCTxyZWN0IHg9IjExNy44OTEwOTgiIHk9Ii04NC4zNTc5MDI1IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSIxMTcuODkxMDk4IiB5PSItNzUuMjM3ODAwNiIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iNC41NTk1OTk5Ii8+CgkJPHJlY3QgeD0iMTA4Ljc3MjAwMzIiIHk9Ii04NC4zNTc5MDI1IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNDk3MyIgaGVpZ2h0PSI0LjU1OTU5OTkiLz4KCQk8cmVjdCB4PSI1NC4wNTMzMTk5OCIgeT0iLTQ3Ljg3ODM5ODkiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5OTk5OSIvPgoJCTxyZWN0IHg9IjYzLjE3MjQwMTQiIHk9Ii01Ni45OTg1MDA4IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTUwMDIiLz4KCQk8cmVjdCB4PSI2My4xNzI0MDE0IiB5PSItNDcuODc4Mzk4OSIgc3R5bGU9ImZpbGw6IzNENEQ0RjsiIHdpZHRoPSI0LjU2MDUwMDEiIGhlaWdodD0iNC41NTk5OTk5Ii8+CgkJPHJlY3QgeD0iNTQuMDUzMTk5OCIgeT0iLTU2Ljk5ODUwMDgiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTAwMiIvPgoJCTxyZWN0IHg9IjgxLjQxMjU5NzciIHk9Ii00Ny44NzgzOTg5IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU1OTk5OTkiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSItNTYuOTk4NTAwOCIgc3R5bGU9ImZpbGw6IzNENEQ0Rjsigd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU1OTUwMDIiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSItNDcuODc4Mzk4OSIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iNC41NTk5OTk5Ii8+CgkJPHJlY3QgeD0iODEuNDEyNTk3NyIgeT0iLTU2Ljk5ODUwMDgiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1MDAxIiBoZWlnaHQ9IjQuNTU5NTAwMiIvPgoJCTxyZWN0IHg9IjEwOC43NzIwMDMyIiB5PSItNDcuODc4Mzk4OSIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDQ5NzMiIGhlaWdodD0iNC41NTk5OTk5Ii8+CgkJPHJlY3QgeD0iMTE3Ljg5MTA5OCIgeT0iLTU2Ljk5ODUwMDgiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTU5NTAwMiIvPgoJCTxyZWN0IHg9IjExNy44OTEwOTgiIHk9Ii00Ny44NzgzOTg5IiBzdHlsZT0iZmlsbDojM2Q0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU1OTk5OTkiLz4KCQk8cmVjdCB4PSIxMDguNzcyMDAzMiIgeT0iLTU2Ljk5ODUwMDgiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA0OTczIiBoZWlnaHQ9IjQuNTU5NTAwMiIvPgoJCTxyZWN0IHg9IjU0LjA1MzE5OTgiIHk9Ii0yMC41MTk1MDA3IiBzdHlsZT0iZmlsbDojM2Q0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDUwMDEiLz4KCQk8cmVjdCB4PSI2My4xNzI0MDE0IiB5PSIyOS42Mzg3MDA1IiBzdHlsZT0iZmlsbDojM2Q0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDU5OTkiLz4KCQk8cmVjdCB4PSI2My4xNzI0MDE0IiB5PSItMjAuNTE5NTAwNyIgc3R5bGU9ImZpbGw6IzgwODI4NTsiIHdpZHRoPSI0LjU2MDUwMDEiIGhlaWdodD0iNC41NjA1MDAxIi8+CgkJPHJlY3QgeD0iNTQuMDUzMTk5OCIgeT0iMjkuNjM4NzAwNSIgc3R5bGU9ImZpbGw6IzRENEQ0RjsiIHdpZHRoPSI0LjU2MDU5OTgiIGhlaWdodD0iNC41NjA1OTk5Ii8+CgkJPHJlY3QgeD0iODEuNDEyNTk3NyIgeT0iLTIwLjUxOTUwMDciIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1MDAxIiBoZWlnaHQ9IjQuNTU2MDUwMDEiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSIyOS42Mzg3MDA1IiBzdHlsZT0iZmlsbDojODA4Mjg1OyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDU5OTgiLz4KCQk8cmVjdCB4PSI5MC41MzE3MDAxIiB5PSItMjAuNTE5NTAwNyIgc3R5bGU9ImZpbGw6IzNENEQ0Rjsigd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDUwMDEiLz4KCQk8cmVjdCB4PSI4MS40MTI1OTc3IiB5PSIyOS42Mzg3MDA1IiBzdHlsZT0iZmlsbDojM2Q0RDRGOyIgd2lkdGg9IjQuNTYwNTAwMSIgaGVpZ2h0PSI0LjU2MDU5OTkiLz4KCQk8cmVjdCB4PSIxMDguNzcyMDAzMiIgeT0iLTIwLjUxOTUwMDciIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA0OTczIiBoZWlnaHQ9IjQuNTYwNTAwMSIvPgoJCTxyZWN0IHg9IjExNy44OTEwOTgiIHk9IjI5LjYzODcwMDUiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA1OTk4IiBoZWlnaHQ9IjQuNTYwNTk5OCIvPgoJCTxyZWN0IHg9IjExNy44OTEwOTgiIHk9Ii0yMC41MTk1MDA3IiBzdHlsZT0iZmlsbDojNEQ0RDRGOyIgd2lkdGg9IjQuNTYwNTk5OCIgaGVpZ2h0PSI0LjU2MDUwMDEiLz4KCQk8cmVjdCB4PSIxMDguNzcyMDAzMiIgeT0iLTI5LjYzODcwMDUiIHN0eWxlPSJmaWxsOiM0RDRENEY7IiB3aWR0aD0iNC41NjA0OTczIiBoZWlnaHQ9IjQuNTYwNTk5OCIvPgoJPC9nPgo8L3BhdHRlcm4+CjxnIGlkPSJCYWNrZ3JvdW5kIj4KCQoKCQk8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lkXzFfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjEzNy4wODcxNDI5IiB5MT0iMTAuMDUwNTU2MiIgeDI9Ijg4OC43MDY2MDQiIHkyPSIxMDE2LjM1MDk1MjEiPgoJCTxzdG9wICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiMxRkNCRTciLz4KCQk8c3RvcCAgb2Zmc2V0PSIwLjUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3ODgxRUYiLz4KCQk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojQ0M1RERDIi8+Cgk8L2xpbmVhckdyYWRpZW50PgoJPHJlY3Qgc3R5bGU9ImZpbGw6dXJsKCNTVkdJZF8xXyk7IiB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0Ii8+Cgk8ZyBpZD0iQXJyb3dfMjUiPgoJPC9nPgoJPGcgaWQ9IkFycm93XzIiPgoJPC9nPgo8L2c+CjxnIGlkPSJfeDMxX19fX3gyMDEzX19MYXllciI+Cgk8cGF0aCBzdHlsZT0iZmlsbDojRkZGRkZGOyIgZD0iTTMxMS4xMDIwNTA4LDc4MC42NTgyMDMxYy02LjA5NzE2OCwwLTExLjM3MzUzNTItNC40Mzg0NzY2LTEyLjMzNjkxNDEtMTAuNTU2NjQwNgoJCWwtMzcuNjIyNTU4Ni0yMzguOTMxNjQwNkMyNjAuNTM0NjY4LDUyNy4zMDQ2ODc1LDI1Ny4yNTM0MTgsNTI0LjUsMjUzLjM0MDgyMDMsNTI0LjVIMTI4Ljc4NDE3OTcKCQljLTYuOTAzMzIwMywwLTEyLjUtNS41OTY2Nzk3LTEyLjUtMTIuNXM1LjU5NjY3OTctMTIuNSwxMi41LTEyLjVoMTI0LjU1NjY0MDYKCQljMTYuMjk2Mzg2NywwLDI5Ljk2MzM3ODksMTEuNjg0MDgyLDMyLjQ5ODA0NjksMjcuNzgxMjVsMTIuNzczOTI1OCw4MS4xMjY5NTMxVjI1NS44NDI3NzM0CgkJYzAtNi43MDM2MTMzLDUuMjg4MDg1OS0xMi4yMTM4NjcyLDExLjk4NTgzOTgtMTIuNDg5MjU3OGM2LjY5NDgyNDItMC4yODk1NTA4LDEyLjQyMDg5ODQsNC43ODEyNSwxMi45NzE2Nzk3LDExLjQ2MTkxNDEKCQlsMjguNDk5NTExNywzNDUuNTM1MTU2MmwyNy4yNjMxODM2LTI5OS4wNjgzNTk0YzAuNTg0NDcyNy02LjQxMTYyMTEsNS45NDMzNTk0LTExLjMzMTA1NDcsMTIuMzgxODM1OS0xMS4zNjUyMzQ0CgkJYzYuMDY5MzM1OS0wLjAyMDAxOTUsMTEuODQ5MTIxMSw0LjgyODEyNSwxMi41MDE5NTMxLDExLjIzMjkxMDJsMjguNjc1MjkzLDI4MS40NDY3NzczbDI3LjE0MDEzNjctMjM1LjA0MDAzOTEKCQljMC43MjM2MzI4LTYuMjY1MTM2Nyw2LjAwMDk3NjYtMTEuMDEwMjUzOSwxMi4zMDgxMDU1LTExLjA2NTQyOTdjNi4zMjEyODkxLTAuMDY2ODk0NSwxMS42NjY5OTIyLDQuNTk2Njc5NywxMi41LDEwLjg0ODYzMjgKCQlsMjguOTc1MDk3NywyMTcuNDcwNzAzMWwyNi45NTUwNzgxLTE3MS4xODk5NDE0YzAuOTQ0MzM1OS01Ljk5ODUzNTIsNi4wNjM0NzY2LTEwLjQ1MDY4MzYsMTIuMTM1NzQyMi0xMC41NTM3MTA5CgkJYzYuMDY5MzM1OS0wLjEzMTM0NzcsMTEuMzM4ODY3Miw0LjE3MjM2MzMsMTIuNDg2MzI4MSwxMC4xMzU3NDIyTDU5NC45Nzk0OTIyLDU0Ni45Mzc1bDI2LjY3MzgyODEtMTA3LjgwMDc4MTIKCQljMS4zMjkxMDE2LTUuMzc0MDIzNCw2LjAzNTE1NjItOS4yMzI5MTAyLDExLjU2NTQyOTctOS40ODQzNzVjNS41NDk4MDQ3LTAuMjQ3MDcwMywxMC41NjczODI4LDMuMTY0NTUwOCwxMi4zNzk4ODI4LDguMzk1NTA3OAoJCWwzMS4zNzc5Mjk3LDkwLjU4MTA1NDdsMjYuNjU0Mjk2OS00Ni4xNjYwMTU2YzEuNjU3MjI2Ni0yLjg3MTA5MzgsNC4zODc2OTUzLTQuOTY2MzA4Niw3LjU4OTg0MzgtNS44MjQyMTg4CgkJYzMuMjAzMTI1LTAuODU2OTMzNiw2LjYxNDI1NzgtMC40MDkxNzk3LDkuNDg1MzUxNiwxLjI0OTAyMzRsMjguODIxMjg5MSwxNi42NDA2MjUKCQlDNzU1LjE2MTEzMjgsNDk3Ljc4MDc2MTcsNzYxLjU3ODEyNSw0OTkuNSw3NjguMDgzMDA3OCw0OTkuNSw3NjguMDgzMDA3OCw0OTkuNWgxMjguNzAxMTcxOWM2LjkwMzMyMDMsMCwxMi41LDUuNTk2Njc5NywxMi41LDEyLjUKCQlzLTUuNTk2Njc5NywxMi41LTEyLjUsMTIuNUg3NjguMDgzMDA3OGMtMTAuODg2NzE4OCwwLTIxLjYyNTk3NjYtMi44NzY5NTMxLTMxLjA1NTY2NDEtOC4zMjEyODkxTDcxOS4wMzEyNSw1MDUuNzg4NTc0MgoJCWwtMzQuMDg0OTYwOSw1OS4wMzU2NDQ1Yy0yLjQ0NjI4OTEsNC4yMzYzMjgxLTcuMTM3Njk1Myw2LjY1ODIwMzEtMTIuMDExNzE4OCw2LjE5MzM1OTQKCQljLTQuODcxMDkzOC0wLjQ2Mzg2NzItOS4wMjM0Mzc1LTMuNzI4NTE1Ni0xMC42MjUtOC4zNTE1NjI1bC0yNi41MjI0NjA5LTc2LjU2NTkxOGwtMzAuMjAwMTk1MywxMjIuMDUwMjkzCgkJYy0xLjM4MjgxMjUsNS41OTA4MjAzLTYuMzk5NDE0MSw5LjQ5ODA0NjktMTIuMTMwODU5NCw5LjQ5ODA0NjljLTAuMTA5Mzc1LDAtMC4yMTk3MjY2LTAuMDAwOTc2Ni0wLjMzMTA1NDctMC4wMDM5MDYyCgkJYy01Ljg2NzE4NzUtMC4xNTQyOTY5LTEwLjgzNjkxNDEtNC4zNzAxMTcyLTExLjk0NjI4OTEtMTAuMTMzNzg5MWwtMjYuODI5MTAxNi0xMzkuNDAzMzIwM2wtMjkuMjE3NzczNCwxODUuNTU4NTkzOAoJCWMtMC45NTgwMDc4LDYuMDgzOTg0NC02LjIwMTE3MTksMTAuNTU1NjY0MS0xMi4zNDUyMTQ4DEwLjU1NTY2NDFjLTAuMDUwMjkzLDAtMC4xMDAwOTc3LDAtMC4xNTA4Nzg5LTAuMDAwOTc2NgoJCWMtNi4yMDg0OTYxLTAuMDczMjQyMi0xMS40MjE4NzUtNC42OTMzNTk0LTEyLjI0MjE4NzUtMTAuODQ4NjMyOGwtMjcuMDU3NjE3Mi0yMDMuMDgyNTE5NWwtMjguODAyNzM0NCwyNDkuNDM5OTQxNAoJCWMtMC43Mjg1MTU2LDYuMzEwNTQ2OS02LjA3MzI0MjIsMTEuMDY1NDI5Ny0xMi40MTYwMTU2LDExLjA2NjQwNjJjLTAuMDI4ODA4NiwwLTAuMDU2NjQwNiwwLTAuMDg1NDQ5MiwwCgkJYy02LjM4MDg1OTQtMC4wNDI5Njg4LTExLjcwNDU4OTgtNC44ODQ3NjU2LTEyLjM1MTU2MjUtMTEuMjMzMzk4NGwtMjcuMjA3NTE5NS0yNjcuMDM4NTc0MmwtMjguNTc3MTQ4NCwzMTMuNDgwOTU3CgkJYy0wLjU4NjkxNDEsNi40Mzk0NTMxLTUuOTg3NzkzLDExLjM2NDI1NzgtMTIuNDQ3MjY1NiwxMS4zNjUyMzQ0Yy0wLjAxODU1NDcsMC0wLjAzNjEzMjgsMC0wLjA1NDY4NzUsMAoJCWMtNi40ODQ4NjMzLTAuMDI4MzIwMy0xMS44NzEwOTM4LTUuMDA5NzY1Ni0xMi40MDM4MDg2LTExLjQ3MjY1NjJMMzIzLjYxMjc5Myw1NTkuNDY1ODIwM3YyMDguNjkxNDA2MgoJCWMwLDYuNTI1MzkwNi01LjAxOTUzMTIsMTEuOTUzMTI1LTExLjUyNDkwMjMsMTIuNDYxOTE0MUMzMTEuNzU3ODEyNSw3ODAuNjQ0NTMxMiwzMTEuNDI4MjIyNyw3ODAuNjU4MjAzMSwzMTEuMTAyMDUwOCw3ODAuNjU4MjAzMQoJCXoiLz4KPC9nPgo8ZyBpZD0iX3gyX19fX3gyMDEzX19MYXllciI+Cgk8cmVjdCB4PSIwIiB5PSItMC4wMDAwMDgiIHN0eWxlPSJmaWxsOiNGQUNDMTQ7IiB3aWR0aD0iMTI4Ljc4NDIyNTUiIGhlaWdodD0iMTAyNCIvPgoJCgk8cmVjdCB4PSI4OTYuNzg0MjQwNyIgeT0iLTAuMDAwMDA4IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAtMS4yMjQ2NDdlLTE2IDEuMjI0NjQ3ZS0xNiAtMSAxOTIwLjc4NDE3OTcgMTAyNCkiIHN0eWxlPSJmaWxsOiNGQUNDMTQ7IiB3aWR0aD0iMTI3LjIxNTc4MjIiIGhlaWdodD0iMTAyNCIvPgo8L2c+CjxnIGlkPSJfeDNfX19feDIwMTNfX0xheWVyIj4KCTxwYXRoIGQ9Ik05NS41NzAzMTI1LDY1MS4wMDI5Mjk3Yy01LjE0MTExMzMsMC0xMC4wODkzNTU1LTIuODQxNzk2OS0xMi41Mzk1NTA4LTcuNzU0ODgyOGwtNjIuMzM0OTYwOS0xMjUKCQljLTEuOTYxNDI1OC0zLjkzNDU3MDMtMS45NjE0MjU4LTguNTYxNTIzNCwwLTEyLjQ5NTYwNTVsNjIuMzM0OTYwOS0xMjUKCQljMy40NTA2ODM2LTYuOTE5OTIxOSwxMS44NTc0MjE5LTkuNzMxOTMzNiwxOC43NzYzNjcyLTYuMjgxMjVjNi45MTk0MzM2LDMuNDUwNjgzNiw5LjczMTQ0NTMsMTE4LTYuMjgxMjUsMTguNzc2MzY3MgoJClM0OC44Njg2NTIzLDUxMmwtNTkuMjE5NzI2NiwxMTguNzUxOTUzMWMzLjQ1MDE5NTMsNi45MTk5MjE5LDAuNjM4MTgzNiwxNS4zMjYxNzE5LTYuMjgxMjUsMTguNzc2MzY3MgoJCUM5OS44MDEyNjk1LDY1MC41MjkyOTY5LDk3LjY2OTQzMzYsNjUxLjAwMjkyOTcsOTUuNTcwMzEyNSw2NTEuMDAyOTI5N3oiLz4KCTxwYXRoIGQ9Ik05MjkuMjEzODY3Miw2NTEuMDAyOTI5N2MtMi4wOTk2MDk0LDAtNC4yMzA0Njg4LTAuNDczNjMyOC02LjIzNzMwNDctMS40NzQ2MDk0CgkJYy02LjkxODk0NTMtMy40NTAxOTUzLTkuNzMxNDQ1My0xMS44NTY0NDUzLTYuMjgwMjczNC0xOC43NzYzNjcyTDk3NS45MTUwMzkxLDUxMmwtNTkuMjE4NzUtMTE4Ljc1MjQ0MTQKCQljLTMuNDUxMTcxOS02LjkxODk0NTMtMC42Mzg2NzE5LTE1LjMyNTY4MzYsNi4yODAyNzM0LTE4Ljc3NjM2NzJjNi45MTg5NDUzLTMuNDUwMTk1MywxNS4zMjYxNzE5LTAuNjM4NjcxOSwxOC43NzYzNjcyLDYuMjgxMjUKCQlsNjIuMzM0OTYwOSwxMjVjMS45NjE5MTQxLDMuOTM0MDgyLDEuOTYxOTE0MSw4LjU2MTAzNTIsMCwxMi40OTU2MDU1bC02Mi4zMzQ5NjA5LDEyNQoJCUM5MzkuMzAzNzEwOSw2NDguMTYxMTMyOCw5MzQuMzU0NDkyMiw2NTEuMDAyOTI5Nyw5MjkuMjEzODY3Miw2NTEuMDAyOTI5N3oiLz4KPC9nPgo8ZyBpZD0iQXBwX0ljb25fU2hhcGUiPgoJPGc+CgkJPHBhdGggZD0iTTAsMHYxMDI0aDEwMjRWMHl6IE0xMDIzLjk5OTkzOSw2NTAuOTk5OTM5YzAsMTQuMjQyNzM2OCwwLjAwNTkyMDQsMjguNDgzMjE1My0wLjA4NDA0NTQsNDIuNzI1OTUyMQoJCQljLTAuMDY4OTA4NywxMS45OTYzOTg5LTAuMjA3Mjc1NCwyMy45OTAxNzMzLTAuNTMyMzQ4NiwzNS45ODI5NzEyYy0wLjcwODMxMywyNi4xMzM2MDYtMi4yNDY0Niw1Mi40OTQwNzk2LTYuODkyMDg5OCw3OC4zMzc1ODU0CgkJCWMtNC43MTI3Njg2LDI2LjIxNzE2MzEtMTIuNDAzOTkxNyw1MC42MTc1NTM3LTI0LjUyODg2OTYsNzQuNDM3OTI3MgoJCQljLTExLjkxNzA1MzIsMjMuNDEyMTA5NC0yNy40ODkwMTM3LDQ0LjgzNjk3NTEtNDYuMDY1MTI0NSw2My40MTMwODU5cy00MC4wMDA5NzY2LDM0LjE0ODA3MTMtNjMuNDEzMDg1OSw0Ni4wNjUxMjQ1CgkJCWMtMjMuODIwMzczNSwxMi4xMjQ4Nzc5LTQ4LjIyMDcwMzEsMTkuODE2MDQtNzQuNDM3OTI3MiwyNC41Mjg4Njk2CgkJCWMtMjUuODQzNDQ0OCw0LjY0NTYyOTktNTIuMjAzOTc5NSw2LjE4Mzc3NjktNzguMzM3NTg1NCw2Ljg5MjA4OTgKCQkJYy0xMS45OTI3OTc5LDAuMzI1MDczMi0yMy45ODY1NzIzLDAuNDYzNDM5OS0zNS45ODI5MTAyLDAuNTMyMzQ4NgoJCQljLTE0LjI0MjczNjgsMC4wODk5NjU4LTI4LjQ4MzIxNTMsMC4wODM5ODQ0LTQyLjcyNTk1MjEsMC4wODM5ODQ0SDM3M2MtMTQuMjQyNzM2OCwwLTI4LjQ4MzIxNTMsMC4wMDU5ODE0LTQyLjcyNTk1MjEsLTAuMDgzOTg0NAoJCQljLTExLjk5NjMzNzktMC4wNjg5MDg3LTIzLjk5MDExMjMtMC4yMDcyNzU0LTM1OTgyOTEwMi0wLjUzMjM0ODZjLTI2LjEzMzYwNi0wLjcwODMxMy01Mi40OTQxNDA2LTIuMjQ2NDYtNzguMzM3NTg1NC02Ljg5MjA4OTgKCQkJYy0yNi4yMTcyMjQxLTQuNzEyODI5Ni01MC42MTc1NTM3LTEyLjQwMzk5MTctNzQuNDM3OTI3Mi0yNC41Mjg4Njk2CgkJCWMtMjMuNDEyMTA5NC0xMS45MTcwNTMyLTQ0LjgzNjk3NTEtMjcuNDg5MDEzNy02My40MTMwODU5LTQ2LjA2NTEyNDVzLTM0LjE0ODA3MTMtNDAuMDAwOTc2Ni00Ni4wNjUxMjQ1LTYzLjQxMzA4NTkKCQkJYy0xMi4xMjQ4Nzc5LTIzLjgyMDM3MzUtMTkuODE2MTAxMS00OC4yMjA3NjQyLTI0LjUyODg2OTYtNzQuNDM3OTI3MgoJCQljLTQuNjQ1NjI5OS0yNS44NDM1MDU5LTYuMTgzNzc2OS01Mi4yMDM5Nzk1LTYuODkyMDg5OC03OC4zMzc1ODU0CgkJCWMtMC4zMjUwNzMyLTExLjk5Mjc5NzktMC40NjM0Mzk5LTIzLjk4NjU3MjMtMC41MzIzNDg2LTM1OTgyOTEwMgoJCQljLTAuMDkwMDI2OS0xNC4yNDI3MzY4LTAuMDg0MDQ1NC0yOC40ODMyMTUzLTAuMDg0MDQ1NC00Mi43MjU5NTIxYzYuMjgxMjVsMTIuNzczOTI1OCw4MS4xMjY5NTMxVjI1NS44NDI3NzM0CgkJYzAtNi43MDM2MTMzLDUuMjg4MDg1OS0xMi4yMTM4NjcyLDExLjk4NTgzOTgtMTIuNDg5MjU3OGM2LjY5NDgyNDItMC4yODk1NTA4LDEyLjQyMDg5ODQsNC43ODEyNSwxMi45NzE2Nzk3LDExLjQ2MTkxNDEKCQlsMjguNDk5NTExNywzNDUuNTM1MTU2MmwyNy4yNjMxODM2LTI5OS4wNjgzNTk0YzAuNTg0NDcyNy02LjQxMTYyMTEsNS45NDMzNTk0LTExLjMzMTA1NDcsMTIuMzgxODM1OS0xMS4zNjUyMzQ0CgkJYzYuMzkzMDY2NC0wLjAyMDAxOTUsMTEuODQ5MTIxMSw0LjgyODEyNSwxMi41MDE5NTMxLDExLjIzMjkxMDJsMjguNjc1MjkzLDI4MS40NDY3NzczbDI3LjE0MDEzNjctMjM1LjA0MDAzOTEKCQljMC43MjM2MzI4LTYuMjY1MTM2Nyw2LjAwMDk3NjYtMTEuMDEwMjUzOSwxMi4zMDgxMDU1LTExLjA2NTQyOTdjNi4zMjEyODkxLTAuMDY2ODk0NSwxMS42NjY5OTIyLDQuNTk2Njc5NywxMi41LDEwLjg0ODYzMjgKCQlsMjguOTc1MDk3NywyMTcuNDcwNzAzMWwyNi45NTUwNzgxLTE3MS4xODk5NDE0YzAuOTQ0MzM1OS01Ljk5ODUzNTIsNi4wNjM0NzY2LTEwLjQ1MDY4MzYsMTIuMTM1NzQyMi0xMC41NTM3MTA5CgkJYzYuMDY5MzM1OS0wLjEzMTM0NzcsMTEuMzM4ODY3Miw0LjE3MjM2MzMsMTIuNDg2MzI4MSwxMC4xMzU3NDIyTDU5NC45Nzk0OTIyLDU0Ni45Mzc1bDI2LjY3MzgyODEtMTA3LjgwMDc4MTIKCQljMS4zMjkxMDE2LTUuMzc0MDIzNCw2LjAzNTE1NjItOS4yMzI5MTAyLDExLjU2NTQyOTctOS40ODQzNzVjNS41NDk4MDQ3LTAuMjQ3MDcwMywxMC41NjczODI4LDMuMTY0NTUwOCwxMi4zNzk4ODI4LDguMzk1NTA3OAoJCWwzMS4zNzc5Mjk3LDkwLjU4MTA1NDdsMjYuNjU0Mjk2OS00Ni4xNjYwMTU2YzEuNjU3MjI2Ni0yLjg3MTA5MzgsNC4zODc2OTUzLTQuOTY2MzA4Niw3LjU4OTg0MzgtNS44MjQyMTg4CgkJYzMuMjAzMTI1LTAuODU2OTMzNiw2LjYxNDI1NzgtMC40MDkxNzk3LDkuNDg1MzUxNiwxLjI0OTAyMzRsMjguODIxMjg5MSwxNi42NDA2MjUKCQlDNzU1LjE2MTEzMjgsNDk3Ljc4MDc2MTcsNzYxLjU3ODEyNSw0OTkuNSw3NjguMDgzMDA3OCw0OTkuNSw3NjguMDgzMDA3OCw0OTkuNWgxMjguNzAxMTcxOWM2LjkwMzMyMDMsMCwxMi41LDUuNTk2Njc5NywxMi41LDEyLjUKCQlzLTUuNTk2Njc5NywxMi41LTEyLjUsMTIuNUg3NjguMDgzMDA3OGMtMTAuODg2NzE4OCwwLTIxLjYyNTk3NjYtMi44NzY5NTMxLTMxLjA1NTY2NDEtOC4zMjEyODkxTDcxOS4wMzEyNSw1MDUuNzg4NTc0MgoJCWwtMzQuMDg0OTYwOSw1OS4wMzU2NDQ1Yy0yLjQ0NjI4OTEsNC4yMzYzMjgxLTcuMTM3Njk1Myw2LjY1ODIwMzEtMTIuMDExNzE4OCw2LjE5MzM1OTQKCQljLTQuODcxMDkzOC0wLjQ2Mzg2NzItOS4wMjM0Mzc1LTMuNzI4NTE1Ni0xMC42MjUtOC4zNTE1NjI1bC0yNi41MjI0NjA5LTc2LjU2NTkxOGwtMzAuMjAwMTk1MywxMjIuMDUwMjkzCgkJYy0xLjM4MjgxMjUsNS41OTA4MjAzLTYuMzk5NDE0MSw5LjQ5ODA0NjktMTIuMTMwODU5NCw5LjQ5ODA0NjljLTAuMTA5Mzc1LDAtMC4yMTk3MjY2LTAuMDAwOTc2Ni0wLjMzMTA1NDctMC4wMDM5MDYyCgkJYy01Ljg2NzE4NzUtMC4xNTQyOTY5LTEwLjgzNjkxNDEtNC4zNzAxMTcyLTExLjk0NjI4OTEtMTAuMTMzNzg5MWwtMjYuODI5MTAxNi0xMzkuNDAzMzIwM2wtMjkuMjE3NzczNCwxODUuNTU4NTkzOAoJCWMtMC45NTgwMDc4LDYuMDgzOTg0NC02LjIwMTE3MTksMTAuNTU1NjY0MS0xMi4zNDUyMTQ4DEwLjU1NTY2NDFjLTAuMDUwMjkzLDAtMC4xMDAwOTc3LDAtMC4xNTA4Nzg5LTAuMDAwOTc2NgoJCWMtNi4yMDg0OTYxLTAuMDczMjQyMi0xMS40MjE4NzUtNC42OTMzNTk0LTEyLjI0MjE4NzUtMTAuODQ4NjMyOGwtMjcuMDU3NjE3Mi0yMDMuMDgyNTE5NWwtMjguODAyNzM0NCwyNDkuNDM5OTQxNAoJCWMtMC43Mjg1MTU2LDYuMzEwNTQ2OS02LjA3MzI0MjIsMTEuMDY1NDI5Ny0xMi40MTYwMTU2LDExLjA2NjQwNjJjLTAuMDI4ODA4NiwwLTAuMDU2NjQwNiwwLTAuMDg1NDQ5MiwwCgkJYy02LjM4MDg1OTQtMC4wNDI5Njg4LTExLjcwNDU4OTgtNC44ODQ3NjU2LTEyLjM1MTU2MjUtMTEuMjMzMzk4NGwtMjcuMjA3NTE5NS0yNjcuMDM4NTc0MmwtMjguNTc3MTQ4NCwzMTMuNDgwOTU3CgkJYy0wLjU4NjkxNDEsNi40Mzk0NTMxLTUuOTg3NzkzLDExLjM2NDI1NzgtMTIuNDQ3MjY1NiwxMS4zNjUyMzQ0Yy0wLjAxODU1NDcsMC0wLjAzNjEzMjgsMC0wLjA1NDY4NzUsMAoJCWMtNi40ODQ4NjMzLTAuMDI4MzIwMy0xMS44NzEwOTM4LTUuMDA5NzY1Ni0xMi40MDM4MDg2LTExLjQ3MjY1NjJMMzIzLjYxMjc5Myw1NTkuNDY1ODIwM3YyMDguNjkxNDA2MgoJCWMwLDYuNTI1MzkwNi01LjAxOTUzMTIsMTEuOTUzMTI1LTExLjUyNDkwMjMsMTIuNDYxOTE0MUMzMTEuNzU3ODEyNSw3ODAuNjQ0NTMxMiwzMTEuNDI4MjIyNyw3ODAuNjU4MjAzMSwzMTEuMTAyMDUwOCw3ODAuNjU4MjAzMQoJCXoiLz4KPC9nPgo8L3N2Zz4K" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/lamejs@1.2.1/lame.min.js"></script>
    <style>
      /* Custom scrollbar for webkit */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #18181b;
      }
      ::-webkit-scrollbar-thumb {
        background: #3f3f46;
        border-radius: 3px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #52525b;
      }
      /* Disable pull-to-refresh on mobile */
      body {
        overscroll-behavior-y: contain;
      }
      /* Safe area padding for iPhone X+ */
      .safe-area-pb {
        padding-bottom: env(safe-area-inset-bottom);
      }
      .safe-area-pl {
        padding-left: env(safe-area-inset-left);
      }
      .safe-area-pr {
        padding-right: env(safe-area-inset-right);
      }
    </style>
  </head>
  <body class="bg-zinc-950 text-zinc-100 antialiased overflow-hidden select-none">
    <div id="root" class="h-screen w-screen flex flex-col"></div>
    <script type="module" src="/index.tsx"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js').then(registration => {
            console.log('SW registered: ', registration);
          }).catch(registrationError => {
            console.log('SW registration failed: ', registrationError);
          });
        });
      }
    </script>
  </body>
</html>

        <script type="module" onerror="console.warn('Failed to load the app. Try reloading it.')">import '@/index';</script>
        